{"ast":null,"code":"var _jsxFileName = \"A:\\\\AI_LOGS\\\\hosting_1\\\\GIT_H3\\\\FrontendX\\\\src\\\\components\\\\home\\\\index_x.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport \"../../styles/SetUp_State/index2.css\"; // Ensure this path is correct\nimport axios from 'axios'; // Make sure axios is installed\nimport { useNavigate } from 'react-router-dom';\nimport Netflix from \"../../components/home/netflix\";\nimport { ThreeDot } from 'react-loading-indicators';\nimport bdaLogo from './BDA-avc.png'; // Adjust the path as necessary\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AvecusApp = () => {\n  _s();\n  const navigate = useNavigate();\n  // App states (unchanged)\n  const [appState, setAppState] = useState('setup');\n  const [gameType, setGameType] = useState('multiplication');\n  const [difficulty, setDifficulty] = useState('single');\n  const [firstDigit, setFirstDigit] = useState(1);\n  const [secondDigit, setSecondDigit] = useState(1);\n  const [speed, setSpeed] = useState(2);\n  const [count, setCount] = useState(10);\n\n  // Game data (unchanged)\n  const [numbers, setNumbers] = useState([]);\n  const [userAnswer, setUserAnswer] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [showingNumbers, setShowingNumbers] = useState(false);\n  const [result, setResult] = useState({\n    correct: false,\n    actualAnswer: '',\n    score: 0\n  });\n  const [targetNumber, setTargetNumber] = useState(null);\n  const [missingIndices, setMissingIndices] = useState([]);\n  const [symbols, setSymbols] = useState([]);\n  const [comparisonPairs, setComparisonPairs] = useState([]);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n\n  // With these:\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [questionAnswers, setQuestionAnswers] = useState([]);\n  const [currentQuestionAnswer, setCurrentQuestionAnswer] = useState('');\n  const [questionTimer, setQuestionTimer] = useState(null);\n  const [timeRemaining, setTimeRemaining] = useState(0);\n  const [gameElapsedTime, setGameElapsedTime] = useState(0);\n  const [availableQuestions, setAvailableQuestions] = useState(new Set([0])); // Questions user can access\n  const [autoSubmitTimer, setAutoSubmitTimer] = useState(null);\n\n  // 1. ADD ADDITION GAME STATE VARIABLES (add these with your other useState)\n  const [additionTimer, setAdditionTimer] = useState(null);\n  const [additionTimeRemaining, setAdditionTimeRemaining] = useState(0);\n  const [showAdditionAnswer, setShowAdditionAnswer] = useState(false);\n  const [additionNumbers, setAdditionNumbers] = useState([]);\n  const [additionCurrentIndex, setAdditionCurrentIndex] = useState(0);\n  const [additionShowingNumbers, setAdditionShowingNumbers] = useState(true);\n  const [additionIndividualTimer, setAdditionIndividualTimer] = useState(null);\n  const [beepInterval, setBeepInterval] = useState(null);\n  const [totalGameTime, setTotalGameTime] = useState(0); // Total time for entire game\n  const [gameStartTime, setGameStartTime] = useState(null); // When game started\n  const [totalGameTimer, setTotalGameTimer] = useState(null); // Global game timer\n\n  const [additionCurrentTimer, setAdditionCurrentTimer] = useState(0);\n  const [subtractionCurrentTimer, setSubtractionCurrentTimer] = useState(0);\n  const [mixedMathTimer, setMixedMathTimer] = useState(0);\n\n  // 2. ADD new state variables for subtraction display\n  const [subtractionNumbers, setSubtractionNumbers] = useState([]);\n  const [subtractionCurrentIndex, setSubtractionCurrentIndex] = useState(0);\n  const [subtractionShowingNumbers, setSubtractionShowingNumbers] = useState(true);\n  const [showSubtractionAnswer, setShowSubtractionAnswer] = useState(false);\n  const [subtractionTimeRemaining, setSubtractionTimeRemaining] = useState(0);\n  const [subtractionTimer, setSubtractionTimer] = useState(null);\n  const [gameIntervalTimer, setGameIntervalTimer] = useState(null);\n\n  // Auth state\n  const [userId, setUserId] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Performance tracking\n  const [performanceData, setPerformanceData] = useState({\n    totalGames: 0,\n    totalCorrect: 0,\n    totalScore: 0,\n    gameTypes: {},\n    dailyStats: {},\n    history: []\n  });\n  const [loading, setLoading] = useState(true); // Add loading state\n  const [showImage, setShowImage] = useState(false);\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\n\n  // Always use a safe, positive duration for timers (ms)\n  const getQuestionMs = () => {\n    const s = Number(speed);\n    const safeSeconds = !Number.isFinite(s) || s <= 0 ? 1 : s; // default 1s if invalid/0\n    return Math.max(100, Math.round(safeSeconds * 1000));\n  };\n\n  // useEffect(() => {\n  //   return () => {\n  //     if (questionTimer) clearInterval(questionTimer);\n  //     if (additionTimer) clearInterval(additionTimer);\n  //     if (beepInterval) clearInterval(beepInterval);\n  //   };\n  // }, [questionTimer, additionTimer, beepInterval]);\n\n  // 9. Additional cleanup in useEffect\n  useEffect(() => {\n    return () => {\n      // Cleanup all timers on component unmount\n      if (questionTimer) clearInterval(questionTimer);\n      if (additionTimer) clearInterval(additionTimer);\n      if (totalGameTimer) clearInterval(totalGameTimer);\n      if (beepInterval) clearInterval(beepInterval);\n    };\n  }, [questionTimer, additionTimer, totalGameTimer, beepInterval]);\n\n  //   useEffect(() => {\n  //   if (appState === 'result' && !result) {\n  //     console.warn('Result state without result data - staying in setup');\n  //     setAppState('setup');\n  //   }\n  // }, [appState, result]);\n\n  // 5. ADD this useEffect to ensure proper cleanup:\n  useEffect(() => {\n    return () => {\n      // Cleanup function for component unmount\n      const allTimers = [questionTimer, additionTimer, totalGameTimer, beepInterval, autoSubmitTimer, gameIntervalTimer];\n      allTimers.forEach(timer => {\n        if (timer) {\n          clearInterval(timer);\n          clearTimeout(timer);\n        }\n      });\n    };\n  }, []); // Empty dependency array - runs only on unmount\n\n  useEffect(() => {\n    // Set appropriate defaults when game type changes\n    if (gameType === 'subtraction') {\n      // For subtraction, default to double digits\n      if (firstDigit === 1) {\n        setFirstDigit(2);\n        setSecondDigit(2);\n        setDifficulty('double');\n      }\n    } else if (!['multiplication', 'division'].includes(gameType)) {\n      // For other games (except multiplication/division), default to single digits\n      if (firstDigit === 0 || firstDigit === '') {\n        setFirstDigit(1);\n        setSecondDigit(1);\n        setDifficulty('single');\n      }\n    }\n  }, [gameType]);\n  const renderGameWithErrorHandling = () => {\n    try {\n      // Your existing renderGame logic here, but wrap math operations in try-catch\n\n      // For math operation games - enhanced error handling\n      if (['multiplication', 'division'].includes(gameType)) {\n        if (!comparisonPairs || comparisonPairs.length === 0) {\n          console.error('No comparison pairs available');\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Game Error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Unable to load questions. Please try again.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setAppState('setup'),\n                className: \"avc-btn\",\n                children: \"Back to Setup\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 11\n          }, this);\n        }\n        const currentPair = comparisonPairs[currentQuestionIndex];\n        if (!currentPair || currentPair.length < 2) {\n          console.error('Invalid current pair:', currentPair);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Question Error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Invalid question data. Returning to setup.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this);\n        }\n\n        // Your existing math operations rendering logic continues here...\n        // (Keep the rest of your renderGame function as it was)\n      }\n\n      // Continue with rest of renderGame function...\n    } catch (error) {\n      console.error('Error in renderGame:', error);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-game-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Rendering Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"An error occurred while loading the game.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAppState('setup'),\n            className: \"avc-btn\",\n            children: \"Back to Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 7\n      }, this);\n    }\n  };\n\n  // FIX 6: Additional debugging and monitoring for timer expiry\n  const debugTimerExpiry = () => {\n    console.log('=== TIMER EXPIRY DEBUG ===');\n    console.log('Current app state:', appState);\n    console.log('Has comparison pairs:', !!(comparisonPairs !== null && comparisonPairs !== void 0 && comparisonPairs.length));\n    console.log('Current question index:', currentQuestionIndex);\n    console.log('Question answers:', questionAnswers);\n    console.log('Current question answer:', currentQuestionAnswer);\n    console.log('Time remaining:', timeRemaining);\n    console.log('Game elapsed time:', gameElapsedTime);\n  };\n\n  // FIX 7: Enhanced monitoring useEffect - ADD THIS TO YOUR COMPONENT\n  // useEffect(() => {\n  //   // Monitor app state changes\n  //   console.log('App state changed to:', appState);\n\n  //   if (appState === 'game' && timeRemaining <= 0 && totalGameTimer === null) {\n  //     console.log('DETECTED: Game state but no time remaining and no active timer');\n  //     console.log('This might be the white screen issue - forcing result check');\n\n  //     // Check if we have valid game data\n  //     if (comparisonPairs && comparisonPairs.length > 0) {\n  //       console.log('Valid game data found - calling forceEndGame');\n  //       forceEndGame();\n  //     } else {\n  //       console.log('No valid game data - returning to setup');\n  //       setAppState('setup');\n  //     }\n  //   }\n  // }, [appState, timeRemaining, totalGameTimer, comparisonPairs]);\n\n  // FIX 8: Add error boundary component for better error handling\n  const GameErrorBoundary = ({\n    children,\n    onError\n  }) => {\n    try {\n      return children;\n    } catch (error) {\n      console.error('Game Error Boundary caught error:', error);\n      onError && onError(error);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-game-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            backgroundColor: '#f8d7da',\n            color: '#721c24',\n            borderRadius: '5px',\n            margin: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Game Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"An unexpected error occurred. Please refresh the page and try again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.reload(),\n            style: {\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              padding: '10px 20px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              marginTop: '10px'\n            },\n            children: \"Refresh Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 7\n      }, this);\n    }\n  };\n\n  // FIX 9: Enhanced renderGame with white screen prevention\n  const renderGameEnhanced = () => {\n    // Add white screen detection\n    if (appState === 'game' && (!comparisonPairs || comparisonPairs.length === 0) && ['multiplication', 'division'].includes(gameType)) {\n      console.log('WHITE SCREEN DETECTED: No comparison pairs in game state');\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-game-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Loading Questions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please wait while we prepare your questions.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAppState('setup'),\n            style: {\n              backgroundColor: '#6c5ce7',\n              color: 'white',\n              border: 'none',\n              padding: '10px 20px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              marginTop: '10px'\n            },\n            children: \"Back to Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 7\n      }, this);\n    }\n\n    // Your existing renderGame logic goes here...\n    // But wrap it in the error boundary\n    return /*#__PURE__*/_jsxDEV(GameErrorBoundary, {\n      onError: error => {\n        console.error('Render error:', error);\n        setAppState('setup');\n        alert('A rendering error occurred. Returning to setup.');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 5\n    }, this);\n  };\n  const additionalCSS = `\n/* Fix number pad z-index and interaction issues */\n.number-pad {\n  position: relative !important;\n  z-index: 1000 !important;\n  pointer-events: auto !important;\n  isolation: isolate; /* Creates new stacking context */\n}\n\n.number-btn {\n  pointer-events: auto !important;\n  position: relative !important;\n  z-index: 1001 !important;\n  user-select: none !important;\n  touch-action: manipulation !important; /* Better mobile touch handling */\n}\n\n/* Ensure parent containers don't block events */\n.math-question-display {\n  position: relative !important;\n}\n\n.answer-input-section {\n  position: relative !important;\n  z-index: 999 !important;\n}\n\n/* Fix any overlapping issues */\n.avc-game-container {\n  position: relative !important;\n  overflow: visible !important;\n}\n\n/* Remove any conflicting pointer-events rules */\n.overlapping-class {\n  pointer-events: none !important;\n}\n\n/* Ensure buttons are always clickable */\n.number-pad * {\n  pointer-events: auto !important;\n}\n\n/* Fix button active states */\n.number-btn:active {\n  transform: scale(0.95) !important;\n  transition: transform 0.1s ease !important;\n}\n\n/* Mobile touch improvements */\n@media (max-width: 768px) {\n  .number-btn {\n    min-height: 50px !important;\n    min-width: 50px !important;\n    font-size: 18px !important;\n  }\n}\n  /* Background watermark */\n.avc-page-background::before,\n.avc-game-container::before,\n.avc-result-screen-container::before {\n  content: \"BRAIN DEVELOPMENT ACADEMY\";\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) rotate(-45deg);\n  font-size: clamp(2rem, 8vw, 6rem);\n  font-weight: 100;\n  color: rgba(0, 0, 0, 0.03);\n  z-index: -1;\n  pointer-events: none;\n  white-space: nowrap;\n  letter-spacing: 0.3em;\n  text-transform: uppercase;\n  font-family: 'Arial', sans-serif;\n}\n\n.dark-theme .avc-page-background::before,\n.dark-theme .avc-game-container::before,\n.dark-theme .avc-result-screen-container::before {\n  color: rgba(255, 255, 255, 0.03);\n}\n.number-btn.disabled {\n  opacity: 0.5 !important;\n  cursor: not-allowed !important;\n  pointer-events: none !important;\n}\n\n.number-btn:not(.disabled):hover {\n  background-color: #5a67d8 !important;\n  transform: scale(1.05) !important;\n}\n\n.timer-expired-message {\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.7; }\n  100% { opacity: 1; }\n}\n`;\n\n  // 7. Additional CSS to ensure result screen stays visible:\n  const additionalResultCSS = `\n.avc-result-screen-container {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  z-index: 9999 !important;\n  background-color: rgba(0, 0, 0, 0.8) !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  pointer-events: auto !important;\n}\n\n.avc-result-card {\n  background-color: white !important;\n  padding: 20px !important;\n  border-radius: 10px !important;\n  max-width: 90vw !important;\n  max-height: 90vh !important;\n  overflow: auto !important;\n  min-width: 300px !important;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5) !important;\n  pointer-events: auto !important;\n  position: relative !important;\n}\n\n/* Ensure no other elements can interfere */\n.avc-result-screen-container * {\n  pointer-events: auto !important;\n}\n`;\n\n  // Add the additional CSS to your existing additionalCSS\n  const combinedCSS = additionalCSS + additionalResultCSS;\n  const generateSubtractionNumbers = () => {\n    const nums = [];\n    const digits = firstDigit || 1;\n\n    // Generate first (largest) number\n    let firstNum;\n    if (digits === 1) firstNum = Math.floor(Math.random() * 5) + 5; // 5-9\n    else if (digits === 2) firstNum = Math.floor(Math.random() * 50) + 50; // 50-99\n    else if (digits === 3) firstNum = Math.floor(Math.random() * 500) + 500; // 500-999\n    else if (digits === 4) firstNum = Math.floor(Math.random() * 5000) + 5000;else if (digits === 5) firstNum = Math.floor(Math.random() * 50000) + 50000;else if (digits === 6) firstNum = Math.floor(Math.random() * 500000) + 500000;\n    nums.push(firstNum);\n    let remaining = firstNum * 0.8; // Keep 20% buffer to ensure positive result\n\n    // Generate remaining numbers that won't exceed the buffer\n    for (let i = 1; i < count; i++) {\n      const remainingSlots = count - i;\n      const maxForThisSlot = Math.floor(remaining / remainingSlots);\n      let num;\n      if (digits === 1) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 9);else if (digits === 2) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 99);else if (digits === 3) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 999);else if (digits === 4) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 9999);else if (digits === 5) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 99999);else if (digits === 6) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 999999);\n      num = Math.max(1, num); // Ensure at least 1\n      nums.push(num);\n      remaining -= num;\n    }\n    return nums;\n  };\n  const checkSubtractionAnswer = () => {\n    // Calculate by subtracting all numbers from the first\n    const result = subtractionNumbers.reduce((acc, num, index) => {\n      return index === 0 ? num : acc - num;\n    }, 0);\n    const correct = parseInt(userAnswer) === result;\n    const score = correct ? 2 : -1;\n\n    // Create result object that matches the expected structure\n    const resultData = {\n      correct,\n      actualAnswer: result.toString(),\n      score,\n      gameType: 'subtraction',\n      userAnswer: userAnswer,\n      // Add user's answer for display\n      totalQuestions: 1,\n      correctCount: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    };\n    updatePerformanceData(correct, score, null, {\n      totalQuestions: 1,\n      correctAnswers: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    });\n    setResult(resultData);\n    updatePerformanceData(correct, score);\n    setAppState('result');\n  };\n  useEffect(() => {\n    // Whenever isInputDisabled becomes true (time expired), capture current state\n    if (isInputDisabled && timeRemaining <= 0 && appState === 'game') {\n      console.log('=== TIME EXPIRED - CAPTURING FINAL STATE ===');\n      console.log('Captured state:', {\n        currentQuestionIndex,\n        currentQuestionAnswer,\n        questionAnswers: [...questionAnswers],\n        comparisonPairsLength: comparisonPairs.length,\n        gameType,\n        count,\n        speed\n      });\n\n      // Call auto-submit with current state\n      autoSubmitWithCapturedState();\n    }\n  }, [isInputDisabled, timeRemaining, appState]);\n\n  // MODIFIED checkAllAnswersForAutoSubmit - exact copy of checkAllAnswers but with console logging\n  const checkAllAnswersForAutoSubmit = answers => {\n    console.log('=== CHECKING ALL ANSWERS - AUTO SUBMIT VERSION ===');\n    console.log('Game type:', gameType);\n    console.log('User answers (raw):', answers);\n    console.log('Comparison pairs:', comparisonPairs);\n    let correctCount = 0;\n    let actualAnswers = [];\n    const expectedCount = comparisonPairs.length;\n\n    // Ensure we have valid comparison pairs\n    if (!comparisonPairs || comparisonPairs.length === 0) {\n      console.error('No comparison pairs available');\n      setAppState('setup');\n      return;\n    }\n\n    // Calculate correct answers based on game type\n    try {\n      switch (gameType) {\n        case 'subtraction':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = a - b;\n            console.log(`Question ${index + 1}: ${a} - ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'multiplication':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = a * b;\n            console.log(`Question ${index + 1}: ${a} × ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'division':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = Math.round(a / b);\n            console.log(`Question ${index + 1}: ${a} ÷ ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'mixedMath':\n          actualAnswers = comparisonPairs.map(([a, b, operation], index) => {\n            const result = operation === 'addition' ? a + b : a - b;\n            console.log(`Question ${index + 1}: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        default:\n          console.error('Unknown game type for checkAllAnswers:', gameType);\n          setAppState('setup');\n          return;\n      }\n    } catch (error) {\n      console.error('Error calculating correct answers:', error);\n      setAppState('setup');\n      return;\n    }\n\n    // Normalize user answers array\n    const normalizedAnswers = [...answers];\n    while (normalizedAnswers.length < expectedCount) {\n      normalizedAnswers.push('');\n    }\n    console.log('Correct answers calculated:', actualAnswers);\n    console.log('Normalized user answers:', normalizedAnswers);\n\n    // Compare answers\n    correctCount = normalizedAnswers.filter((userAns, idx) => {\n      const cleanUserAns = String(userAns || '').replace(/\\s+/g, '').toLowerCase();\n      const cleanCorrectAns = String(actualAnswers[idx] || '').replace(/\\s+/g, '').toLowerCase();\n      let isMatch = false;\n      if (cleanUserAns === '' || cleanCorrectAns === '') {\n        isMatch = false;\n      } else {\n        isMatch = cleanUserAns === cleanCorrectAns;\n        if (!isMatch) {\n          const userNum = parseFloat(cleanUserAns);\n          const correctNum = parseFloat(cleanCorrectAns);\n          if (!isNaN(userNum) && !isNaN(correctNum)) {\n            isMatch = Math.abs(userNum - correctNum) < 0.001;\n          }\n        }\n      }\n      console.log(`Question ${idx + 1}: \"${cleanUserAns}\" vs \"${cleanCorrectAns}\" = ${isMatch ? 'CORRECT' : 'WRONG'}`);\n      return isMatch;\n    }).length;\n    const accuracy = expectedCount > 0 ? correctCount / expectedCount : 0;\n    const isCorrect = accuracy >= 0.8;\n    const score = isCorrect ? 2 : -1;\n    console.log(`Final Result: ${correctCount}/${expectedCount} correct, accuracy: ${(accuracy * 100).toFixed(1)}%`);\n\n    // Create result object\n    const resultData = {\n      correct: isCorrect,\n      actualAnswer: `${correctCount}/${expectedCount} correct`,\n      score: score,\n      userAnswers: normalizedAnswers,\n      correctAnswers: actualAnswers,\n      accuracy: (accuracy * 100).toFixed(1) + '%',\n      gameType: gameType,\n      totalQuestions: expectedCount,\n      correctCount: correctCount,\n      timestamp: Date.now()\n    };\n    console.log('Setting final result data:', resultData);\n\n    // Update performance data\n    updatePerformanceData(isCorrect, score, null, {\n      totalQuestions: expectedCount,\n      correctAnswers: correctCount,\n      accuracy: (accuracy * 100).toFixed(1) + '%'\n    });\n\n    // Set result and change state\n    try {\n      setResult(resultData);\n\n      // Use setTimeout to ensure result is set before changing state\n      setTimeout(() => {\n        console.log('Transitioning to result state');\n        setAppState('result');\n      }, 300);\n    } catch (error) {\n      console.error('Error setting result:', error);\n      setAppState('setup');\n    }\n  };\n\n  // NEW FUNCTION: Auto-submit using captured state\n  const autoSubmitWithCapturedState = () => {\n    console.log('=== AUTO-SUBMITTING WITH CAPTURED STATE ===');\n\n    // Use current state directly - don't wait for state updates\n    const finalAnswers = [...questionAnswers];\n\n    // Add current answer\n    if (currentQuestionIndex >= 0 && currentQuestionIndex < comparisonPairs.length) {\n      finalAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\n    }\n\n    // Fill remaining with empty strings\n    while (finalAnswers.length < count) {\n      finalAnswers.push('');\n    }\n    console.log('Final answers:', finalAnswers);\n    console.log('Comparison pairs count:', comparisonPairs.length);\n    console.log('Game type:', gameType);\n\n    // Validate we have game data\n    if (!comparisonPairs || comparisonPairs.length === 0) {\n      console.error('ERROR: No comparison pairs - something went wrong');\n      return; // Exit early, don't go to setup\n    }\n\n    // Clear all timers\n    const timersToGlear = [totalGameTimer, beepInterval, autoSubmitTimer, questionTimer, gameIntervalTimer];\n    timersToGlear.forEach(timer => {\n      if (timer) {\n        try {\n          clearInterval(timer);\n          clearTimeout(timer);\n        } catch (e) {\n          console.log('Timer cleanup error:', e.message);\n        }\n      }\n    });\n    setTotalGameTimer(null);\n    setBeepInterval(null);\n    setAutoSubmitTimer(null);\n    setQuestionTimer(null);\n    setGameIntervalTimer(null);\n\n    // Process results immediately\n    try {\n      checkAllAnswersForAutoSubmit(finalAnswers);\n    } catch (error) {\n      console.error('Error in auto-submit:', error);\n    }\n  };\n\n  // Add beep sound function\n  // const playBeep = () => {\n  //   try {\n  //     const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n  //     const oscillator = audioContext.createOscillator();\n  //     const gainNode = audioContext.createGain();\n\n  //     oscillator.connect(gainNode);\n  //     gainNode.connect(audioContext.destination);\n\n  //     oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n  //     gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n  //     gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n\n  //     oscillator.start(audioContext.currentTime);\n  //     oscillator.stop(audioContext.currentTime + 0.5);\n  //   } catch (error) {\n  //     console.log('Beep sound not supported');\n  //   }\n  // };   10-09\n\n  // Enhanced beep sound function with different types\n  const playBeep = (type = 'normal') => {\n    try {\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n\n      // Different beep types\n      switch (type) {\n        case 'normal':\n          oscillator.frequency.setValueAtTime(600, audioContext.currentTime);\n          gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.2);\n          break;\n        case 'warning':\n          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);\n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.15);\n          break;\n        case 'urgent':\n          // Double beep for urgency\n          oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);\n          gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.1);\n\n          // Second beep\n          setTimeout(() => {\n            const oscillator2 = audioContext.createOscillator();\n            const gainNode2 = audioContext.createGain();\n            oscillator2.connect(gainNode2);\n            gainNode2.connect(audioContext.destination);\n            oscillator2.frequency.setValueAtTime(1000, audioContext.currentTime);\n            gainNode2.gain.setValueAtTime(0.4, audioContext.currentTime);\n            gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\n            oscillator2.start(audioContext.currentTime);\n            oscillator2.stop(audioContext.currentTime + 0.1);\n          }, 150);\n          break;\n        case 'final':\n          oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);\n          gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);\n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.8);\n          break;\n      }\n    } catch (error) {\n      console.log('Beep sound not supported');\n    }\n  };\n\n  // 2. REPLACE startAdditionIntervalDisplay function\n  const startAdditionIntervalDisplay = nums => {\n    let currentIdx = 0;\n    setAdditionCurrentIndex(0);\n    setAdditionCurrentTimer(speed); // Set initial timer display\n\n    // Timer countdown for display\n    const timerInterval = setInterval(() => {\n      setAdditionCurrentTimer(prev => {\n        if (prev <= 1) {\n          return speed; // Reset to speed when reaching 0\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    // Play beep for first number\n    playBeep('normal');\n    const interval = setInterval(() => {\n      if (currentIdx < nums.length - 1) {\n        currentIdx++;\n        setAdditionCurrentIndex(currentIdx);\n        setAdditionCurrentTimer(speed); // Reset timer for new number\n        playBeep('normal');\n      } else {\n        // All numbers shown, now show input\n        clearInterval(interval);\n        clearInterval(timerInterval);\n        setAdditionShowingNumbers(false);\n        setShowAdditionAnswer(true);\n      }\n    }, speed * 1000);\n    setGameIntervalTimer(interval);\n  };\n\n  // 3. REPLACE startSubtractionIntervalDisplay function\n  const startSubtractionIntervalDisplay = nums => {\n    let currentIdx = 0;\n    setSubtractionCurrentIndex(0);\n    setSubtractionCurrentTimer(speed); // Set initial timer display\n\n    // Timer countdown for display\n    const timerInterval = setInterval(() => {\n      setSubtractionCurrentTimer(prev => {\n        if (prev <= 1) {\n          return speed;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    playBeep('normal');\n    const interval = setInterval(() => {\n      if (currentIdx < nums.length - 1) {\n        currentIdx++;\n        setSubtractionCurrentIndex(currentIdx);\n        setSubtractionCurrentTimer(speed); // Reset timer for new number\n        playBeep('normal');\n      } else {\n        clearInterval(interval);\n        clearInterval(timerInterval);\n        setSubtractionShowingNumbers(false);\n        setShowSubtractionAnswer(true);\n      }\n    }, speed * 1000);\n    setGameIntervalTimer(interval);\n  };\n\n  // 4. REPLACE generateMixedMathPairs to generate numbers with operations\n  // const generateMixedMathNumbers = () => {\n  //   const numbers = [];\n  //   const digit1 = firstDigit || 1;\n\n  //   for (let i = 0; i < count; i++) {\n  //     let num;\n\n  //     // Generate number based on firstDigit\n  //     if (digit1 === 1) num = Math.floor(Math.random() * 9) + 1;\n  //     else if (digit1 === 2) num = Math.floor(Math.random() * 90) + 10;\n  //     else if (digit1 === 3) num = Math.floor(Math.random() * 900) + 100;\n  //     else if (digit1 === 4) num = Math.floor(Math.random() * 9000) + 1000;\n  //     else if (digit1 === 5) num = Math.floor(Math.random() * 90000) + 10000;\n  //     else if (digit1 === 6) num = Math.floor(Math.random() * 900000) + 100000;\n\n  //     // 50% chance to be negative (subtraction)\n  //     const isNegative = Math.random() < 0.5;\n\n  //     numbers.push({\n  //       value: num,\n  //       operation: isNegative ? 'subtract' : 'add'\n  //     });\n  //   }\n\n  //   // Ensure first number is always positive to avoid negative results\n  //   numbers[0].operation = 'add';\n\n  //   // Check if result would be negative, if so, adjust\n  //   let runningSum = 0;\n  //   for (let i = 0; i < numbers.length; i++) {\n  //     if (numbers[i].operation === 'add') {\n  //       runningSum += numbers[i].value;\n  //     } else {\n  //       runningSum -= numbers[i].value;\n  //     }\n\n  //     // If result becomes negative, change this number to addition\n  //     if (runningSum < 0) {\n  //       numbers[i].operation = 'add';\n  //       runningSum += 2 * numbers[i].value; // Add back twice to correct\n  //     }\n  //   }\n\n  //   return numbers;\n  // };\n\n  const generateMixedMathNumbers = () => {\n    const numbers = [];\n    const digit1 = firstDigit || 1;\n\n    // Start with a large positive number to ensure final result stays positive\n    let startingNumber;\n    if (digit1 === 1) startingNumber = Math.floor(Math.random() * 5) + 5; // 5-9\n    else if (digit1 === 2) startingNumber = Math.floor(Math.random() * 50) + 50; // 50-99\n    else if (digit1 === 3) startingNumber = Math.floor(Math.random() * 500) + 500; // 500-999\n    else if (digit1 === 4) startingNumber = Math.floor(Math.random() * 5000) + 5000;else if (digit1 === 5) startingNumber = Math.floor(Math.random() * 50000) + 50000;else if (digit1 === 6) startingNumber = Math.floor(Math.random() * 500000) + 500000;\n    numbers.push({\n      value: startingNumber,\n      operation: 'add'\n    });\n    let runningSum = startingNumber;\n    for (let i = 1; i < count; i++) {\n      let num;\n\n      // Generate number based on firstDigit but smaller to avoid negative results\n      if (digit1 === 1) num = Math.floor(Math.random() * 4) + 1; // 1-4\n      else if (digit1 === 2) num = Math.floor(Math.random() * 30) + 10; // 10-39\n      else if (digit1 === 3) num = Math.floor(Math.random() * 200) + 100; // 100-299\n      else if (digit1 === 4) num = Math.floor(Math.random() * 2000) + 1000;else if (digit1 === 5) num = Math.floor(Math.random() * 20000) + 10000;else if (digit1 === 6) num = Math.floor(Math.random() * 200000) + 100000;\n\n      // Randomly choose operation, but ensure it won't make result negative\n      const wouldBeNegative = runningSum - num < 0;\n      const isSubtract = Math.random() < 0.5 && !wouldBeNegative;\n      const operation = isSubtract ? 'subtract' : 'add';\n      if (operation === 'add') {\n        runningSum += num;\n      } else {\n        runningSum -= num;\n      }\n      numbers.push({\n        value: num,\n        operation: operation\n      });\n    }\n    console.log(`Generated mixed math numbers (final result: ${runningSum}):`, numbers);\n    return numbers;\n  };\n  const startAdditionSequentialDisplay = (nums, timePerNumber) => {\n    let currentIdx = 0;\n    setAdditionCurrentIndex(0);\n    const interval = setInterval(() => {\n      if (currentIdx < nums.length - 1) {\n        currentIdx++;\n        setAdditionCurrentIndex(currentIdx);\n\n        // Play beep sound when showing new number\n        playBeep();\n      } else {\n        // All numbers shown, now show input\n        clearInterval(interval);\n        setAdditionShowingNumbers(false);\n        setShowAdditionAnswer(true);\n      }\n    }, timePerNumber);\n  };\n\n  // API configuration\n  const API_URL = 'http://localhost:5000/api';\n\n  // Check authentication on load\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const deviceId = localStorage.getItem('deviceId');\n    if (token) {\n      console.log(\"Found token, verifying...\");\n      axios.get(`${API_URL}/auth/verify`, {\n        headers: {\n          Authorization: `${token}`,\n          'X-Device-Id': deviceId\n        }\n      }).then(response => {\n        console.log(\"Token verified successfully\", response.data);\n        setUserId(response.data.userId);\n        fetchUserData(response.data.userId);\n      }).catch(err => {\n        console.error(\"Authentication error:\", err);\n        localStorage.removeItem('token');\n        setIsLoading(false);\n        loadLocalData();\n      });\n    } else {\n      console.log(\"No token found, loading local data\");\n      loadLocalData();\n      setIsLoading(false);\n    }\n  }, []);\n  const loadLocalData = () => {\n    const savedData = localStorage.getItem('avecusPerformance');\n    if (savedData) {\n      try {\n        setPerformanceData(JSON.parse(savedData));\n      } catch (e) {\n        console.error(\"Error parsing saved performance data\", e);\n      }\n    }\n  };\n  const fetchUserData = uid => {\n    const token = localStorage.getItem('token');\n    const deviceId = localStorage.getItem('deviceId');\n    setIsLoading(true);\n    axios.get(`${API_URL}/performance/${uid}`, {\n      headers: {\n        Authorization: `${token}`,\n        'X-Device-Id': deviceId\n      }\n    }).then(response => {\n      if (response.data) {\n        console.log(\"Successfully loaded data from server:\", response.data);\n        setPerformanceData(response.data);\n      } else {\n        console.log(\"No data found on server, initializing empty structure\");\n        const emptyData = {\n          totalGames: 0,\n          totalCorrect: 0,\n          totalScore: 0,\n          gameTypes: {},\n          dailyStats: {},\n          history: []\n        };\n        setPerformanceData(emptyData);\n      }\n      setIsLoading(false);\n    }).catch(err => {\n      console.error(\"Error fetching user data:\", err);\n      setError(\"Could not load your data. Using local data instead.\");\n      loadLocalData();\n      setIsLoading(false);\n    });\n  };\n  useEffect(() => {\n    if (isLoading) return;\n    localStorage.setItem('avecusPerformance', JSON.stringify(performanceData));\n    console.log(\"Saved to localStorage:\", performanceData);\n    const deviceId = localStorage.getItem('deviceId');\n    if (userId) {\n      const timerId = setTimeout(() => {\n        console.log(\"Saving to server for user:\", userId);\n        axios.post(`${API_URL}/performance/${userId}`, performanceData, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `${localStorage.getItem('token')}`,\n            'X-Device-Id': deviceId\n          }\n        }).then(response => {\n          console.log(\"Successfully saved to server:\", response.data);\n        }).catch(err => {\n          console.error(\"Error saving data to server:\", err);\n          setError(\"Failed to save your progress to the server.\");\n        });\n      }, 2000);\n      return () => clearTimeout(timerId);\n    }\n  }, [performanceData, userId, isLoading]);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const savedData = localStorage.getItem('avecusPerformance');\n      console.log(\"Data persistence check:\", savedData ? \"Data exists in localStorage\" : \"No data in localStorage\");\n    }, 5000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Updated gameModes with the three new math operation games at the top\n  const gameModes = [{\n    value: 'addition',\n    label: 'Addition ⭐'\n  }, {\n    value: 'subtraction',\n    label: 'Subtraction ⭐'\n  }, {\n    value: 'multiplication',\n    label: 'Multiplication ⭐'\n  }, {\n    value: 'division',\n    label: 'Division ⭐'\n  }, {\n    value: 'mixedMath',\n    label: 'Addition And Subtraction ⭐'\n  }\n\n  // { value: 'memory', label: 'Memory Mode' },\n\n  // Add the new total operation modes\n  // { value: 'totalAddition', label: 'Total Addition' },\n  // { value: 'totalSubtraction', label: 'Total Subtraction' },\n  // { value: 'totalMultiplication', label: 'Total Multiplication' },\n  // { value: 'totalDivision', label: 'Total Division' },\n  // { value: 'counting', label: 'Counting Mode' },\n\n  // { value: 'counting', label: 'Counting Mode' },\n  // { value: 'pattern', label: 'Pattern Recognition' },\n  // { value: 'reverse', label: 'Reverse Counting' },\n  // { value: 'missing', label: 'Missing Number' },\n  // { value: 'oddeven', label: 'Odd & Even Recognition' },\n  // { value: 'multiples', label: 'Multiples & Factors' },\n  // { value: 'comparison', label: 'Number Comparison' },\n  // { value: 'speed', label: 'Speed Counting' },\n  // { value: 'symbol', label: 'Number-Symbol Association' }\n  ];\n  const getCurrentDateString = () => {\n    const now = new Date();\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n  };\n\n  // const generateNumbers = () => {\n  //   const newNumbers = [];\n  //   for (let i = 0; i < count; i++) {\n  //     if (difficulty === 'single') {\n  //       newNumbers.push(Math.floor(Math.random() * 10));\n  //     } else if (difficulty === 'double') {\n  //       newNumbers.push(Math.floor(Math.random() * 90 + 10));\n  //     } else {\n  //       newNumbers.push(Math.floor(Math.random() * 900 + 100));\n  //     }\n  //   }\n  //   return newNumbers;\n  // };\n\n  const generateNumbers = () => {\n    const newNumbers = [];\n    const digits = firstDigit || 1;\n    for (let i = 0; i < count; i++) {\n      if (digits === 1) {\n        newNumbers.push(Math.floor(Math.random() * 9) + 1);\n      } else if (digits === 2) {\n        newNumbers.push(Math.floor(Math.random() * 90) + 10);\n      } else if (digits === 3) {\n        newNumbers.push(Math.floor(Math.random() * 900) + 100);\n      } else if (digits === 4) {\n        newNumbers.push(Math.floor(Math.random() * 9000) + 1000);\n      } else if (digits === 5) {\n        newNumbers.push(Math.floor(Math.random() * 90000) + 10000);\n      } else if (digits === 6) {\n        newNumbers.push(Math.floor(Math.random() * 900000) + 100000);\n      }\n    }\n    return newNumbers;\n  };\n  const generateSymbols = () => {\n    const symbols = ['★', '♦', '♣', '♠', '♥', '▲', '●', '■', '◆', '○'];\n    return Array(count).fill().map(() => symbols[Math.floor(Math.random() * symbols.length)]);\n  };\n  const generateComparisonPairs = () => {\n    const pairs = [];\n    for (let i = 0; i < count; i++) {\n      const num1 = Math.floor(Math.random() * 50) + 1;\n      const num2 = Math.floor(Math.random() * 50) + 1;\n      pairs.push([num1, num2]);\n    }\n    return pairs;\n  };\n\n  // Generate number pairs for subtraction, ensuring the first number is larger\n  // REPLACE your generateSubtractionPairs, generateMultiplicationPairs, and generateDivisionPairs functions:\n\n  // Generate number pairs for subtraction, ensuring the first number is larger\n  // const generateSubtractionPairs = () => {\n  //   const pairs = [];\n  //   // Use 'count' parameter to generate the correct number of questions\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n  //     if (difficulty === 'single') {\n  //       num1 = Math.floor(Math.random() * 9) + 5;  // Start with at least 5\n  //       num2 = Math.floor(Math.random() * Math.min(num1, 5)) + 1;\n  //     } else if (difficulty === 'double') {\n  //       num1 = Math.floor(Math.random() * 50) + 50; // Start with at least 50\n  //       num2 = Math.floor(Math.random() * Math.min(num1, 50)) + 1;\n  //     } else {\n  //       num1 = Math.floor(Math.random() * 500) + 500; // Start with at least 500\n  //       num2 = Math.floor(Math.random() * Math.min(num1, 500)) + 1;\n  //     }\n  //     pairs.push([num1, num2]);\n  //   }\n  //   console.log(`Generated ${pairs.length} subtraction pairs:`, pairs); // Debug log\n  //   return pairs;\n  // }; 10-09\n\n  // Generate number pairs for multiplication\n  // const generateMultiplicationPairs = () => {\n  //   const pairs = [];\n  //   // Use 'count' parameter to generate the correct number of questions\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n  //     if (difficulty === 'single') {\n  //       num1 = Math.floor(Math.random() * 9) + 1;\n  //       num2 = Math.floor(Math.random() * 9) + 1;\n  //     } else if (difficulty === 'double') {\n  //       num1 = Math.floor(Math.random() * 12) + 1;\n  //       num2 = Math.floor(Math.random() * 12) + 1;\n  //     } else {\n  //       num1 = Math.floor(Math.random() * 20) + 1;\n  //       num2 = Math.floor(Math.random() * 20) + 1;\n  //     }\n  //     pairs.push([num1, num2]);\n  //   }\n  //   console.log(`Generated ${pairs.length} multiplication pairs:`, pairs); // Debug log\n  //   return pairs;\n  // };\n\n  // Generate number pairs for division, ensuring clean division\n  // const generateDivisionPairs = () => {\n  //   const pairs = [];\n  //   // Use 'count' parameter to generate the correct number of questions\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n  //     if (difficulty === 'single') {\n  //       num2 = Math.floor(Math.random() * 9) + 1;\n  //       const multiplier = Math.floor(Math.random() * 9) + 1;\n  //       num1 = num2 * multiplier;\n  //     } else if (difficulty === 'double') {\n  //       num2 = Math.floor(Math.random() * 12) + 1;\n  //       const multiplier = Math.floor(Math.random() * 12) + 1;\n  //       num1 = num2 * multiplier;\n  //     } else {\n  //       num2 = Math.floor(Math.random() * 20) + 1;\n  //       const multiplier = Math.floor(Math.random() * 20) + 1;\n  //       num1 = num2 * multiplier;\n  //     }\n  //     pairs.push([num1, num2]);\n  //   }\n  //   console.log(`Generated ${pairs.length} division pairs:`, pairs); // Debug log\n  //   return pairs;\n  // };\n\n  //   const generateMultiplicationPairs = () => {\n  //   const pairs = [];\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n  //     switch(difficulty) {\n  //       case 'single':\n  //         num1 = Math.floor(Math.random() * 9) + 1;\n  //         num2 = Math.floor(Math.random() * 9) + 1;\n  //         break;\n  //       case 'double':\n  //         num1 = Math.floor(Math.random() * 12) + 1;\n  //         num2 = Math.floor(Math.random() * 12) + 1;\n  //         break;\n  //       case 'triple':\n  //         num1 = Math.floor(Math.random() * 20) + 1;\n  //         num2 = Math.floor(Math.random() * 20) + 1;\n  //         break;\n  //       case 'singleToDouble':\n  //         // Single digit numbers that multiply to double digit results\n  //         num1 = Math.floor(Math.random() * 9) + 2; // 2-10\n  //         num2 = Math.floor(Math.random() * 9) + 2; // 2-10\n  //         // Ensure result is double digit\n  //         while ((num1 * num2) < 10 || (num1 * num2) > 99) {\n  //           num1 = Math.floor(Math.random() * 9) + 2;\n  //           num2 = Math.floor(Math.random() * 9) + 2;\n  //         }\n  //         break;\n  //       case 'doubleToSingle':\n  //         // Double digit first number, single digit second, result is single digit\n  //         num2 = Math.floor(Math.random() * 9) + 1; // 1-9\n  //         num1 = Math.floor(Math.random() * 90) + 10; // 10-99\n  //         break;\n  //       default:\n  //         num1 = Math.floor(Math.random() * 9) + 1;\n  //         num2 = Math.floor(Math.random() * 9) + 1;\n  //     }\n  //     pairs.push([num1, num2]);\n  //   }\n  //   console.log(`Generated ${pairs.length} multiplication pairs:`, pairs);\n  //   return pairs;\n  // };10-09\n\n  // const generateDivisionPairs = () => {\n  //   const pairs = [];\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n  //     switch(difficulty) {\n  //       case 'single':\n  //         num2 = Math.floor(Math.random() * 9) + 1;\n  //         const multiplier1 = Math.floor(Math.random() * 9) + 1;\n  //         num1 = num2 * multiplier1;\n  //         break;\n  //       case 'double':\n  //         num2 = Math.floor(Math.random() * 12) + 1;\n  //         const multiplier2 = Math.floor(Math.random() * 12) + 1;\n  //         num1 = num2 * multiplier2;\n  //         break;\n  //       case 'triple':\n  //         num2 = Math.floor(Math.random() * 20) + 1;\n  //         const multiplier3 = Math.floor(Math.random() * 20) + 1;\n  //         num1 = num2 * multiplier3;\n  //         break;\n  //       case 'singleToDouble':\n  //         // Single digit division resulting in double digit answer\n  //         num2 = Math.floor(Math.random() * 9) + 1; // 1-9\n  //         const multiplier4 = Math.floor(Math.random() * 90) + 10; // 10-99\n  //         num1 = num2 * multiplier4;\n  //         break;\n  //       case 'doubleToSingle':\n  //         // Double digit divided by double digit = single digit\n  //         const result = Math.floor(Math.random() * 9) + 1; // 1-9\n  //         num2 = Math.floor(Math.random() * 90) + 10; // 10-99\n  //         num1 = num2 * result;\n  //         break;\n  //       default:\n  //         num2 = Math.floor(Math.random() * 9) + 1;\n  //         const multiplier5 = Math.floor(Math.random() * 9) + 1;\n  //         num1 = num2 * multiplier5;\n  //     }\n  //     pairs.push([num1, num2]);\n  //   }\n  //   console.log(`Generated ${pairs.length} division pairs:`, pairs);\n  //   return pairs;\n  // };10-09\n\n  // const startGlobalGameTimer = () => {\n  //   const totalGameTime = speed * count * 1000; // Total time = interval per question × number of questions\n  //   console.log(`Starting game: ${speed}s per question × ${count} questions = ${totalGameTime/1000}s total`);\n\n  //   // Clear existing timers\n  //   if (totalGameTimer) clearInterval(totalGameTimer);\n  //   if (beepInterval) clearInterval(beepInterval);\n  //   if (autoSubmitTimer) clearInterval(autoSubmitTimer);\n\n  //   setGameElapsedTime(0);\n  //   setTimeRemaining(totalGameTime);\n  //   setAvailableQuestions(new Set([0])); // Start with only first question available\n\n  //   // Auto-submit timer for when total time is up\n  //   const submitTimer = setTimeout(() => {\n  //     console.log('Total game time up - auto-submitting');\n  //     forceEndGame();\n  //   }, totalGameTime);\n  //   setAutoSubmitTimer(submitTimer);\n\n  //   // Main game timer - updates every 100ms\n  //   const gameTimer = setInterval(() => {\n  //     setGameElapsedTime(prev => {\n  //       const newElapsed = prev + 100;\n  //       const newRemaining = totalGameTime - newElapsed;\n\n  //       // Calculate which questions should be available based on elapsed time\n  //       const intervalMs = speed * 1000;\n  //       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\n  //       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\n\n  //       // Update available questions\n  //       const newAvailable = new Set();\n  //       for (let i = 0; i <= maxAvailableQuestion; i++) {\n  //         newAvailable.add(i);\n  //       }\n  //       setAvailableQuestions(newAvailable);\n\n  //       // Beep at interval transitions\n  //       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\n  //         playBeep('normal');\n  //       }\n\n  //       setTimeRemaining(newRemaining);\n\n  //       if (newRemaining <= 0) {\n  //         clearInterval(gameTimer);\n  //         clearTimeout(submitTimer);\n  //         setTotalGameTimer(null);\n  //         setAutoSubmitTimer(null);\n  //         return newElapsed;\n  //       }\n\n  //       return newElapsed;\n  //     });\n  //   }, 100);\n\n  //   setTotalGameTimer(gameTimer);\n  // };\n  // 18\n\n  // const startGlobalGameTimer = () => {\n  //   const totalTime = speed * count * 1000;\n  //   console.log(`Starting timer: ${totalTime}ms - NO AUTO-SUBMIT`);\n\n  //   // Clear existing timers\n\n  //   setGameElapsedTime(0);\n  //   setTimeRemaining(totalTime);\n  //   setAvailableQuestions(new Set([0]));\n\n  //   // NO AUTO-SUBMIT TIMERS - Remove these lines completely:\n  //   // const primarySubmitTimer = setTimeout(() => { forceEndGame(); }, totalTime);\n  //   // const backupSubmitTimer = setTimeout(() => { forceEndGame(); }, totalTime + 500);\n  //   // const emergencyTimer = setTimeout(() => { handleEmergencyResult(); }, totalTime + 2000);\n\n  //   // Main game timer - ONLY updates display, never force-submits\n  //   const gameTimer = setInterval(() => {\n  //     setGameElapsedTime(prev => {\n  //       const newElapsed = prev + 100;\n  //       const newRemaining = totalTime - newElapsed;\n\n  //       // Update available questions based on time\n  //       const intervalMs = speed * 1000;\n  //       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\n  //       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\n\n  //       const newAvailable = new Set();\n  //       for (let i = 0; i <= maxAvailableQuestion; i++) {\n  //         newAvailable.add(i);\n  //       }\n  //       setAvailableQuestions(newAvailable);\n\n  //       // Play beep at intervals\n  //       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\n  //         playBeep('normal');\n  //       }\n\n  //       setTimeRemaining(newRemaining);\n\n  //       // When time reaches zero, just stop the timer - NO FORCE SUBMIT\n  //       if (newRemaining <= 0) {\n  //         clearInterval(gameTimer);\n  //         setTotalGameTimer(null);\n\n  //         // Optional: Disable input after time expires\n  //         // You can add UI indication that time is up\n  //         console.log('Time expired - but allowing user to continue');\n  //         return newElapsed;\n  //       }\n\n  //       return newElapsed;\n  //     });\n  //   }, 100);\n\n  //   setTotalGameTimer(gameTimer);\n  // };\n\n  const startGlobalGameTimer = () => {\n    const totalTime = speed * count * 1000;\n    console.log(`Starting timer: ${totalTime}ms - AUTO-SUBMIT ON EXPIRY`);\n    setGameElapsedTime(0);\n    setTimeRemaining(totalTime);\n    setAvailableQuestions(new Set([0]));\n    setIsInputDisabled(false);\n    let hasTriggeredExpiry = false; // Flag to prevent multiple triggers\n\n    const gameTimer = setInterval(() => {\n      setGameElapsedTime(prev => {\n        const newElapsed = prev + 100;\n        const newRemaining = totalTime - newElapsed;\n\n        // Update available questions during active time\n        if (newRemaining > 0) {\n          const intervalMs = speed * 1000;\n          const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\n          const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\n          const newAvailable = new Set();\n          for (let i = 0; i <= maxAvailableQuestion; i++) {\n            newAvailable.add(i);\n          }\n          setAvailableQuestions(newAvailable);\n          if (newElapsed % intervalMs < 100 && newElapsed > 100) {\n            playBeep('normal');\n          }\n        }\n        setTimeRemaining(newRemaining);\n\n        // When time expires - trigger only ONCE\n        if (newRemaining <= 0 && !hasTriggeredExpiry) {\n          hasTriggeredExpiry = true;\n          console.log('⏰ TIME EXPIRED - STOPPING TIMER');\n          clearInterval(gameTimer);\n          setTotalGameTimer(null);\n          setIsInputDisabled(true);\n\n          // Make all questions available\n          const allAvailable = new Set();\n          for (let i = 0; i < count; i++) {\n            allAvailable.add(i);\n          }\n          setAvailableQuestions(allAvailable);\n        }\n        return newElapsed;\n      });\n    }, 100);\n    setTotalGameTimer(gameTimer);\n  };\n\n  // NEW FUNCTION: Auto-submit all remaining answers\n  const autoSubmitAllAnswers = () => {\n    console.log('=== AUTO-SUBMITTING ALL ANSWERS ===');\n    console.log('Current state:', {\n      currentQuestionIndex,\n      currentQuestionAnswer,\n      questionAnswers: [...questionAnswers],\n      comparisonPairsLength: comparisonPairs.length,\n      gameType\n    });\n\n    // Validate we have game data\n    if (!comparisonPairs || comparisonPairs.length === 0) {\n      console.error('No comparison pairs available - cannot submit');\n      setAppState('setup');\n      return;\n    }\n\n    // Get current state of all answers\n    const finalAnswers = [...questionAnswers];\n\n    // Add current answer if we're on a valid question\n    if (currentQuestionIndex >= 0 && currentQuestionIndex < comparisonPairs.length) {\n      finalAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\n      console.log(`Added current answer at index ${currentQuestionIndex}: \"${finalAnswers[currentQuestionIndex]}\"`);\n    }\n\n    // Ensure we have exactly count answers (fill empty ones)\n    while (finalAnswers.length < count) {\n      finalAnswers.push('');\n    }\n    console.log('Final answers being submitted:', finalAnswers);\n    console.log('Total answers count:', finalAnswers.length);\n    console.log('Expected count:', count);\n    console.log('Game type:', gameType);\n\n    // Clear all active timers FIRST\n    const timersToGlear = [totalGameTimer, beepInterval, autoSubmitTimer, questionTimer, gameIntervalTimer];\n    timersToGlear.forEach(timer => {\n      if (timer) {\n        try {\n          clearInterval(timer);\n          clearTimeout(timer);\n        } catch (e) {\n          console.log('Timer cleanup error (non-critical):', e.message);\n        }\n      }\n    });\n\n    // Reset timer states\n    setTotalGameTimer(null);\n    setBeepInterval(null);\n    setAutoSubmitTimer(null);\n    setQuestionTimer(null);\n    setGameIntervalTimer(null);\n    console.log('All timers cleared. Now calling checkAllAnswers...');\n\n    // Process results IMMEDIATELY - no timeout\n    try {\n      checkAllAnswers(finalAnswers);\n    } catch (error) {\n      console.error('Error in autoSubmitAllAnswers:', error);\n      alert('Error processing results. Please try again.');\n      setAppState('setup');\n    }\n  };\n\n  // SOLUTION 2: EXTENDED TIME AFTER EXPIRY\n  // This allows input for extra time after main timer expires\n\n  // const startGlobalGameTimer = () => {\n  //   const totalGameTime = speed * count * 1000; // Total time = interval per question × number of questions\n  //   console.log(`Starting game: ${speed}s per question × ${count} questions = ${totalGameTime/1000}s total`);\n\n  //   // Clear existing timers\n  //   if (totalGameTimer) clearInterval(totalGameTimer);\n  //   if (beepInterval) clearInterval(beepInterval);\n  //   if (autoSubmitTimer) clearTimeout(autoSubmitTimer);\n\n  //   setGameElapsedTime(0);\n  //   setTimeRemaining(totalGameTime);\n  //   setAvailableQuestions(new Set([0])); // Start with only first question available\n\n  //   // Auto-submit timer for when total time is up - THIS IS THE KEY FIX\n  //   const submitTimer = setTimeout(() => {\n  //     console.log('=== TOTAL GAME TIME EXPIRED - AUTO SUBMITTING ===');\n\n  //     // Clear all timers immediately\n  //     if (totalGameTimer) {\n  //       clearInterval(totalGameTimer);\n  //       setTotalGameTimer(null);\n  //     }\n  //     if (beepInterval) {\n  //       clearInterval(beepInterval);\n  //       setBeepInterval(null);\n  //     }\n\n  //     // Force end the game with current state\n  //     forceEndGame();\n  //   }, totalGameTime);\n  //   setAutoSubmitTimer(submitTimer);\n\n  //   // Main game timer - updates every 100ms\n  //   const gameTimer = setInterval(() => {\n  //     setGameElapsedTime(prev => {\n  //       const newElapsed = prev + 100;\n  //       const newRemaining = totalGameTime - newElapsed;\n\n  //       // Calculate which questions should be available based on elapsed time\n  //       const intervalMs = speed * 1000;\n  //       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\n  //       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\n\n  //       // Update available questions\n  //       const newAvailable = new Set();\n  //       for (let i = 0; i <= maxAvailableQuestion; i++) {\n  //         newAvailable.add(i);\n  //       }\n  //       setAvailableQuestions(newAvailable);\n\n  //       // Beep at interval transitions\n  //       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\n  //         playBeep('normal');\n  //       }\n\n  //       setTimeRemaining(newRemaining);\n\n  //       // Check if time is up\n  //       if (newRemaining <= 0) {\n  //         console.log('Game timer reached zero - clearing interval');\n  //         clearInterval(gameTimer);\n  //         setTotalGameTimer(null);\n\n  //         // Don't call forceEndGame here since setTimeout will handle it\n  //         return newElapsed;\n  //       }\n\n  //       return newElapsed;\n  //     });\n  //   }, 100);\n\n  //   setTotalGameTimer(gameTimer);\n  //   console.log('Global game timer started successfully');\n  // };\n\n  // 4. NEW FUNCTION: Force end game when total time is up\n  // const forceEndGame = () => {\n  //   console.log('Force ending game - collecting all answers');\n\n  //   // Add current answer to the list\n  //   const finalAnswers = [...questionAnswers];\n  //   if (currentQuestionAnswer.trim()) {\n  //     finalAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\n  //   }\n\n  //   // Fill remaining answers with empty strings\n  //   while (finalAnswers.length < comparisonPairs.length) {\n  //     finalAnswers.push('');\n  //   }\n\n  //   console.log('Final answers submitted:', finalAnswers);\n  //   checkAllAnswers(finalAnswers);\n  // };\n  // 18\n\n  const forceEndGame = () => {\n    console.log('=== FORCE ENDING GAME - ENHANCED VERSION ===');\n\n    // Validation checks\n    if (!comparisonPairs || comparisonPairs.length === 0) {\n      console.error('No comparison pairs available - cannot end game properly');\n      alert('Game data is missing. Returning to setup.');\n      setAppState('setup');\n      return;\n    }\n    console.log('Current state snapshot:', {\n      currentQuestionIndex,\n      currentQuestionAnswer,\n      questionAnswers: [...questionAnswers],\n      comparisonPairsLength: comparisonPairs.length,\n      timeRemaining,\n      gameElapsedTime\n    });\n\n    // Collect all answers with current answer\n    const finalAnswers = [...questionAnswers];\n\n    // Add current answer if valid\n    if (currentQuestionIndex >= 0 && currentQuestionIndex < comparisonPairs.length) {\n      const currentAnswer = (currentQuestionAnswer || '').toString().trim();\n      finalAnswers[currentQuestionIndex] = currentAnswer;\n      console.log(`Added current answer \"${currentAnswer}\" for question ${currentQuestionIndex + 1}`);\n    }\n\n    // Ensure we have exactly the right number of answers\n    while (finalAnswers.length < comparisonPairs.length) {\n      finalAnswers.push('');\n    }\n    console.log('Final answers for submission:', finalAnswers);\n\n    // Clear all timers immediately\n    [totalGameTimer, beepInterval, autoSubmitTimer, questionTimer, gameIntervalTimer].forEach(timer => {\n      if (timer) {\n        clearInterval(timer);\n        clearTimeout(timer);\n      }\n    });\n\n    // Reset timer states\n    setTotalGameTimer(null);\n    setBeepInterval(null);\n    setAutoSubmitTimer(null);\n    setQuestionTimer(null);\n    setGameIntervalTimer(null);\n    setTimeRemaining(0);\n\n    // Process results with error handling\n    setTimeout(() => {\n      try {\n        checkAllAnswers(finalAnswers);\n      } catch (error) {\n        console.error('Error in forceEndGame -> checkAllAnswers:', error);\n        alert('Error processing results. Please try again.');\n        setAppState('setup');\n      }\n    }, 200);\n  };\n\n  // FIX 2: REPLACE your forceEndGame function with this enhanced version\n  // const forceEndGame = () => {\n  //   console.log('=== FORCE ENDING GAME - ENHANCED VERSION ===');\n  //   console.log('Current state:', {\n  //     currentQuestionIndex,\n  //     currentQuestionAnswer,\n  //     questionAnswers,\n  //     comparisonPairsLength: comparisonPairs.length,\n  //     appState\n  //   });\n\n  //   // Ensure we have the comparison pairs data\n  //   if (!comparisonPairs || comparisonPairs.length === 0) {\n  //     console.error('No comparison pairs available for force end');\n  //     // Fallback to setup if no game data\n  //     setAppState('setup');\n  //     return;\n  //   }\n\n  //   // Collect all answers including current one\n  //   const finalAnswers = [...questionAnswers];\n\n  //   // Add current answer if it exists and we're on a valid question\n  //   if (currentQuestionIndex >= 0 && \n  //       currentQuestionIndex < comparisonPairs.length && \n  //       currentQuestionAnswer && \n  //       currentQuestionAnswer.trim()) {\n  //     finalAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\n  //     console.log(`Added current answer \"${currentQuestionAnswer.trim()}\" for question ${currentQuestionIndex + 1}`);\n  //   }\n\n  //   // Fill remaining answers with empty strings\n  //   while (finalAnswers.length < comparisonPairs.length) {\n  //     finalAnswers.push('');\n  //   }\n\n  //   console.log('Final answers for submission:', finalAnswers);\n  //   console.log('Total questions expected:', comparisonPairs.length);\n\n  //   // Clear ALL timers immediately to prevent any interference\n  //   const timersToGlear = [\n  //     totalGameTimer, beepInterval, autoSubmitTimer, \n  //     questionTimer, gameIntervalTimer\n  //   ];\n\n  //   timersToGlear.forEach(timer => {\n  //     if (timer) {\n  //       clearInterval(timer);\n  //       clearTimeout(timer);\n  //     }\n  //   });\n\n  //   // Reset timer states\n  //   setTotalGameTimer(null);\n  //   setBeepInterval(null);\n  //   setAutoSubmitTimer(null);\n  //   setQuestionTimer(null);\n  //   setGameIntervalTimer(null);\n\n  //   // Ensure we're in a stable state before checking answers\n  //   setTimeRemaining(0);\n\n  //   // Use setTimeout to ensure all state updates complete before checking answers\n  //   setTimeout(() => {\n  //     console.log('Checking answers after timeout');\n  //     try {\n  //       checkAllAnswers(finalAnswers);\n  //     } catch (error) {\n  //       console.error('Error in checkAllAnswers:', error);\n  //       // Fallback to setup on error\n  //       setAppState('setup');\n  //       alert('An error occurred while processing results. Please try again.');\n  //     }\n  //   }, 200); // Increased timeout to ensure state stability\n  // };\n\n  // const generateSubtractionPairs = () => {\n  //   const pairs = [];\n  //   const digit1 = firstDigit || 1;\n  //   const digit2 = secondDigit || 1;\n\n  //   for (let i = 0; i < count; i++) {\n  //     let num1, num2;\n\n  //     // Generate first number based on firstDigit\n  //     if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;\n  //     else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;\n  //     else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;\n  //     else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;\n  //     else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;\n  //     else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\n\n  //     // Generate second number based on secondDigit\n  //     if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;\n  //     else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;\n  //     else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;\n  //     else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\n  //     else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\n  //     else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\n\n  //     // Ensure positive result\n  //     if (num2 > num1) [num1, num2] = [num2, num1];\n\n  //     pairs.push([num1, num2]);\n  //   }\n  //   return pairs;\n  // };\n\n  const generateSubtractionPairs = () => {\n    const pairs = [];\n    const digit1 = firstDigit || 1;\n    const digit2 = secondDigit || 1;\n    for (let i = 0; i < count; i++) {\n      let num1, num2;\n\n      // Generate second number (smaller) first based on secondDigit\n      if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\n\n      // Generate first number (larger) to ensure positive result\n      let minFirst = num2 + 1; // At least 1 more than second number\n      let maxFirst;\n      if (digit1 === 1) maxFirst = 9;else if (digit1 === 2) maxFirst = 99;else if (digit1 === 3) maxFirst = 999;else if (digit1 === 4) maxFirst = 9999;else if (digit1 === 5) maxFirst = 99999;else if (digit1 === 6) maxFirst = 999999;\n\n      // Ensure minFirst doesn't exceed maxFirst\n      if (minFirst > maxFirst) {\n        // If second number is too big, regenerate a smaller one\n        if (digit2 === 1) num2 = Math.floor(Math.random() * Math.min(8, maxFirst - 1)) + 1;else if (digit2 === 2) num2 = Math.floor(Math.random() * Math.min(89, maxFirst - 1)) + 10;else if (digit2 === 3) num2 = Math.floor(Math.random() * Math.min(899, maxFirst - 1)) + 100;else num2 = Math.floor(maxFirst * 0.8); // 80% of max for safety\n\n        minFirst = num2 + 1;\n      }\n      num1 = Math.floor(Math.random() * (maxFirst - minFirst + 1)) + minFirst;\n      pairs.push([num1, num2]);\n    }\n    console.log(`Generated ${pairs.length} subtraction pairs (all positive results):`, pairs);\n    return pairs;\n  };\n  const generateDivisionPairs = () => {\n    const pairs = [];\n    const digit1 = firstDigit || 1; // Dividend (first number) digits\n    const digit2 = secondDigit || 1; // Divisor (second number) digits\n\n    console.log(`Generating division pairs: ${digit1}-digit ÷ ${digit2}-digit`);\n    for (let i = 0; i < count; i++) {\n      let num2, num1;\n\n      // Generate divisor (second number) based on secondDigit\n      if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1; // 1-9\n      else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10; // 10-99\n      else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100; // 100-999\n      else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\n\n      // Calculate the max value for dividend based on firstDigit\n      let maxDividend;\n      if (digit1 === 1) maxDividend = 9;else if (digit1 === 2) maxDividend = 99;else if (digit1 === 3) maxDividend = 999;else if (digit1 === 4) maxDividend = 9999;else if (digit1 === 5) maxDividend = 99999;else if (digit1 === 6) maxDividend = 999999;\n\n      // Calculate min value for dividend\n      let minDividend;\n      if (digit1 === 1) minDividend = 1;else if (digit1 === 2) minDividend = 10;else if (digit1 === 3) minDividend = 100;else if (digit1 === 4) minDividend = 1000;else if (digit1 === 5) minDividend = 10000;else if (digit1 === 6) minDividend = 100000;\n\n      // Calculate maximum multiplier that keeps dividend within range\n      const maxMultiplier = Math.floor(maxDividend / num2);\n      const minMultiplier = Math.max(1, Math.ceil(minDividend / num2));\n\n      // Generate a random multiplier within the valid range\n      let multiplier;\n      if (maxMultiplier >= minMultiplier) {\n        multiplier = Math.floor(Math.random() * (maxMultiplier - minMultiplier + 1)) + minMultiplier;\n      } else {\n        // If no valid range, adjust divisor to be smaller\n        num2 = Math.floor(Math.random() * Math.min(9, maxDividend)) + 1;\n        multiplier = Math.floor(Math.random() * (Math.floor(maxDividend / num2) - 1)) + 1;\n      }\n\n      // Calculate dividend\n      num1 = num2 * multiplier;\n\n      // Ensure dividend is within the correct digit range\n      if (num1 > maxDividend) {\n        num1 = maxDividend;\n      }\n      if (num1 < minDividend) {\n        num1 = minDividend;\n      }\n\n      // Final validation - make sure we can cleanly divide\n      // If not clean division, adjust num1 to be a clean multiple of num2\n      if (num1 % num2 !== 0) {\n        num1 = num2 * Math.floor(num1 / num2);\n      }\n      console.log(`Division pair ${i + 1}: ${num1} ÷ ${num2} = ${num1 / num2} (${digit1} digits ÷ ${digit2} digits)`);\n      pairs.push([num1, num2]);\n    }\n    return pairs;\n  };\n\n  // ALSO UPDATE generateMultiplicationPairs to be consistent:\n\n  const generateMultiplicationPairs = () => {\n    const pairs = [];\n    const digit1 = firstDigit || 1;\n    const digit2 = secondDigit || 1;\n    console.log(`Generating multiplication pairs: ${digit1}-digit × ${digit2}-digit`);\n    for (let i = 0; i < count; i++) {\n      let num1, num2;\n\n      // Generate first number based on firstDigit\n      if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\n\n      // Generate second number based on secondDigit\n      if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\n      console.log(`Multiplication pair ${i + 1}: ${num1} × ${num2} = ${num1 * num2}`);\n      pairs.push([num1, num2]);\n    }\n    return pairs;\n  };\n\n  // 2. ADD this new function after generateDivisionPairs (around line 580)\n  const generateMixedMathPairs = () => {\n    const pairs = [];\n    const digit1 = firstDigit || 1;\n    const digit2 = secondDigit || 1;\n    for (let i = 0; i < count; i++) {\n      let num1, num2;\n\n      // Generate first number based on firstDigit\n      if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\n\n      // Generate second number based on secondDigit\n      if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\n\n      // Randomly choose addition or subtraction\n      const operation = Math.random() < 0.5 ? 'addition' : 'subtraction';\n\n      // For subtraction, ensure positive result\n      if (operation === 'subtraction' && num2 > num1) {\n        [num1, num2] = [num2, num1];\n      }\n      pairs.push([num1, num2, operation]);\n    }\n    console.log(`Generated ${pairs.length} mixed math pairs:`, pairs);\n    return pairs;\n  };\n  const startGame = () => {\n    let generatedNumbers = [];\n    let pairs = [];\n    switch (gameType) {\n      //    case 'addition':\n      //   generatedNumbers = generateNumbers();\n      //   setAdditionNumbers(generatedNumbers);\n      //   setAdditionCurrentIndex(0);\n      //   setAdditionShowingNumbers(true);\n\n      //   const totalAdditionTime = speed * 1000; // Total time in ms\n      //   setAdditionIndividualTimer(Math.floor(totalAdditionTime / count));\n      //   setAdditionTimeRemaining(totalAdditionTime);\n      //   setShowAdditionAnswer(false);\n      //   setUserAnswer('');\n      //   setAppState('game');\n\n      //   startAdditionTimer();\n      //   startAdditionSequentialDisplay(generatedNumbers, Math.floor(totalAdditionTime / count));\n      //   return;\n      case 'addition':\n        generatedNumbers = generateNumbers();\n        setAdditionNumbers(generatedNumbers);\n        setAdditionCurrentIndex(0);\n        setAdditionShowingNumbers(true);\n        setShowAdditionAnswer(false);\n        setUserAnswer('');\n        setAppState('game');\n        startAdditionIntervalDisplay(generatedNumbers);\n        return;\n      case 'subtraction':\n        // Use the new subtraction number generation\n        generatedNumbers = generateSubtractionNumbers();\n        setSubtractionNumbers(generatedNumbers);\n        setSubtractionCurrentIndex(0);\n        setSubtractionShowingNumbers(true);\n        setShowSubtractionAnswer(false);\n        setUserAnswer('');\n        setAppState('game');\n        startSubtractionIntervalDisplay(generatedNumbers);\n        return;\n      case 'multiplication':\n      case 'division':\n        console.log(`Starting ${gameType}: ${count} questions, ${speed}s per question`);\n\n        // Generate pairs based on game type\n        if (gameType === 'subtraction') pairs = generateSubtractionPairs();else if (gameType === 'multiplication') pairs = generateMultiplicationPairs();else if (gameType === 'division') pairs = generateDivisionPairs();else if (gameType === 'mixedMath') pairs = generateMixedMathPairs();\n        setComparisonPairs(pairs);\n        setCurrentQuestionIndex(0);\n        setQuestionAnswers(Array(count).fill(''));\n        setCurrentQuestionAnswer('');\n        setAppState('game');\n        startGlobalGameTimer();\n        return;\n      case 'mixedMath':\n        const mixedNumbers = generateMixedMathNumbers();\n        setAdditionNumbers(mixedNumbers); // Store mixed numbers in additionNumbers\n        setAdditionCurrentIndex(0);\n        setAdditionShowingNumbers(true);\n        setShowAdditionAnswer(false);\n        setUserAnswer('');\n        setAppState('game');\n        startMixedMathDisplay(mixedNumbers);\n        return;\n\n      // New total operation cases\n      case 'totalAddition':\n      case 'totalSubtraction':\n      case 'totalMultiplication':\n      case 'totalDivision':\n        // Generate sequence of numbers for the calculation\n        if (difficulty === 'single') {\n          generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 9) + 1);\n        } else if (difficulty === 'double') {\n          generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 90) + 10);\n        } else {\n          generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 900) + 100);\n        }\n\n        // For totalSubtraction, ensure positive results\n        if (gameType === 'totalSubtraction') {\n          let firstNumber;\n          if (difficulty === 'single') {\n            firstNumber = Math.floor(Math.random() * 30) + 20; // 20-50\n          } else if (difficulty === 'double') {\n            firstNumber = Math.floor(Math.random() * 100) + 100; // 100-200\n          } else {\n            firstNumber = Math.floor(Math.random() * 500) + 500; // 500-1000\n          }\n          const subsequentNumbers = [];\n          let remainingValue = firstNumber * 0.8;\n          for (let i = 1; i < count; i++) {\n            const remainingPositions = count - i;\n            const maxForThisPosition = Math.floor(remainingValue / remainingPositions);\n            let maxValue;\n            if (difficulty === 'single') {\n              maxValue = Math.min(9, maxForThisPosition);\n            } else if (difficulty === 'double') {\n              maxValue = Math.min(99, maxForThisPosition);\n            } else {\n              maxValue = Math.min(999, maxForThisPosition);\n            }\n            maxValue = Math.max(1, maxValue);\n            const nextNum = Math.floor(Math.random() * maxValue) + 1;\n            subsequentNumbers.push(nextNum);\n            remainingValue -= nextNum;\n          }\n          generatedNumbers = [firstNumber, ...subsequentNumbers];\n        }\n\n        // For totalDivision, ensure clean division\n        if (gameType === 'totalDivision') {\n          const baseNumber = generatedNumbers[0];\n          generatedNumbers = [baseNumber];\n          for (let i = 1; i < count; i++) {\n            const divisors = [];\n            for (let j = 2; j <= Math.min(baseNumber, 12); j++) {\n              if (baseNumber % j === 0) divisors.push(j);\n            }\n            generatedNumbers.push(divisors.length > 0 ? divisors[Math.floor(Math.random() * divisors.length)] : 1);\n          }\n        }\n        break;\n      case 'memory':\n        generatedNumbers = generateNumbers();\n        break;\n      case 'counting':\n        generatedNumbers = generateNumbers();\n        setTargetNumber(Math.floor(Math.random() * 10));\n        break;\n      case 'pattern':\n        const start = Math.floor(Math.random() * 10);\n        const step = Math.floor(Math.random() * 5) + 1;\n        generatedNumbers = Array(count).fill().map((_, i) => start + i * step);\n        break;\n      case 'reverse':\n        generatedNumbers = generateNumbers();\n        break;\n      case 'missing':\n        generatedNumbers = Array(count).fill().map((_, i) => i + 1);\n        const missing = [];\n        const totalMissing = Math.floor(count / 3);\n        while (missing.length < totalMissing) {\n          const idx = Math.floor(Math.random() * count);\n          if (!missing.includes(idx)) missing.push(idx);\n        }\n        setMissingIndices(missing);\n        break;\n      case 'oddeven':\n        generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 100));\n        break;\n      case 'multiples':\n        const baseFactor = Math.floor(Math.random() * 9) + 2;\n        generatedNumbers = Array(count).fill().map((_, i) => baseFactor * (i + 1));\n        setTargetNumber(baseFactor);\n        break;\n      case 'comparison':\n        setComparisonPairs(generateComparisonPairs());\n        break;\n      case 'speed':\n        const start2 = Math.floor(Math.random() * 50) + 1;\n        generatedNumbers = Array(count).fill().map((_, i) => start2 + i);\n        break;\n      case 'symbol':\n        generatedNumbers = generateNumbers().slice(0, 5);\n        setSymbols(generateSymbols().slice(0, 5));\n        break;\n      default:\n        generatedNumbers = generateNumbers();\n    }\n    setNumbers(generatedNumbers);\n    setCurrentIndex(0);\n    setShowingNumbers(true);\n    setAppState('game');\n\n    // Show numbers sequentially for non-math operations\n    showNumbersSequentially(generatedNumbers);\n  };\n\n  // 6. REPLACE startMixedMathDisplay function\n  const startMixedMathDisplay = mixedNumbers => {\n    let currentIdx = 0;\n    setAdditionCurrentIndex(0);\n    setMixedMathTimer(speed);\n\n    // Timer countdown for display\n    const timerInterval = setInterval(() => {\n      setMixedMathTimer(prev => {\n        if (prev <= 1) {\n          return speed;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    playBeep('normal');\n    const interval = setInterval(() => {\n      if (currentIdx < mixedNumbers.length - 1) {\n        currentIdx++;\n        setAdditionCurrentIndex(currentIdx);\n        setMixedMathTimer(speed); // Reset timer for new number\n        playBeep('normal');\n      } else {\n        // All numbers shown, now show input\n        clearInterval(interval);\n        clearInterval(timerInterval);\n        setAdditionShowingNumbers(false);\n        setShowAdditionAnswer(true);\n      }\n    }, speed * 1000);\n    setGameIntervalTimer(interval);\n  };\n\n  // 7. REPLACE checkMixedMathAnswer function\n  const checkMixedMathAnswer = () => {\n    // Calculate result from mixed math numbers\n    let result = 0;\n    for (let i = 0; i < additionNumbers.length; i++) {\n      const numData = additionNumbers[i];\n      if (numData.operation === 'add') {\n        result += numData.value;\n      } else {\n        result -= numData.value;\n      }\n    }\n    const correct = parseInt(userAnswer) === result;\n    const score = correct ? 2 : -1;\n\n    // Create result object that matches the expected structure\n    const resultData = {\n      correct,\n      actualAnswer: result.toString(),\n      score,\n      gameType: 'mixedMath',\n      userAnswer: userAnswer,\n      // Add user's answer for display\n      totalQuestions: 1,\n      correctCount: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    };\n\n    // In checkMixedMathAnswer function:\n    updatePerformanceData(correct, score, null, {\n      totalQuestions: 1,\n      correctAnswers: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    });\n    setResult(resultData);\n    updatePerformanceData(correct, score);\n    setAppState('result');\n  };\n\n  // const startAdditionTimer = () => {\n  //   const timer = setInterval(() => {\n  //     setAdditionTimeRemaining(prev => {\n  //       if (prev <= 100) {\n  //         clearInterval(timer);\n  //         setShowAdditionAnswer(true);\n  //         return 0;\n  //       }\n  //       return prev - 100;\n  //     });\n  //   }, 100);\n  //   setAdditionTimer(timer);\n  // };\n\n  // 4. ADD ADDITION ANSWER CHECK\n  // const checkAdditionAnswer = () => {\n  //   const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\n  //   const correct = parseInt(userAnswer) === correctSum;\n  //   const  score = correct ? 2 : -1;\n\n  //   setResult({ \n  //     correct, \n  //     actualAnswer: correctSum.toString(), \n  //     score \n  //   });\n\n  //   updatePerformanceData(correct, score);\n  //   setAppState('result');\n  // };\n\n  //   const startAdditionTimer = () => {\n  //   const timer = setInterval(() => {\n  //     setAdditionTimeRemaining(prev => {\n  //       // Play beep when 3 seconds remaining\n  //       if (prev <= 3000 && prev > 2900) {\n  //         playBeep();\n  //       }\n\n  //       if (prev <= 100) {\n  //         clearInterval(timer);\n  //         playBeep(); // Beep when time expires\n  //         setShowAdditionAnswer(true);\n  //         return 0;\n  //       }\n  //       return prev - 100;\n  //     });\n  //   }, 100);\n  //   setAdditionTimer(timer);\n  // }; 09-10\n\n  const startAdditionTimer = () => {\n    if (beepInterval) {\n      clearInterval(beepInterval);\n      setBeepInterval(null);\n    }\n\n    // Start regular beeping every second for addition\n    const beepTimer = setInterval(() => {\n      playBeep('normal');\n    }, 1000);\n    setBeepInterval(beepTimer);\n    const timer = setInterval(() => {\n      setAdditionTimeRemaining(prev => {\n        const newTime = prev - 100;\n\n        // Different beep patterns for addition timer\n        if (newTime <= 3000 && newTime > 2000) {\n          // Last 3 seconds - warning beeps\n          if (newTime % 1000 < 100) {\n            clearInterval(beepTimer); // Stop regular beeping\n            playBeep('warning');\n          }\n        } else if (newTime <= 2000 && newTime > 1000) {\n          // Last 2 seconds - faster urgent beeps\n          if (newTime % 500 < 100) {\n            playBeep('urgent');\n          }\n        } else if (newTime <= 1000 && newTime > 0) {\n          // Last 1 second - very fast urgent beeps\n          if (newTime % 250 < 100) {\n            playBeep('urgent');\n          }\n        }\n        if (newTime <= 100) {\n          clearInterval(timer);\n          clearInterval(beepTimer);\n          setBeepInterval(null);\n          playBeep('final'); // Final beep when time expires\n          setShowAdditionAnswer(true);\n          return 0;\n        }\n        return newTime;\n      });\n    }, 100);\n    setAdditionTimer(timer);\n  };\n  const checkAdditionAnswer = () => {\n    const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\n    const correct = parseInt(userAnswer) === correctSum;\n    const score = correct ? 2 : -1;\n\n    // Create result object that matches the expected structure\n    const resultData = {\n      correct,\n      actualAnswer: correctSum.toString(),\n      score,\n      gameType: 'addition',\n      userAnswer: userAnswer,\n      // Add user's answer for display\n      totalQuestions: 1,\n      correctCount: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    };\n    updatePerformanceData(correct, score, null, {\n      totalQuestions: 1,\n      correctAnswers: correct ? 1 : 0,\n      accuracy: correct ? '100%' : '0%'\n    });\n    setResult(resultData);\n    updatePerformanceData(correct, score);\n    setAppState('result');\n  };\n\n  // 5. ADD SHOW ANSWER FUNCTION\n  const showCorrectAdditionAnswer = () => {\n    const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\n    alert(`Correct Answer: ${correctSum}`);\n  };\n\n  // 3. ADD NEW TIMER FUNCTIONS\n  // const startQuestionTimer = () => {\n  //   console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\n  //   console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\n\n  //   // Clear any existing timer first\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n\n  //   // Reset time remaining\n  //   setTimeRemaining(speed * 1000);\n\n  //   const timer = setInterval(() => {\n  //     setTimeRemaining(prev => {\n  //       const newTime = prev - 100;\n\n  //       if (newTime <= 0) {\n  //         console.log(`Question ${currentQuestionIndex + 1} timer expired`);\n  //         clearInterval(timer);\n  //         setQuestionTimer(null);\n  //         handleQuestionTimeout();\n  //         return 0;\n  //       }\n  //       return newTime;\n  //     });\n  //   }, 100);\n\n  //   setQuestionTimer(timer);\n  // };\n\n  //   const startQuestionTimer = () => {\n  //   console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\n  //   console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\n\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n\n  //   setTimeRemaining(speed * 1000);\n\n  //   const timer = setInterval(() => {\n  //     setTimeRemaining(prev => {\n  //       const newTime = prev - 100;\n\n  //       // Play beep when 3 seconds remaining\n  //       if (newTime <= 3000 && newTime > 2900) {\n  //         playBeep();\n  //       }\n\n  //       if (newTime <= 0) {\n  //         console.log(`Question ${currentQuestionIndex + 1} timer expired`);\n  //         clearInterval(timer);\n  //         setQuestionTimer(null);\n  //         playBeep(); // Beep when time expires\n  //         handleQuestionTimeout();\n  //         return 0;\n  //       }\n  //       return newTime;\n  //     });\n  //   }, 100);\n\n  //   setQuestionTimer(timer);\n  // }; 10-09\n\n  const startQuestionTimer = () => {\n    console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\n    console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\n    if (questionTimer) {\n      clearInterval(questionTimer);\n      setQuestionTimer(null);\n    }\n    if (beepInterval) {\n      clearInterval(beepInterval);\n      setBeepInterval(null);\n    }\n    setTimeRemaining(speed * 1000);\n\n    // Start regular beeping every second\n    const beepTimer = setInterval(() => {\n      playBeep('normal');\n    }, 1000);\n    setBeepInterval(beepTimer);\n    const timer = setInterval(() => {\n      setTimeRemaining(prev => {\n        const newTime = prev - 100;\n\n        // Different beep patterns based on remaining time\n        if (newTime <= 3000 && newTime > 2000) {\n          // Last 3 seconds - warning beeps\n          if (newTime % 1000 < 100) {\n            clearInterval(beepTimer); // Stop regular beeping\n            playBeep('warning');\n          }\n        } else if (newTime <= 2000 && newTime > 1000) {\n          // Last 2 seconds - faster urgent beeps\n          if (newTime % 500 < 100) {\n            playBeep('urgent');\n          }\n        } else if (newTime <= 1000 && newTime > 0) {\n          // Last 1 second - very fast urgent beeps\n          if (newTime % 250 < 100) {\n            playBeep('urgent');\n          }\n        }\n        if (newTime <= 0) {\n          console.log(`Question ${currentQuestionIndex + 1} timer expired`);\n          clearInterval(timer);\n          clearInterval(beepTimer);\n          setQuestionTimer(null);\n          setBeepInterval(null);\n          playBeep('final'); // Final timeout beep\n          handleQuestionTimeout();\n          return 0;\n        }\n        return newTime;\n      });\n    }, 100);\n    setQuestionTimer(timer);\n  };\n\n  // 2. FIX the handleQuestionTimeout function:\n  const handleQuestionTimeout = () => {\n    console.log(`Question ${currentQuestionIndex + 1} timed out`);\n    // Do nothing - the global timer handles auto-submit\n  };\n\n  // 4. ADD QUESTION SUBMISSION LOGIC\n  // const submitCurrentQuestion = () => {\n  //   console.log(`Submitting answer for question ${currentQuestionIndex + 1}: \"${currentQuestionAnswer}\"`);\n  //   console.log(`Total questions: ${comparisonPairs.length}, Current question index: ${currentQuestionIndex}`);\n\n  //   // Add current answer to the answers array\n  // const newAnswers = [...questionAnswers, currentQuestionAnswer.trim()];\n  //   setQuestionAnswers(newAnswers);\n\n  //   // Clear the current timer\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n\n  //     // Clear beep interval when submitting\n  //   if (beepInterval) {\n  //     clearInterval(beepInterval);\n  //     setBeepInterval(null);\n  //   }\n\n  //   // Check if there are more questions\n  //   if (currentQuestionIndex < comparisonPairs.length - 1) {\n  //     console.log(`Moving to next question: ${currentQuestionIndex + 2}`);\n\n  //     // Move to next question\n  //     const nextIndex = currentQuestionIndex + 1;\n  //     setCurrentQuestionIndex(nextIndex);\n\n  //     // Clear current answer\n  //     setCurrentQuestionAnswer('');\n\n  //     // Start timer for next question with a delay to ensure state updates\n  //     setTimeout(() => {\n  //       setTimeRemaining(speed * 1000);\n  //       startQuestionTimer();\n  //     }, 200);\n\n  //   } else {\n  //     // All questions completed\n  //     console.log('All questions completed! Final answers:', newAnswers);\n  //     console.log('Moving to results...');\n  //     checkAllAnswers(newAnswers);\n  //   }\n  // };  10-09\n\n  const submitCurrentQuestion = () => {\n    // If already disabled, do nothing\n    if (isInputDisabled && timeRemaining <= 0) {\n      return;\n    }\n    console.log(`=== SUBMITTING QUESTION ${currentQuestionIndex + 1} ===`);\n    if (currentQuestionIndex < 0 || currentQuestionIndex >= comparisonPairs.length) {\n      console.error('Invalid question index:', currentQuestionIndex);\n      return;\n    }\n\n    // Update answers\n    const newAnswers = [...questionAnswers];\n    newAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\n    setQuestionAnswers(newAnswers);\n\n    // Check if more questions\n    if (currentQuestionIndex < comparisonPairs.length - 1) {\n      const nextIndex = currentQuestionIndex + 1;\n      setCurrentQuestionIndex(nextIndex);\n      setCurrentQuestionAnswer(newAnswers[nextIndex] || '');\n    } else {\n      // Last question - end game\n      if (totalGameTimer) {\n        clearInterval(totalGameTimer);\n        setTotalGameTimer(null);\n      }\n      if (beepInterval) {\n        clearInterval(beepInterval);\n        setBeepInterval(null);\n      }\n      try {\n        checkAllAnswersForAutoSubmit(newAnswers);\n      } catch (error) {\n        console.error('Error:', error);\n        setAppState('setup');\n      }\n    }\n  };\n\n  // Allow keyboard typing as well (digits + optional leading minus)\n  // const handleKeyboardInput = (e) => {\n  //   const raw = e.target.value;\n  //   // Keep digits and a single leading '-'\n  //   const sanitized = raw.replace(/[^0-9-]/g, '').replace(/(?!^)-/g, '');\n  //   setCurrentQuestionAnswer(sanitized);\n  // };\n\n  const handleKeyboardInput = e => {\n    if (isInputDisabled) {\n      e.preventDefault();\n      return;\n    }\n    const raw = e.target.value;\n    const sanitized = raw.replace(/[^0-9-]/g, '').replace(/(?!^)-/g, '');\n    setCurrentQuestionAnswer(sanitized);\n  };\n  const navigateToQuestion = questionIndex => {\n    if (availableQuestions.has(questionIndex)) {\n      // Save current answer first\n      const newAnswers = [...questionAnswers];\n      newAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\n      setQuestionAnswers(newAnswers);\n\n      // Navigate to new question\n      setCurrentQuestionIndex(questionIndex);\n      setCurrentQuestionAnswer(newAnswers[questionIndex] || '');\n    }\n  };\n\n  // const checkAllAnswers = (answers) => {\n  //   let correctCount = 0;\n  //   let actualAnswers = [];\n\n  //   const expectedCount = comparisonPairs.length;\n\n  //   switch(gameType) {\n  //     case 'subtraction':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\n  //       correctCount = answers.filter((ans, idx) => \n  //         idx < actualAnswers.length && ans === actualAnswers[idx]\n  //       ).length;\n  //       break;\n\n  //     case 'multiplication':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\n  //       correctCount = answers.filter((ans, idx) => \n  //         idx < actualAnswers.length && ans === actualAnswers[idx]\n  //       ).length;\n  //       break;\n\n  //     case 'division':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => (a / b).toString());\n  //       correctCount = answers.filter((ans, idx) => \n  //         idx < actualAnswers.length && ans === actualAnswers[idx]\n  //       ).length;\n  //       break;\n  //       case 'mixedMath':\n  //   actualAnswers = comparisonPairs.map(([a, b, operation]) => {\n  //     const result = operation === 'addition' ? a + b : a - b;\n  //     return result.toString();\n  //   });\n  //   correctCount = answers.filter((ans, idx) => \n  //     idx < actualAnswers.length && ans === actualAnswers[idx]\n  //   ).length;\n  //   break;\n  //   }\n\n  //   const accuracy = correctCount / expectedCount;\n  //   const isCorrect = accuracy >= 0.8; // 80% threshold\n  //   const score = isCorrect ? 2 : -1; // +2 if 80%+ correct, -1 if below\n\n  //   setResult({ \n  //     correct: isCorrect, \n  //     actualAnswer: `${correctCount}/${expectedCount} correct`, \n  //     score,\n  //     userAnswers: answers,\n  //     correctAnswers: actualAnswers,\n  //     accuracy: (accuracy * 100).toFixed(1) + '%'\n  //   });\n\n  //   updatePerformanceData(isCorrect, score);\n  //   setAppState('result');\n  // };\n\n  // 7. ADD NUMBER PAD COMPONENT\n  // const NumberPad = () => (\n  //   <div className=\"number-pad\">\n  //     <div className=\"number-pad-row\">\n  //       {[7, 8, 9].map(num => (\n  //         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       {[4, 5, 6].map(num => (\n  //         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       {[1, 2, 3].map(num => (\n  //         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       <button onClick={() => handleNumberPadInput('negative')} className=\"number-btn special\">\n  //         ±\n  //       </button>\n  //       <button onClick={() => handleNumberPadInput('0')} className=\"number-btn\">\n  //         0\n  //       </button>\n  //       <button onClick={() => handleNumberPadInput('backspace')} className=\"number-btn special\">\n  //         ⌫\n  //       </button>\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       <button onClick={() => handleNumberPadInput('clear')} className=\"number-btn clear\">\n  //         Clear\n  //       </button>\n  //       <button \n  //         onClick={() => {\n  //           console.log(`Manual submit clicked for question ${currentQuestionIndex + 1}`);\n  //           console.log(`Current answer: \"${currentQuestionAnswer}\"`);\n  //           submitCurrentQuestion();\n  //         }} \n  //         className=\"number-btn submit\"\n  //         // disabled={!currentQuestionAnswer.trim()}\n  //       >\n  //         Submit\n  //       </button>\n  //     </div>\n  //   </div>\n  // );\n\n  // const checkAllAnswers = (answers) => {\n  //   let correctCount = 0;\n  //   let actualAnswers = [];\n\n  //   const expectedCount = comparisonPairs.length;\n\n  //   switch(gameType) {\n  //     case 'subtraction':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\n  //       break;\n\n  //     case 'multiplication':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\n  //       break;\n\n  //     case 'division':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => Math.round(a / b).toString()); // Round for cleaner results\n  //       break;\n\n  //     case 'mixedMath':\n  //       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\n  //         const result = operation === 'addition' ? a + b : a - b;\n  //         return result.toString();\n  //       });\n  //       break;\n  //   }\n\n  //   // Compare user answers with correct answers\n  //   correctCount = answers.filter((userAns, idx) => {\n  //     const trimmedUserAns = (userAns || '').toString().trim();\n  //     const correctAns = actualAnswers[idx] || '';\n  //     return trimmedUserAns === correctAns;\n  //   }).length;\n\n  //   const accuracy = correctCount / expectedCount;\n  //   const isCorrect = accuracy >= 0.8; // 80% threshold\n  //   const score = isCorrect ? 2 : -1;\n\n  //   setResult({ \n  //     correct: isCorrect, \n  //     actualAnswer: `${correctCount}/${expectedCount} correct`, \n  //     score,\n  //     userAnswers: answers,\n  //     correctAnswers: actualAnswers,\n  //     accuracy: (accuracy * 100).toFixed(1) + '%'\n  //   });\n\n  //   updatePerformanceData(isCorrect, score);\n  //   setAppState('result');\n  // };\n\n  // const checkAllAnswers = (answers) => {\n  //   let correctCount = 0;\n  //   let actualAnswers = [];\n\n  //   const expectedCount = comparisonPairs.length;\n\n  //   switch(gameType) {\n  //     case 'subtraction':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = a - b;\n  //         console.log(`Subtraction: ${a} - ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'multiplication':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = a * b;\n  //         console.log(`Multiplication: ${a} × ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'division':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = Math.round(a / b);\n  //         console.log(`Division: ${a} ÷ ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'mixedMath':\n  //       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\n  //         const result = operation === 'addition' ? a + b : a - b;\n  //         console.log(`Mixed: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n  //   }\n\n  //   // Debug logging\n  //   console.log('User answers:', answers);\n  //   console.log('Correct answers:', actualAnswers);\n\n  //   // Compare user answers with correct answers (exact string match)\n  //   correctCount = answers.filter((userAns, idx) => {\n  //     const trimmedUserAns = (userAns || '').toString().trim();\n  //     const correctAns = (actualAnswers[idx] || '').toString().trim();\n  //     const isMatch = trimmedUserAns === correctAns;\n\n  //     console.log(`Question ${idx + 1}: User=\"${trimmedUserAns}\" vs Correct=\"${correctAns}\" = ${isMatch}`);\n\n  //     return isMatch;\n  //   }).length;\n\n  //   const accuracy = correctCount / expectedCount;\n  //   const isCorrect = accuracy >= 0.8;\n  //   const score = isCorrect ? 2 : -1;\n\n  //   console.log(`Final: ${correctCount}/${expectedCount} correct, accuracy: ${accuracy}`);\n\n  //   setResult({ \n  //     correct: isCorrect, \n  //     actualAnswer: `${correctCount}/${expectedCount} correct`, \n  //     score,\n  //     userAnswers: answers,\n  //     correctAnswers: actualAnswers,\n  //     accuracy: (accuracy * 100).toFixed(1) + '%'\n  //   });\n\n  //   updatePerformanceData(isCorrect, score);\n  //   setAppState('result');\n  // };\n  // 18\n\n  // const checkAllAnswers = (answers) => {\n  //   console.log('=== CHECKING ALL ANSWERS ===');\n  //   console.log('Game type:', gameType);\n  //   console.log('User answers:', answers);\n  //   console.log('Comparison pairs:', comparisonPairs);\n\n  //   let correctCount = 0;\n  //   let actualAnswers = [];\n\n  //   const expectedCount = comparisonPairs.length;\n\n  //   // Clear all timers immediately to prevent interference\n  //   if (totalGameTimer) {\n  //     clearInterval(totalGameTimer);\n  //     setTotalGameTimer(null);\n  //   }\n  //   if (beepInterval) {\n  //     clearInterval(beepInterval);\n  //     setBeepInterval(null);\n  //   }\n  //   if (autoSubmitTimer) {\n  //     clearInterval(autoSubmitTimer);\n  //     setAutoSubmitTimer(null);\n  //   }\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n\n  //   // Calculate correct answers based on game type\n  //   switch(gameType) {\n  //     case 'subtraction':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = a - b;\n  //         console.log(`Subtraction: ${a} - ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'multiplication':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = a * b;\n  //         console.log(`Multiplication: ${a} × ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'division':\n  //       actualAnswers = comparisonPairs.map(([a, b]) => {\n  //         const result = Math.round(a / b);\n  //         console.log(`Division: ${a} ÷ ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     case 'mixedMath':\n  //       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\n  //         const result = operation === 'addition' ? a + b : a - b;\n  //         console.log(`Mixed: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\n  //         return result.toString();\n  //       });\n  //       break;\n\n  //     default:\n  //       console.error('Unknown game type for checkAllAnswers:', gameType);\n  //       actualAnswers = comparisonPairs.map(() => '0');\n  //   }\n\n  //   // Compare answers - ensure we have exactly the right number of answers\n  //   const normalizedAnswers = [...answers];\n  //   while (normalizedAnswers.length < expectedCount) {\n  //     normalizedAnswers.push('');\n  //   }\n\n  //   // Count correct answers\n  //   correctCount = normalizedAnswers.filter((userAns, idx) => {\n  //     const trimmedUserAns = (userAns || '').toString().trim();\n  //     const correctAns = (actualAnswers[idx] || '').toString().trim();\n  //     const isMatch = trimmedUserAns === correctAns;\n\n  //     console.log(`Question ${idx + 1}: User=\"${trimmedUserAns}\" vs Correct=\"${correctAns}\" = ${isMatch}`);\n\n  //     return isMatch;\n  //   }).length;\n\n  //   const accuracy = correctCount / expectedCount;\n  //   const isCorrect = accuracy >= 0.8;\n  //   const score = isCorrect ? 2 : -1;\n\n  //   console.log(`Final: ${correctCount}/${expectedCount} correct, accuracy: ${accuracy.toFixed(2)}`);\n\n  //   // Create stable result object\n  //   const resultData = {\n  //     correct: isCorrect,\n  //     actualAnswer: `${correctCount}/${expectedCount} correct`,\n  //     score: score,\n  //     userAnswers: normalizedAnswers,\n  //     correctAnswers: actualAnswers,\n  //     accuracy: (accuracy * 100).toFixed(1) + '%',\n  //     gameType: gameType,\n  //     totalQuestions: expectedCount,\n  //     correctCount: correctCount\n  //   };\n\n  //   console.log('Setting result data:', resultData);\n\n  //   // Set result and immediately change to result state\n  //   setResult(resultData);\n  //   updatePerformanceData(isCorrect, score);\n\n  //   // Force state change after a brief delay to ensure result is set\n  //   setTimeout(() => {\n  //     console.log('Changing to result state');\n  //     setAppState('result');\n  //   }, 100);\n  // };\n\n  const checkAllAnswers = answers => {\n    console.log('=== CHECKING ALL ANSWERS - FIXED VERSION ===');\n    console.log('Game type:', gameType);\n    console.log('User answers (raw):', answers);\n    console.log('Comparison pairs:', comparisonPairs);\n    let correctCount = 0;\n    let actualAnswers = [];\n    const expectedCount = comparisonPairs.length;\n\n    // Ensure we have valid comparison pairs\n    if (!comparisonPairs || comparisonPairs.length === 0) {\n      console.error('No comparison pairs available');\n      setAppState('setup');\n      return;\n    }\n\n    // Clear all timers immediately\n    const timersToGlear = [totalGameTimer, beepInterval, autoSubmitTimer, questionTimer, gameIntervalTimer];\n    timersToGlear.forEach(timer => {\n      if (timer) {\n        clearInterval(timer);\n        clearTimeout(timer);\n      }\n    });\n\n    // Reset timer states\n    setTotalGameTimer(null);\n    setBeepInterval(null);\n    setAutoSubmitTimer(null);\n    setQuestionTimer(null);\n    setGameIntervalTimer(null);\n\n    // Calculate correct answers based on game type\n    try {\n      switch (gameType) {\n        case 'subtraction':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = a - b;\n            console.log(`Question ${index + 1}: ${a} - ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'multiplication':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = a * b;\n            console.log(`Question ${index + 1}: ${a} × ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'division':\n          actualAnswers = comparisonPairs.map(([a, b], index) => {\n            const result = Math.round(a / b);\n            console.log(`Question ${index + 1}: ${a} ÷ ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        case 'mixedMath':\n          actualAnswers = comparisonPairs.map(([a, b, operation], index) => {\n            const result = operation === 'addition' ? a + b : a - b;\n            console.log(`Question ${index + 1}: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\n            return result.toString();\n          });\n          break;\n        default:\n          console.error('Unknown game type for checkAllAnswers:', gameType);\n          setAppState('setup');\n          return;\n      }\n    } catch (error) {\n      console.error('Error calculating correct answers:', error);\n      setAppState('setup');\n      return;\n    }\n\n    // Normalize user answers array\n    const normalizedAnswers = [...answers];\n    while (normalizedAnswers.length < expectedCount) {\n      normalizedAnswers.push('');\n    }\n    console.log('Correct answers calculated:', actualAnswers);\n    console.log('Normalized user answers:', normalizedAnswers);\n\n    // Compare answers with enhanced logging\n    correctCount = normalizedAnswers.filter((userAns, idx) => {\n      // Clean both answers - remove all whitespace and normalize\n      const cleanUserAns = String(userAns || '').replace(/\\s+/g, '').toLowerCase();\n      const cleanCorrectAns = String(actualAnswers[idx] || '').replace(/\\s+/g, '').toLowerCase();\n\n      // For numeric answers, try parsing as numbers\n      let isMatch = false;\n      if (cleanUserAns === '' || cleanCorrectAns === '') {\n        isMatch = false;\n      } else {\n        // Try exact string match first\n        isMatch = cleanUserAns === cleanCorrectAns;\n\n        // If not exact match, try numeric comparison\n        if (!isMatch) {\n          const userNum = parseFloat(cleanUserAns);\n          const correctNum = parseFloat(cleanCorrectAns);\n          if (!isNaN(userNum) && !isNaN(correctNum)) {\n            isMatch = Math.abs(userNum - correctNum) < 0.001; // Allow tiny floating point differences\n          }\n        }\n      }\n      console.log(`Question ${idx + 1}: \"${cleanUserAns}\" vs \"${cleanCorrectAns}\" = ${isMatch ? 'CORRECT' : 'WRONG'}`);\n      return isMatch;\n    }).length;\n    const accuracy = expectedCount > 0 ? correctCount / expectedCount : 0;\n    const isCorrect = accuracy >= 0.8; // 80% threshold\n    const score = isCorrect ? 2 : -1;\n    console.log(`Final Result: ${correctCount}/${expectedCount} correct, accuracy: ${(accuracy * 100).toFixed(1)}%`);\n\n    // Create stable result object with all necessary data\n    const resultData = {\n      correct: isCorrect,\n      actualAnswer: `${correctCount}/${expectedCount} correct`,\n      score: score,\n      userAnswers: normalizedAnswers,\n      correctAnswers: actualAnswers,\n      accuracy: (accuracy * 100).toFixed(1) + '%',\n      gameType: gameType,\n      totalQuestions: expectedCount,\n      correctCount: correctCount,\n      timestamp: Date.now() // Add timestamp to prevent stale results\n    };\n    console.log('Setting final result data:', resultData);\n\n    // Update performance data\n    updatePerformanceData(isCorrect, score);\n    updatePerformanceData(isCorrect, score, null, {\n      totalQuestions: expectedCount,\n      correctAnswers: correctCount,\n      accuracy: (accuracy * 100).toFixed(1) + '%'\n    });\n\n    // Set result with error handling\n    try {\n      setResult(resultData);\n\n      // Use a longer timeout to ensure state is set properly\n      setTimeout(() => {\n        console.log('Transitioning to result state');\n        setAppState('result');\n      }, 300);\n    } catch (error) {\n      console.error('Error setting result:', error);\n      alert('Error displaying results. Please try again.');\n      setAppState('setup');\n    }\n  };\n  const handleNumberPadInput = (value, event) => {\n    // Prevent event bubbling and default behavior\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    console.log(`Number pad input: ${value}, current answer: \"${currentQuestionAnswer}\"`);\n    if (value === 'clear') {\n      setCurrentQuestionAnswer('');\n    } else if (value === 'backspace') {\n      setCurrentQuestionAnswer(prev => prev.slice(0, -1));\n    } else if (value === 'negative') {\n      setCurrentQuestionAnswer(prev => prev.startsWith('-') ? prev.slice(1) : '-' + prev);\n    } else {\n      // Add the number to current answer\n      setCurrentQuestionAnswer(prev => prev + value);\n    }\n  };\n  // const NumberPad = () => (\n  //   <div className=\"number-pad\" style={{ position: 'relative', zIndex: 1000 }}>\n  //     <div className=\"number-pad-row\">\n  //       {[7, 8, 9].map(num => (\n  //         <button \n  //           key={num} \n  //           onMouseDown={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //             handleNumberPadInput(num.toString(), e);\n  //           }}\n  //           onClick={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //           }}\n  //           className=\"number-btn\"\n  //           style={{ pointerEvents: 'auto' }}\n  //         >\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       {[4, 5, 6].map(num => (\n  //         <button \n  //           key={num} \n  //           onMouseDown={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //             handleNumberPadInput(num.toString(), e);\n  //           }}\n  //           onClick={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //           }}\n  //           className=\"number-btn\"\n  //           style={{ pointerEvents: 'auto' }}\n  //         >\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       {[1, 2, 3].map(num => (\n  //         <button \n  //           key={num} \n  //           onMouseDown={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //             handleNumberPadInput(num.toString(), e);\n  //           }}\n  //           onClick={(e) => {\n  //             e.preventDefault();\n  //             e.stopPropagation();\n  //           }}\n  //           className=\"number-btn\"\n  //           style={{ pointerEvents: 'auto' }}\n  //         >\n  //           {num}\n  //         </button>\n  //       ))}\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       <button \n  //         onMouseDown={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //           handleNumberPadInput('negative', e);\n  //         }}\n  //         onClick={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //         }}\n  //         className=\"number-btn special\"\n  //         style={{ pointerEvents: 'auto' }}\n  //       >\n  //         ±\n  //       </button>\n  //       <button \n  //         onMouseDown={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //           handleNumberPadInput('0', e);\n  //         }}\n  //         onClick={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //         }}\n  //         className=\"number-btn\"\n  //         style={{ pointerEvents: 'auto' }}\n  //       >\n  //         0\n  //       </button>\n  //       <button \n  //         onMouseDown={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //           handleNumberPadInput('backspace', e);\n  //         }}\n  //         onClick={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //         }}\n  //         className=\"number-btn special\"\n  //         style={{ pointerEvents: 'auto' }}\n  //       >\n  //         ⌫\n  //       </button>\n  //     </div>\n  //     <div className=\"number-pad-row\">\n  //       <button \n  //         onMouseDown={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //           handleNumberPadInput('clear', e);\n  //         }}\n  //         onClick={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //         }}\n  //         className=\"number-btn clear\"\n  //         style={{ pointerEvents: 'auto' }}\n  //       >\n  //         Clear\n  //       </button>\n  //       <button \n  //         onMouseDown={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //           console.log(`Manual submit clicked for question ${currentQuestionIndex + 1}`);\n  //           console.log(`Current answer: \"${currentQuestionAnswer}\"`);\n  //           submitCurrentQuestion();\n  //         }}\n  //         onClick={(e) => {\n  //           e.preventDefault();\n  //           e.stopPropagation();\n  //         }}\n  //         className=\"number-btn submit\"\n  //         style={{ pointerEvents: 'auto' }}\n  //       >\n  //         Submit\n  //       </button>\n  //     </div>\n  //   </div>\n  // );\n\n  // UPDATED NumberPad with better feedback:\n  const NumberPad = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"number-pad\",\n    style: {\n      position: 'relative',\n      zIndex: 1000\n    },\n    children: [isInputDisabled && timeRemaining <= 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        backgroundColor: '#ff6b6b',\n        color: 'white',\n        borderRadius: '8px',\n        marginBottom: '12px',\n        textAlign: 'center',\n        fontWeight: 'bold',\n        fontSize: '16px',\n        animation: 'pulse 1.5s infinite'\n      },\n      children: \"\\u23F0 Time Expired - Processing Results...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3527,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"number-pad-row\",\n      children: [7, 8, 9].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput(num.toString(), e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: num\n      }, num, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3544,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3542,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"number-pad-row\",\n      children: [4, 5, 6].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput(num.toString(), e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: num\n      }, num, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3570,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3568,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"number-pad-row\",\n      children: [1, 2, 3].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput(num.toString(), e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: num\n      }, num, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3596,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3594,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"number-pad-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput('negative', e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn special ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: \"\\xB1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3621,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput('0', e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3642,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput('backspace', e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn special ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: \"\\u232B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3663,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3620,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"number-pad-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          if (isInputDisabled) return;\n          e.preventDefault();\n          e.stopPropagation();\n          handleNumberPadInput('clear', e);\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: `number-btn clear ${isInputDisabled ? 'disabled' : ''}`,\n        style: {\n          pointerEvents: 'auto',\n          opacity: isInputDisabled ? 0.5 : 1,\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\n        },\n        disabled: isInputDisabled,\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3686,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onMouseDown: e => {\n          e.preventDefault();\n          e.stopPropagation();\n          if (!isInputDisabled || timeRemaining > 0) {\n            console.log(`Submit clicked for question ${currentQuestionIndex + 1}`);\n            submitCurrentQuestion();\n          }\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n        className: \"number-btn submit\",\n        style: {\n          pointerEvents: 'auto',\n          backgroundColor: isInputDisabled && timeRemaining <= 0 ? '#28a745' : '#6c5ce7',\n          opacity: 1,\n          cursor: isInputDisabled && timeRemaining <= 0 ? 'wait' : 'pointer'\n        },\n        disabled: isInputDisabled && timeRemaining <= 0,\n        children: isInputDisabled && timeRemaining <= 0 ? 'Processing...' : 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3707,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3685,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3524,\n    columnNumber: 3\n  }, this);\n  const handleNumberPadInputFixed = (value, event) => {\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    console.log(`Number pad clicked: ${value}`);\n\n    // Use functional state updates to avoid race conditions\n    if (value === 'clear') {\n      setCurrentQuestionAnswer('');\n      console.log('Cleared answer');\n    } else if (value === 'backspace') {\n      setCurrentQuestionAnswer(prev => {\n        const newValue = prev.slice(0, -1);\n        console.log(`Backspace: \"${prev}\" -> \"${newValue}\"`);\n        return newValue;\n      });\n    } else if (value === 'negative') {\n      setCurrentQuestionAnswer(prev => {\n        const newValue = prev.startsWith('-') ? prev.slice(1) : '-' + prev;\n        console.log(`Toggle negative: \"${prev}\" -> \"${newValue}\"`);\n        return newValue;\n      });\n    } else {\n      setCurrentQuestionAnswer(prev => {\n        const newValue = prev + value;\n        console.log(`Add digit: \"${prev}\" -> \"${newValue}\"`);\n        return newValue;\n      });\n    }\n  };\n  const showNumbersSequentially = nums => {\n    let index = 0;\n    const interval = setInterval(() => {\n      if (index < (gameType === 'comparison' ? comparisonPairs.length : nums.length)) {\n        setCurrentIndex(index);\n        index++;\n      } else {\n        clearInterval(interval);\n        setShowingNumbers(false);\n        setCurrentIndex(-1);\n      }\n    }, speed * 1000);\n  };\n\n  // Function to show pairs sequentially for math operations\n  const showPairsSequentially = pairs => {\n    let index = 0;\n    const interval = setInterval(() => {\n      if (index < pairs.length) {\n        setCurrentIndex(index);\n        index++;\n      } else {\n        clearInterval(interval);\n        setShowingNumbers(false);\n        setCurrentIndex(-1);\n      }\n    }, speed * 1000);\n  };\n  const checkAnswer = () => {\n    var _userCounts$, _userCounts$2;\n    let correct = false;\n    let actualAnswer = '';\n    let score = 0;\n    let maxScore = 1;\n    switch (gameType) {\n      case 'subtraction':\n        // For subtraction, we expect comma-separated answers\n        const subtractionAnswers = userAnswer.replace(/\\s+/g, '').split(',');\n        const correctSubtractionAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\n        actualAnswer = correctSubtractionAnswers.join(',');\n\n        // Check if all answers are correct\n        correct = subtractionAnswers.length === correctSubtractionAnswers.length && subtractionAnswers.every((ans, idx) => ans === correctSubtractionAnswers[idx]);\n\n        // Calculate score based on correct answers\n        // const correctSubtractionCount = subtractionAnswers.filter((ans, idx) => \n        //   idx < correctSubtractionAnswers.length && ans === correctSubtractionAnswers[idx]\n        // ).length;\n\n        // maxScore = comparisonPairs.length;\n        // score = Math.max(correctSubtractionCount - (comparisonPairs.length - correctSubtractionCount) * 0.25, 0);\n        score = correct ? 2 : -1;\n        break;\n      case 'multiplication':\n        // For multiplication, we expect comma-separated answers\n        const multiplicationAnswers = userAnswer.replace(/\\s+/g, '').split(',');\n        const correctMultiplicationAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\n        actualAnswer = correctMultiplicationAnswers.join(',');\n\n        // Check if all answers are correct\n        correct = multiplicationAnswers.length === correctMultiplicationAnswers.length && multiplicationAnswers.every((ans, idx) => ans === correctMultiplicationAnswers[idx]);\n\n        // // Calculate score based on correct answers\n        // const correctMultiplicationCount = multiplicationAnswers.filter((ans, idx) => \n        //   idx < correctMultiplicationAnswers.length && ans === correctMultiplicationAnswers[idx]\n        // ).length;\n\n        // maxScore = comparisonPairs.length;\n        // score = Math.max(correctMultiplicationCount - (comparisonPairs.length - correctMultiplicationCount) * 0.25, 0);\n        score = correct ? 2 : -1;\n        break;\n      case 'division':\n        // For division, we expect comma-separated answers\n        const divisionAnswers = userAnswer.replace(/\\s+/g, '').split(',');\n        const correctDivisionAnswers = comparisonPairs.map(([a, b]) => (a / b).toString());\n        actualAnswer = correctDivisionAnswers.join(',');\n\n        // Check if all answers are correct\n        correct = divisionAnswers.length === correctDivisionAnswers.length && divisionAnswers.every((ans, idx) => ans === correctDivisionAnswers[idx]);\n\n        // // Calculate score based on correct answers\n        // const correctDivisionCount = divisionAnswers.filter((ans, idx) => \n        //   idx < correctDivisionAnswers.length && ans === correctDivisionAnswers[idx]\n        // ).length;\n\n        // maxScore = comparisonPairs.length;\n        // score = Math.max(correctDivisionCount - (comparisonPairs.length - correctDivisionCount) * 0.25, 0);\n        score = correct ? 2 : -1;\n        break;\n\n      // Add new total operation cases\n      case 'totalAddition':\n        const totalSum = numbers.reduce((sum, num) => sum + num, 0);\n        actualAnswer = totalSum.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n\n      // case 'totalSubtraction':\n      //   // Start with the first number, then subtract all others\n      //   const totalDifference = numbers.reduce((diff, num, idx) => \n      //     idx === 0 ? num : diff - num, 0);\n      //   actualAnswer = totalDifference.toString();\n      //   correct = userAnswer === actualAnswer;\n      //    score = correct ? 2 : -1;\n      //   break;\n\n      // 2. Fix the checkAnswer function for totalSubtraction (around line 695)\n      case 'totalSubtraction':\n        // Calculate total by starting with first number and subtracting the rest\n        const totalDifference = numbers.reduce((result, num, idx) => {\n          if (idx === 0) return num;\n          return result - num;\n        }, 0);\n        actualAnswer = totalDifference.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'totalMultiplication':\n        const totalProduct = numbers.reduce((product, num) => product * num, 1);\n        actualAnswer = totalProduct.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'totalDivision':\n        // Start with the first number, then divide by all others\n        const totalQuotient = numbers.reduce((quotient, num, idx) => idx === 0 ? num : quotient / num, 0);\n        actualAnswer = totalQuotient.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'memory':\n        actualAnswer = numbers.join('');\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'addition':\n        actualAnswer = numbers.reduce((sum, num) => sum + num, 0).toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'counting':\n        actualAnswer = numbers.filter(n => n === targetNumber).length.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'pattern':\n        const patternStep = numbers[1] - numbers[0];\n        actualAnswer = (numbers[numbers.length - 1] + patternStep).toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'reverse':\n        actualAnswer = [...numbers].reverse().join('');\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'missing':\n        const missingNumbers = missingIndices.map(idx => idx + 1).sort((a, b) => a - b).join(',');\n        actualAnswer = missingNumbers;\n        correct = userAnswer.replace(/\\s+/g, '') === missingNumbers;\n        score = correct ? 2 : -1;\n        break;\n      case 'oddeven':\n        const oddCount = numbers.filter(n => n % 2 !== 0).length;\n        const evenCount = numbers.filter(n => n % 2 === 0).length;\n        actualAnswer = `Odd: ${oddCount}, Even: ${evenCount}`;\n        const userCounts = userAnswer.toLowerCase().split(',');\n        const userOdd = parseInt(((_userCounts$ = userCounts[0]) === null || _userCounts$ === void 0 ? void 0 : _userCounts$.replace(/\\D/g, '')) || 0);\n        const userEven = parseInt(((_userCounts$2 = userCounts[1]) === null || _userCounts$2 === void 0 ? void 0 : _userCounts$2.replace(/\\D/g, '')) || 0);\n        correct = userOdd === oddCount && userEven === evenCount;\n        score = correct ? 2 : -1;\n        break;\n      case 'multiples':\n        actualAnswer = (targetNumber * (numbers.length + 1)).toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'comparison':\n        const comparisons = userAnswer.replace(/\\s+/g, '').split(',');\n        const correctComparisons = comparisonPairs.map(([a, b]) => a > b ? '>' : a < b ? '<' : '=');\n        actualAnswer = correctComparisons.join(',');\n        correct = comparisons.join('') === correctComparisons.join('');\n        const correctCount = comparisons.filter((c, i) => c === correctComparisons[i]).length;\n        maxScore = comparisonPairs.length;\n        score = Math.max(correctCount - (comparisonPairs.length - correctCount) * 0.25, 0);\n        break;\n      case 'speed':\n        const endNumber = numbers[numbers.length - 1];\n        actualAnswer = endNumber.toString();\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n        break;\n      case 'symbol':\n        const associations = userAnswer.replace(/\\s+/g, '').split(',');\n        const correctAssociations = numbers.map((n, i) => `${symbols[i]}=${n}`).join(',');\n        actualAnswer = correctAssociations;\n        correct = associations.join('') === numbers.map((n, i) => `${symbols[i]}${n}`).join('');\n        score = correct ? 2 : -1;\n        break;\n      default:\n        actualAnswer = numbers.join('');\n        correct = userAnswer === actualAnswer;\n        score = correct ? 2 : -1;\n    }\n    setResult({\n      correct,\n      actualAnswer,\n      score,\n      maxScore\n    });\n    updatePerformanceData(correct, score, maxScore);\n    setAppState('result');\n  };\n\n  // const updatePerformanceData = (correct, score, maxScore) => {\n  //   const today = getCurrentDateString();\n\n  //   setPerformanceData(prevData => {\n  //     const newData = JSON.parse(JSON.stringify(prevData));\n\n  //     newData.totalGames = (newData.totalGames || 0) + 1;\n  //     newData.totalCorrect = (newData.totalCorrect || 0) + (correct ? 1 : 0);\n  //     newData.totalScore = (newData.totalScore || 0) + score;\n\n  //     if (!newData.gameTypes[gameType]) {\n  //       newData.gameTypes[gameType] = {\n  //         plays: 0,\n  //         correct: 0,\n  //         score: 0\n  //       };\n  //     }\n  //     newData.gameTypes[gameType].plays += 1;\n  //     newData.gameTypes[gameType].correct += correct ? 1 : 0;\n  //     newData.gameTypes[gameType].score += score;\n\n  //     if (!newData.dailyStats[today]) {\n  //       newData.dailyStats[today] = {\n  //         plays: 0,\n  //         correct: 0,\n  //         score: 0,\n  //         gameTypes: {}\n  //       };\n  //     }\n  //     newData.dailyStats[today].plays += 1;\n  //     newData.dailyStats[today].correct += correct ? 1 : 0;\n  //     newData.dailyStats[today].score += score;\n\n  //     if (!newData.dailyStats[today].gameTypes[gameType]) {\n  //       newData.dailyStats[today].gameTypes[gameType] = {\n  //         plays: 0,\n  //         correct: 0,\n  //         score: 0\n  //       };\n  //     }\n  //     newData.dailyStats[today].gameTypes[gameType].plays += 1;\n  //     newData.dailyStats[today].gameTypes[gameType].correct += correct ? 1 : 0;\n  //     newData.dailyStats[today].gameTypes[gameType].score += score;\n\n  //     newData.history = newData.history || [];\n  //     newData.history.unshift({\n  //       date: today,\n  //       timestamp: new Date().toISOString(),\n  //       gameType,\n  //       // difficulty,\n  //       speed,\n  //       count,\n  //       correct,\n  //       score,\n  //       maxScore,\n  //       userId\n  //     });\n\n  //     if (newData.history.length > 100) {\n  //       newData.history = newData.history.slice(0, 100);\n  //     }\n\n  //     return newData;\n  //   });\n  // };\n\n  // const resetGame = () => {\n  //   setAppState('setup');\n  //   setUserAnswer('');\n  //   setNumbers([]);\n  //   setCurrentIndex(0);\n  //   setShowingNumbers(false);\n  //   setTargetNumber(null);\n  //   setMissingIndices([]);\n  //   setSymbols([]);\n  //   setComparisonPairs([]);\n  //   setResult({ correct: false, actualAnswer: '', score: 0 });\n\n  //   // Clear new question-based game states\n  //   setCurrentQuestionIndex(0);\n  //   setQuestionAnswers([]);\n  //   setCurrentQuestionAnswer('');\n  //   setTimeRemaining(0);\n\n  //   // Clear addition game states\n  //   setAdditionNumbers([]);\n  //   setAdditionTimeRemaining(0);\n  //   setShowAdditionAnswer(false);\n\n  //   // Clear any running timers\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n  //   // if (additionTimer) {\n  //   //   clearInterval(additionTimer);\n  //   //   setAdditionTimer(null);\n  //   // } \n\n  // // Reset digit inputs to default\n  // setFirstDigit(1);\n  // setSecondDigit(1);\n\n  //  if (beepInterval) {\n  //     clearInterval(beepInterval);\n  //     setBeepInterval(null);\n  //   }\n  // };\n\n  // 6. UPDATE resetGame to clear global timer\n  // const resetGame = () => {\n  //   setAppState('setup');\n  //   setUserAnswer('');\n  //   setNumbers([]);\n  //   setCurrentIndex(0);\n  //   setShowingNumbers(false);\n  //   setTargetNumber(null);\n  //   setMissingIndices([]);\n  //   setSymbols([]);\n  //   setComparisonPairs([]);\n  //   setResult({ correct: false, actualAnswer: '', score: 0 });\n\n  //   // Clear question-based game states\n  //   setCurrentQuestionIndex(0);\n  //   setQuestionAnswers([]);\n  //   setCurrentQuestionAnswer('');\n  //   setTimeRemaining(0);\n\n  //   // Clear addition game states\n  //   setAdditionNumbers([]);\n  //   setAdditionTimeRemaining(0);\n  //   setShowAdditionAnswer(false);\n\n  //   // Clear ALL timers - including global timer\n  //   if (questionTimer) {\n  //     clearInterval(questionTimer);\n  //     setQuestionTimer(null);\n  //   }\n  //   if (additionTimer) {\n  //     clearInterval(additionTimer);\n  //     setAdditionTimer(null);\n  //   }\n  //   if (totalGameTimer) {\n  //     clearInterval(totalGameTimer);\n  //     setTotalGameTimer(null);\n  //   }\n  //   if (beepInterval) {\n  //     clearInterval(beepInterval);\n  //     setBeepInterval(null);\n  //   }\n\n  //   // Reset global game timer states\n  //   setTotalGameTime(0);\n  //   setGameStartTime(null);\n\n  //   setFirstDigit(1);\n  //   setSecondDigit(1);\n  // };\n  // 18\n\n  // const resetGame = () => {\n  //   console.log('=== RESETTING GAME ===');\n\n  //   // Clear ALL timers first\n  //   const timersToGlear = [\n  //     questionTimer, additionTimer, totalGameTimer, \n  //     beepInterval, autoSubmitTimer, gameIntervalTimer\n  //   ];\n\n  //   timersToGlear.forEach(timer => {\n  //     if (timer) {\n  //       clearInterval(timer);\n  //       clearTimeout(timer);\n  //     }\n  //   });\n\n  //   // Reset all timer states\n  //   setQuestionTimer(null);\n  //   setAdditionTimer(null);\n  //   setTotalGameTimer(null);\n  //   setBeepInterval(null);\n  //   setAutoSubmitTimer(null);\n  //   setGameIntervalTimer(null);\n\n  //   // Reset all game states\n  //   setAppState('setup');\n  //   setUserAnswer('');\n  //   setNumbers([]);\n  //   setCurrentIndex(0);\n  //   setShowingNumbers(false);\n  //   setTargetNumber(null);\n  //   setMissingIndices([]);\n  //   setSymbols([]);\n  //   setComparisonPairs([]);\n\n  //   // Clear question-based game states\n  //   setCurrentQuestionIndex(0);\n  //   setQuestionAnswers([]);\n  //   setCurrentQuestionAnswer('');\n  //   setTimeRemaining(0);\n  //   setGameElapsedTime(0);\n  //   setAvailableQuestions(new Set([0]));\n\n  //   // Clear addition/subtraction game states\n  //   setAdditionNumbers([]);\n  //   setAdditionCurrentIndex(0);\n  //   setAdditionShowingNumbers(true);\n  //   setAdditionTimeRemaining(0);\n  //   setShowAdditionAnswer(false);\n  //   setAdditionCurrentTimer(0);\n\n  //   setSubtractionNumbers([]);\n  //   setSubtractionCurrentIndex(0);\n  //   setSubtractionShowingNumbers(true);\n  //   setShowSubtractionAnswer(false);\n  //   setSubtractionTimeRemaining(0);\n  //   setSubtractionTimer(null);\n  //   setSubtractionCurrentTimer(0);\n\n  //   setMixedMathTimer(0);\n\n  //   // Reset global game timer states\n  //   setTotalGameTime(0);\n  //   setGameStartTime(null);\n\n  //   // Reset difficulty settings to default\n  //   setFirstDigit(1);\n  //   setSecondDigit(1);\n\n  //   // Clear result - this is crucial\n  //   setResult({ correct: false, actualAnswer: '', score: 0 });\n\n  //   console.log('Game reset completed');\n  // };\n\n  // const resetGame = () => {\n  //   console.log('=== RESETTING GAME - ENHANCED VERSION ===');\n\n  //   // Clear ALL timers with enhanced cleanup\n  //   const allTimers = [\n  //     questionTimer, additionTimer, totalGameTimer, \n  //     beepInterval, autoSubmitTimer, gameIntervalTimer,\n  //     subtractionTimer\n  //   ];\n\n  //   allTimers.forEach(timer => {\n  //     if (timer) {\n  //       try {\n  //         clearInterval(timer);\n  //         clearTimeout(timer);\n  //       } catch (e) {\n  //         console.log('Timer cleanup error (non-critical):', e.message);\n  //       }\n  //     }\n  //   });\n\n  //   // Reset all timer states\n  //   setQuestionTimer(null);\n  //   setAdditionTimer(null);\n  //   setTotalGameTimer(null);\n  //   setBeepInterval(null);\n  //   setAutoSubmitTimer(null);\n  //   setGameIntervalTimer(null);\n  //   setSubtractionTimer(null);\n\n  //   // Reset all game states\n  //   setAppState('setup');\n  //   setUserAnswer('');\n  //   setNumbers([]);\n  //   setCurrentIndex(0);\n  //   setShowingNumbers(false);\n  //   setTargetNumber(null);\n  //   setMissingIndices([]);\n  //   setSymbols([]);\n  //   setComparisonPairs([]);\n\n  //   // Clear question-based game states\n  //   setCurrentQuestionIndex(0);\n  //   setQuestionAnswers([]);\n  //   setCurrentQuestionAnswer('');\n  //   setTimeRemaining(0);\n  //   setGameElapsedTime(0);\n  //   setAvailableQuestions(new Set([0]));\n\n  //   // Clear all math game states\n  //   setAdditionNumbers([]);\n  //   setAdditionCurrentIndex(0);\n  //   setAdditionShowingNumbers(true);\n  //   setAdditionTimeRemaining(0);\n  //   setShowAdditionAnswer(false);\n  //   setAdditionCurrentTimer(0);\n\n  //   setSubtractionNumbers([]);\n  //   setSubtractionCurrentIndex(0);\n  //   setSubtractionShowingNumbers(true);\n  //   setShowSubtractionAnswer(false);\n  //   setSubtractionTimeRemaining(0);\n  //   setSubtractionCurrentTimer(0);\n\n  //   setMixedMathTimer(0);\n\n  //   // Reset global timer states\n  //   setTotalGameTime(0);\n  //   setGameStartTime(null);\n\n  //   // Reset difficulty settings\n  //   setFirstDigit(1);\n  //   setSecondDigit(1);\n\n  //   // CRITICAL: Clear result with null check\n  //   setResult(null);\n\n  //   console.log('Game reset completed successfully');\n  // };\n\n  const updatePerformanceData = (correct, score, maxScore, additionalData = {}) => {\n    const today = getCurrentDateString();\n    setPerformanceData(prevData => {\n      const newData = JSON.parse(JSON.stringify(prevData));\n      newData.totalGames = (newData.totalGames || 0) + 1;\n      newData.totalCorrect = (newData.totalCorrect || 0) + (correct ? 1 : 0);\n      newData.totalScore = (newData.totalScore || 0) + score;\n      if (!newData.gameTypes[gameType]) {\n        newData.gameTypes[gameType] = {\n          plays: 0,\n          correct: 0,\n          score: 0,\n          totalQuestions: 0,\n          correctAnswers: 0\n        };\n      }\n      newData.gameTypes[gameType].plays += 1;\n      newData.gameTypes[gameType].correct += correct ? 1 : 0;\n      newData.gameTypes[gameType].score += score;\n      // Add detailed question tracking\n      newData.gameTypes[gameType].totalQuestions += additionalData.totalQuestions || count || 1;\n      newData.gameTypes[gameType].correctAnswers += additionalData.correctAnswers || (correct ? 1 : 0);\n      if (!newData.dailyStats[today]) {\n        newData.dailyStats[today] = {\n          plays: 0,\n          correct: 0,\n          score: 0,\n          totalQuestions: 0,\n          correctAnswers: 0,\n          gameTypes: {}\n        };\n      }\n      newData.dailyStats[today].plays += 1;\n      newData.dailyStats[today].correct += correct ? 1 : 0;\n      newData.dailyStats[today].score += score;\n      newData.dailyStats[today].totalQuestions += additionalData.totalQuestions || count || 1;\n      newData.dailyStats[today].correctAnswers += additionalData.correctAnswers || (correct ? 1 : 0);\n      if (!newData.dailyStats[today].gameTypes[gameType]) {\n        newData.dailyStats[today].gameTypes[gameType] = {\n          plays: 0,\n          correct: 0,\n          score: 0,\n          totalQuestions: 0,\n          correctAnswers: 0\n        };\n      }\n      newData.dailyStats[today].gameTypes[gameType].plays += 1;\n      newData.dailyStats[today].gameTypes[gameType].correct += correct ? 1 : 0;\n      newData.dailyStats[today].gameTypes[gameType].score += score;\n      newData.dailyStats[today].gameTypes[gameType].totalQuestions += additionalData.totalQuestions || count || 1;\n      newData.dailyStats[today].gameTypes[gameType].correctAnswers += additionalData.correctAnswers || (correct ? 1 : 0);\n      newData.history = newData.history || [];\n      newData.history.unshift({\n        date: today,\n        timestamp: new Date().toISOString(),\n        gameType,\n        difficulty: `${firstDigit || 1}-${secondDigit || 1} digits`,\n        speed,\n        count,\n        correct,\n        score,\n        maxScore,\n        totalQuestions: additionalData.totalQuestions || count || 1,\n        correctAnswers: additionalData.correctAnswers || (correct ? 1 : 0),\n        accuracy: additionalData.accuracy || (correct ? '100%' : '0%'),\n        userId\n      });\n      if (newData.history.length > 100) {\n        newData.history = newData.history.slice(0, 100);\n      }\n      return newData;\n    });\n  };\n  const resetGame = () => {\n    console.log('=== RESETTING GAME - KEEPING USER SETTINGS ===');\n\n    // Clear all timers\n    const allTimers = [questionTimer, additionTimer, totalGameTimer, beepInterval, autoSubmitTimer, gameIntervalTimer, subtractionTimer];\n    allTimers.forEach(timer => {\n      if (timer) {\n        try {\n          clearInterval(timer);\n          clearTimeout(timer);\n        } catch (e) {\n          console.log('Timer cleanup error (non-critical):', e.message);\n        }\n      }\n    });\n\n    // Reset timer states\n    setTotalGameTimer(null);\n    setQuestionTimer(null);\n    setAdditionTimer(null);\n    setBeepInterval(null);\n    setAutoSubmitTimer(null);\n    setGameIntervalTimer(null);\n    setSubtractionTimer(null);\n\n    // Reset game states\n    setAppState('setup');\n    setUserAnswer('');\n    setNumbers([]);\n    setCurrentIndex(0);\n    setShowingNumbers(false);\n    setTargetNumber(null);\n    setMissingIndices([]);\n    setSymbols([]);\n    setComparisonPairs([]);\n\n    // Reset question states\n    setCurrentQuestionIndex(0);\n    setQuestionAnswers([]);\n    setCurrentQuestionAnswer('');\n    setTimeRemaining(0);\n    setGameElapsedTime(0);\n    setAvailableQuestions(new Set([0]));\n\n    // Reset math game states\n    setAdditionNumbers([]);\n    setAdditionCurrentIndex(0);\n    setAdditionShowingNumbers(true);\n    setAdditionTimeRemaining(0);\n    setShowAdditionAnswer(false);\n    setAdditionCurrentTimer(0);\n    setSubtractionNumbers([]);\n    setSubtractionCurrentIndex(0);\n    setSubtractionShowingNumbers(true);\n    setShowSubtractionAnswer(false);\n    setSubtractionTimeRemaining(0);\n    setSubtractionCurrentTimer(0);\n    setMixedMathTimer(0);\n\n    // Reset timer states\n    setTotalGameTime(0);\n    setGameStartTime(null);\n\n    // ✅ DON'T RESET USER'S SETTINGS - Keep speed, count, firstDigit, secondDigit, difficulty as they are\n    // User wants to play again with the same settings!\n\n    // Reset input disabled state\n    setIsInputDisabled(false);\n\n    // Clear result\n    setResult(null);\n    console.log('Game reset completed - user settings preserved');\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n  {\n    isInputDisabled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer-expired-message\",\n      style: {\n        backgroundColor: '#fff3cd',\n        color: '#856404',\n        padding: '10px',\n        borderRadius: '5px',\n        textAlign: 'center',\n        marginBottom: '10px',\n        fontWeight: 'bold'\n      },\n      children: \"\\u23F0 Time Expired! Review your answers and submit when ready.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4486,\n      columnNumber: 3\n    }, this);\n  }\n  /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"total-time-remaining\",\n    children: timeRemaining > 0 ? `Time remaining: ${Math.ceil(timeRemaining / 1000)}s` : 'Time expired - Submit your answers'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 4499,\n    columnNumber: 1\n  }, this);\n  const clearPerformanceData = () => {\n    const emptyData = {\n      totalGames: 0,\n      totalCorrect: 0,\n      totalScore: 0,\n      gameTypes: {},\n      dailyStats: {},\n      history: []\n    };\n    setPerformanceData(emptyData);\n    localStorage.setItem('avecusPerformance', JSON.stringify(emptyData));\n    if (userId) {\n      axios.delete(`${API_URL}/performance/${userId}`, {\n        headers: {\n          Authorization: `${localStorage.getItem('token')}`\n        }\n      }).catch(err => {\n        console.error(\"Error clearing server data:\", err);\n        setError(\"Failed to clear data from server.\");\n      });\n    }\n    setShowConfirmDialog(false);\n  };\n  const getDisplayText = () => {\n    switch (gameType) {\n      case 'subtraction':\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\n          const [a, b] = comparisonPairs[currentIndex];\n          return `${a} - ${b} = ?`;\n        }\n        return '';\n      case 'multiplication':\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\n          const [a, b] = comparisonPairs[currentIndex];\n          return `${a} × ${b} = ?`;\n        }\n        return '';\n      case 'division':\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\n          const [a, b] = comparisonPairs[currentIndex];\n          return `${a} ÷ ${b} = ?`;\n        }\n        return '';\n\n      // Add new total operation cases\n      case 'totalAddition':\n        if (currentIndex === 0) return `${numbers[currentIndex]}`;\n        return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' +' : ' = ?'}`;\n\n      // case 'totalSubtraction':\n      //   if (currentIndex === 0) return `${numbers[currentIndex]}`;\n      //   return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' -' : ' = ?'}`;\n\n      case 'totalSubtraction':\n        if (currentIndex === 0) {\n          return `${numbers[currentIndex]}`; // First number\n        } else {\n          // Show the operation as subtraction\n          return `- ${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? '' : ' = ?'}`;\n        }\n      case 'totalMultiplication':\n        if (currentIndex === 0) return `${numbers[currentIndex]}`;\n        return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' ×' : ' = ?'}`;\n      case 'totalDivision':\n        if (currentIndex === 0) return `${numbers[currentIndex]}`;\n        return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' ÷' : ' = ?'}`;\n      case 'memory':\n        return numbers[currentIndex];\n      case 'addition':\n        return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' +' : ''}`;\n      case 'counting':\n        return `${numbers[currentIndex]} (Target: ${targetNumber})`;\n      case 'pattern':\n        return numbers[currentIndex];\n      case 'reverse':\n        return numbers[currentIndex];\n      case 'missing':\n        return missingIndices.includes(currentIndex) ? '?' : currentIndex + 1;\n      case 'oddeven':\n        return `${numbers[currentIndex]} (${numbers[currentIndex] % 2 === 0 ? 'Even' : 'Odd'})`;\n      case 'multiples':\n        return `${numbers[currentIndex]} (${targetNumber} × ${currentIndex + 1})`;\n      case 'comparison':\n        const [a, b] = comparisonPairs[currentIndex];\n        return `${a} ? ${b}`;\n      case 'speed':\n        return numbers[currentIndex];\n      case 'symbol':\n        return `${symbols[currentIndex]} = ${numbers[currentIndex]}`;\n      default:\n        return numbers[currentIndex];\n    }\n  };\n  const getInstructionText = () => {\n    switch (gameType) {\n      case 'subtraction':\n        return \"Solve each subtraction problem (comma-separated answers)\";\n      case 'multiplication':\n        return \"Solve each multiplication problem (comma-separated answers)\";\n      case 'division':\n        return \"Solve each division problem (comma-separated answers)\";\n      case 'mixedMath':\n        return \"Enter answers separated by commas (e.g., 15,3,8)\";\n\n      // Add new total operation cases\n      case 'totalAddition':\n        return \"Add ALL numbers together\";\n      case 'totalSubtraction':\n        return \"Subtract all numbers from the first number\";\n      case 'totalMultiplication':\n        return \"Multiply ALL numbers together\";\n      case 'totalDivision':\n        return \"Divide the first number by all other numbers\";\n      case 'memory':\n        return \"Remember the sequence of numbers\";\n      case 'addition':\n        return \"Add all the numbers together\";\n      case 'counting':\n        return `Count how many times ${targetNumber} appears`;\n      case 'pattern':\n        return \"Identify the pattern and find the next number\";\n      case 'reverse':\n        return \"Remember the numbers in reverse order\";\n      case 'missing':\n        return \"Identify the missing numbers (comma separated)\";\n      case 'oddeven':\n        return \"Count how many odd and even numbers (format: odd:X, even:Y)\";\n      case 'multiples':\n        return `These are multiples of ${targetNumber}. What comes next?`;\n      case 'comparison':\n        return \"For each pair, enter >, <, or = (comma separated)\";\n      case 'speed':\n        return \"What's the last number in the sequence?\";\n      case 'symbol':\n        return \"Remember which symbol pairs with which number (format: symbol=number, ...)\";\n      default:\n        return \"Remember the numbers\";\n    }\n  };\n  const getPlaceholderText = () => {\n    switch (gameType) {\n      case 'subtraction':\n        return \"Enter answers separated by commas (e.g., 3,7,2)\";\n      case 'multiplication':\n        return \"Enter answers separated by commas (e.g., 12,15,20)\";\n      case 'division':\n        return \"Enter answers separated by commas (e.g., 4,3,5)\";\n\n      // Add new total operation cases\n      case 'totalAddition':\n        return \"Enter the sum of all numbers\";\n      case 'totalSubtraction':\n        return \"Enter the result of subtracting all numbers from the first\";\n      case 'totalMultiplication':\n        return \"Enter the product of all numbers\";\n      case 'totalDivision':\n        return \"Enter the result of dividing the first number by all others\";\n      case 'memory':\n        return \"Enter the sequence (e.g., 38745)\";\n      case 'addition':\n        return \"Enter sum (e.g., 42)\";\n      case 'counting':\n        return `Enter count of ${targetNumber} (e.g., 3)`;\n      case 'pattern':\n        return \"Enter next number in pattern\";\n      case 'reverse':\n        return \"Enter reversed sequence\";\n      case 'missing':\n        return \"Enter missing numbers (e.g., 3,5,9)\";\n      case 'oddeven':\n        return \"Enter count (e.g., odd:4, even:6)\";\n      case 'multiples':\n        return `Enter next multiple of ${targetNumber}`;\n      case 'comparison':\n        return \"Enter >, <, or = for each pair (e.g., >,<,=,>,=)\";\n      case 'speed':\n        return \"Enter the last number in sequence\";\n      case 'symbol':\n        return \"Enter symbol=number pairs (e.g., ★=5,♦=3)\";\n      default:\n        return \"Enter your answer\";\n    }\n  };\n\n  // Navigate to stats page\n  const goToStats = () => {\n    navigate('/stats', {\n      state: {\n        performanceData\n      }\n    });\n  };\n\n  // Navigate to login page\n  const goToLogin = () => {\n    navigate('/login');\n  };\n\n  // Logout function\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setUserId(null);\n    setAppState('setup');\n    // No need to clear performance data as we want to keep local progress\n  };\n  useEffect(() => {\n    // Simulate loading time and show Netflix-style loading animation\n    if (appState === 'setup') {\n      setLoading(true);\n      setShowImage(true);\n      setTimeout(() => {\n        setLoading(false);\n      }, 2000);\n    }\n  }, [appState]);\n\n  // if (loading && showImage) {\n  //   return (\n  //     <div className=\"flex flex-col items-center justify-center h-screen bg-gray-900\">\n  //       <Netflix />\n  //       <div className=\"mt-8\">\n  //         <ThreeDot color=\"#E50914\" size=\"medium\" />\n  //       </div>\n  //     </div>\n  //   );\n  // }\n\n  const renderLoginState = () => {\n    const token = localStorage.getItem('token');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avc-flex avc-items-center\",\n      children: userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-text-sm avc-text-green-600 avc-mr-4\",\n        children: \"\\u2713 Data syncing to account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4747,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/login\",\n        className: \"avc-bg-green-500 avc-text-white avc-py-1 avc-px-3 avc-rounded avc-hover:bg-green-600 avc-text-sm avc-mr-2\",\n        children: \"Login to sync data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4751,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4745,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSetup = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avc-rendersetup\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avc-page-background\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-setup-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-logo-container\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: bdaLogo,\n            alt: \"BDA Abacus Classes Logo\",\n            className: \"avc-logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4765,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4764,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"avc-title\",\n          children: \"Practice Anytime, Anywhere        \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4772,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-login-section\",\n          children: [renderLoginState(), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/'),\n            className: \"avc-dashboard-btn\",\n            children: \"View Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4777,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4775,\n          columnNumber: 9\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-error-banner\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4788,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"avc-error-close\",\n            onClick: () => setError(null),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4789,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4787,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Choose your Challenge:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4800,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: gameType,\n              onChange: e => setGameType(e.target.value),\n              className: \"avc-select\",\n              children: gameModes.map(mode => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: mode.value,\n                children: mode.label\n              }, mode.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4807,\n                columnNumber: 17\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4801,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4799,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-input-group\",\n            children: [['multiplication', 'division'].includes(gameType) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avc-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Number of Digits:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4857,\n                columnNumber: 5\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"avc-digit-inputs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avc-digit-input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"First Number:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4860,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: firstDigit === 0 ? '' : firstDigit,\n                    onChange: e => {\n                      const val = e.target.value;\n                      setFirstDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\n                    },\n                    onFocus: e => e.target.select(),\n                    min: \"1\",\n                    max: \"6\",\n                    className: \"avc-input avc-digit-input\",\n                    placeholder: \"1-6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4861,\n                    columnNumber: 9\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4859,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avc-digit-input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Second Number:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4876,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: secondDigit === 0 ? '' : secondDigit,\n                    onChange: e => {\n                      const val = e.target.value;\n                      setSecondDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\n                    },\n                    onFocus: e => e.target.select(),\n                    min: \"1\",\n                    max: \"6\",\n                    className: \"avc-input avc-digit-input\",\n                    placeholder: \"1-6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4877,\n                    columnNumber: 9\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4875,\n                  columnNumber: 7\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4858,\n                columnNumber: 5\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4856,\n              columnNumber: 3\n            }, this), ['subtraction'].includes(gameType) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avc-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Difficulty:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4919,\n                columnNumber: 5\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : firstDigit === 3 ? 'triple' : firstDigit === 4 ? 'four' : firstDigit === 5 ? 'five' : 'six',\n                onChange: e => {\n                  const val = e.target.value;\n                  setDifficulty(val);\n                  if (val === 'single') {\n                    setFirstDigit(1);\n                    setSecondDigit(1);\n                  } else if (val === 'double') {\n                    setFirstDigit(2);\n                    setSecondDigit(2);\n                  } else if (val === 'triple') {\n                    setFirstDigit(3);\n                    setSecondDigit(3);\n                  } else if (val === 'four') {\n                    setFirstDigit(4);\n                    setSecondDigit(4);\n                  } else if (val === 'five') {\n                    setFirstDigit(5);\n                    setSecondDigit(5);\n                  } else if (val === 'six') {\n                    setFirstDigit(6);\n                    setSecondDigit(6);\n                  }\n                },\n                className: \"avc-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"double\",\n                  children: \"Double Digit (10-99)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4939,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"triple\",\n                  children: \"Triple Digit (100-999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4940,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"four\",\n                  children: \"4 Digits (1,000-9,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4941,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"five\",\n                  children: \"5 Digits (10,000-99,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4942,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"six\",\n                  children: \"6 Digits (100,000-999,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4943,\n                  columnNumber: 7\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4920,\n                columnNumber: 5\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4918,\n              columnNumber: 3\n            }, this), !['multiplication', 'division', 'subtraction'].includes(gameType) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avc-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Difficulty:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4973,\n                columnNumber: 5\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : firstDigit === 3 ? 'triple' : firstDigit === 4 ? 'four' : firstDigit === 5 ? 'five' : 'six',\n                onChange: e => {\n                  const val = e.target.value;\n                  setDifficulty(val);\n                  if (val === 'single') {\n                    setFirstDigit(1);\n                    setSecondDigit(1);\n                  } else if (val === 'double') {\n                    setFirstDigit(2);\n                    setSecondDigit(2);\n                  } else if (val === 'triple') {\n                    setFirstDigit(3);\n                    setSecondDigit(3);\n                  } else if (val === 'four') {\n                    setFirstDigit(4);\n                    setSecondDigit(4);\n                  } else if (val === 'five') {\n                    setFirstDigit(5);\n                    setSecondDigit(5);\n                  } else if (val === 'six') {\n                    setFirstDigit(6);\n                    setSecondDigit(6);\n                  }\n                },\n                className: \"avc-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"single\",\n                  children: \"Single Digit (1-9)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4993,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"double\",\n                  children: \"Double Digit (10-99)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4994,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"triple\",\n                  children: \"Triple Digit (100-999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4995,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"four\",\n                  children: \"4 Digits (1,000-9,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4996,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"five\",\n                  children: \"5 Digits (10,000-99,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4997,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"six\",\n                  children: \"6 Digits (100,000-999,999)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4998,\n                  columnNumber: 7\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4974,\n                columnNumber: 5\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4972,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4827,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Time (seconds)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5018,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: speed === 0 ? '' : speed,\n              onChange: e => {\n                const val = e.target.value;\n                setSpeed(val === '' ? '' : Number(val));\n              },\n              onFocus: e => e.target.select(),\n              step: \"0.1\",\n              min: \"0.1\",\n              max: \"5\",\n              className: \"avc-input\",\n              placeholder: \"Enter speed in seconds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5019,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5017,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Number Of Rows\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5048,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: count === 0 ? '' : count,\n              onChange: e => {\n                const val = e.target.value;\n                setCount(val === '' ? '' : Number(val));\n              },\n              onFocus: e => e.target.select(),\n              min: \"3\",\n              max: \"20\",\n              className: \"avc-input\",\n              placeholder: \"Enter number count\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5049,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5047,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startGame,\n            className: \"avc-start-btn\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5064,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4798,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4762,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4761,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 4760,\n    columnNumber: 3\n  }, this);\n  // 18\n\n  // REPLACE your entire renderGame function with this complete version:\n\n  // const renderSetup = () => (\n  //   <div className='avc-rendersetup'>\n  //     <div className=\"avc-page-background\">\n  //       <div className=\"avc-setup-container\">\n  //         <h1 className=\"avc-title\">\n  //           Avecus Learning App\n  //         </h1>\n\n  //         <div className=\"avc-login-section\">\n  //           {renderLoginState()}\n  //           <button \n  //             onClick={() => navigate('/')}\n  //             className=\"avc-dashboard-btn\"\n  //           >\n  //             View Dashboard\n  //           </button>\n  //         </div>\n\n  //         {error && (\n  //           <div className=\"avc-error-banner\">\n  //             <span>{error}</span>\n  //             <button \n  //               className=\"avc-error-close\"\n  //               onClick={() => setError(null)}\n  //             >\n  //               ×\n  //             </button>\n  //           </div>\n  //         )}\n\n  //         <div className=\"avc-space-y-4\">\n  //           <div className=\"avc-input-group\">\n  //             <label>Challenge Type:</label>\n  //             <select\n  //               value={gameType}\n  //               onChange={(e) => {\n  //                 const newGameType = e.target.value;\n  //                 setGameType(newGameType);\n\n  //                 // Set appropriate defaults for new game type\n  //                 if (newGameType === 'subtraction') {\n  //                   setFirstDigit(2); // Default to double digits for subtraction\n  //                   setSecondDigit(2);\n  //                   setDifficulty('double');\n  //                 } else if (!['multiplication', 'division'].includes(newGameType)) {\n  //                   setFirstDigit(1); // Default to single digits for other games\n  //                   setSecondDigit(1);\n  //                   setDifficulty('single');\n  //                 }\n  //               }}\n  //               className=\"avc-select\"\n  //             >\n  //               {gameModes.map(mode => (\n  //                 <option key={mode.value} value={mode.value}>\n  //                   {mode.label}\n  //                 </option>\n  //               ))}\n  //             </select>\n  //           </div>\n\n  //           {/* UPDATED DIFFICULTY SELECTION */}\n  //           <div className=\"avc-input-group\">\n  //             {['multiplication', 'division'].includes(gameType) ? (\n  //               <div>\n  //                 <label>Number of Digits:</label>\n  //                 <div className=\"avc-digit-inputs\">\n  //                   <div className=\"avc-digit-input-group\">\n  //                     <label>First Number Digits:</label>\n  //                     <input\n  //                       type=\"number\"\n  //                       value={firstDigit === 0 ? '' : firstDigit}\n  //                       onChange={(e) => {\n  //                         const val = e.target.value;\n  //                         setFirstDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\n  //                       }}\n  //                       onFocus={(e) => e.target.select()}\n  //                       min=\"1\"\n  //                       max=\"6\"\n  //                       className=\"avc-input avc-digit-input\"\n  //                       placeholder=\"1-6\"\n  //                     />\n  //                   </div>\n  //                   <div className=\"avc-digit-input-group\">\n  //                     <label>Second Number Digits:</label>\n  //                     <input\n  //                       type=\"number\"\n  //                       value={secondDigit === 0 ? '' : secondDigit}\n  //                       onChange={(e) => {\n  //                         const val = e.target.value;\n  //                         setSecondDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\n  //                       }}\n  //                       onFocus={(e) => e.target.select()}\n  //                       min=\"1\"\n  //                       max=\"6\"\n  //                       className=\"avc-input avc-digit-input\"\n  //                       placeholder=\"1-6\"\n  //                     />\n  //                   </div>\n  //                 </div>\n  //               </div>\n  //             ) : gameType === 'subtraction' ? (\n  //               <div>\n\n  //                 <label>Difficulty:</label>\n  //                                 <div className=\"avc-digit-inputs\">\n  //                   <div className=\"avc-digit-input-group\">\n  //                 <select\n  //                   value={firstDigit === 2 ? 'double' : firstDigit === 3 ? 'triple' : 'double'}\n  //                   onChange={(e) => {\n  //                     const val = e.target.value;\n  //                     setDifficulty(val);\n  //                     if (val === 'double') { \n  //                       setFirstDigit(2); \n  //                       setSecondDigit(2); \n  //                     } else if (val === 'triple') { \n  //                       setFirstDigit(3); \n  //                       setSecondDigit(3); \n  //                     }\n  //                   }}\n  //                   className=\"avc-input avc-digit-input\"\n  //                 >\n  //                   <option value=\"double\">Double Digit (10-99)</option>\n  //                   <option value=\"triple\">Triple Digit (100-999)</option>\n  //                 </select>\n  //                 </div>\n  //                 </div>\n  //               </div>\n  //             ) : (\n  //               <div>\n  //                 <label>Difficulty:</label>\n  //                                 <div className=\"avc-digit-inputs\">\n  //                   <div className=\"avc-digit-input-group\">\n  //                 <select\n  //                   value={firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : 'triple'}\n  //                   onChange={(e) => {\n  //                     const val = e.target.value;\n  //                     setDifficulty(val);\n  //                     if (val === 'single') { \n  //                       setFirstDigit(1); \n  //                       setSecondDigit(1); \n  //                     } else if (val === 'double') { \n  //                       setFirstDigit(2); \n  //                       setSecondDigit(2); \n  //                     } else { \n  //                       setFirstDigit(3); \n  //                       setSecondDigit(3); \n  //                     }\n  //                   }}\n  //                   className=\"avc-input avc-digit-input\"\n  //                 >\n  //                   <option value=\"single\">Single Digit (1-9)</option>\n  //                   <option value=\"double\">Double Digit (10-99)</option>\n  //                   <option value=\"triple\">Triple Digit (100-999)</option>\n  //                 </select>\n  //               </div>\n  //                 </div>                \n  //               </div>\n  //             )}\n  //           </div>\n\n  //           <div className=\"avc-input-group\">\n  //             <label>Time Interval (seconds)</label>\n  //             <input\n  //               type=\"number\"\n  //               value={speed === 0 ? '' : speed}\n  //               onChange={(e) => {\n  //                 const val = e.target.value;\n  //                 setSpeed(val === '' ? '' : Number(val));\n  //               }}\n  //               onFocus={(e) => e.target.select()}\n  //               step=\"0.1\"\n  //               min=\"0.1\"\n  //               max=\"5\"\n  //               className=\"avc-input\"\n  //               placeholder=\"Enter speed in seconds\"\n  //             />\n  //           </div>\n\n  //           <div className=\"avc-input-group\">\n  //             <label>Number Of Questions</label>\n  //             <input\n  //               type=\"number\"\n  //               value={count === 0 ? '' : count}\n  //               onChange={(e) => {\n  //                 const val = e.target.value;\n  //                 setCount(val === '' ? '' : Number(val));\n  //               }}\n  //               onFocus={(e) => e.target.select()}\n  //               min=\"3\"\n  //               max=\"20\"\n  //               className=\"avc-input\"\n  //               placeholder=\"Enter number count\"\n  //             />\n  //           </div>\n\n  //           <button \n  //             onClick={startGame}\n  //             className=\"avc-start-btn\"\n  //           >\n  //             Start Challenge\n  //           </button>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   </div>\n  // );\n  const renderGame = () => {\n    // For addition game - show numbers one by one, then input\n    if (gameType === 'addition') {\n      if (additionShowingNumbers) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-instruction\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Remember these numbers to add them:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5295,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5294,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"single-number-display\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-number\",\n                children: additionNumbers[additionCurrentIndex]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5299,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5298,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-progress\",\n              children: [\"Number \", additionCurrentIndex + 1, \" of \", additionNumbers.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5304,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-indicator\",\n              children: [\"Next number in: \", additionCurrentTimer, \" seconds\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5308,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5293,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5292,\n          columnNumber: 7\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-input-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"addition-instruction\",\n                children: \"Type Your Answer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5319,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: userAnswer,\n                onChange: e => setUserAnswer(e.target.value),\n                className: \"addition-answer-input\",\n                placeholder: \"Enter the sum\",\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5320,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addition-buttons\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: checkAdditionAnswer,\n                  className: \"addition-check-btn\",\n                  children: \"Check Answer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5329,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5328,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5318,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5317,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5316,\n          columnNumber: 7\n        }, this);\n      }\n    }\n\n    // 9. UPDATE subtraction rendering (replace subtraction section in renderGame)\n    if (gameType === 'subtraction') {\n      if (subtractionShowingNumbers) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-instruction\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Remember these numbers for subtraction:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5347,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5346,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"single-number-display\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-number\",\n                children: subtractionCurrentIndex === 0 ? subtractionNumbers[subtractionCurrentIndex] : `-${subtractionNumbers[subtractionCurrentIndex]}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5351,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5350,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-progress\",\n              children: [\"Number \", subtractionCurrentIndex + 1, \" of \", subtractionNumbers.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5360,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-indicator\",\n              children: [\"Next number in: \", subtractionCurrentTimer, \" seconds\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5364,\n              columnNumber: 13\n            }, this), subtractionCurrentIndex === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"instruction-note\",\n              style: {\n                backgroundColor: '#d4edda',\n                color: '#155724',\n                padding: '10px',\n                borderRadius: '5px',\n                textAlign: 'center',\n                marginTop: '10px'\n              },\n              children: \"This is your starting number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5370,\n              columnNumber: 15\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"instruction-note\",\n              style: {\n                backgroundColor: '#f8d7da',\n                color: '#721c24',\n                padding: '10px',\n                borderRadius: '5px',\n                textAlign: 'center',\n                marginTop: '10px'\n              },\n              children: \"Subtract this from your total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5381,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5345,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5344,\n          columnNumber: 9\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-input-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"addition-instruction\",\n                children: \"Subtract all numbers from the first number:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5400,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: userAnswer,\n                onChange: e => setUserAnswer(e.target.value),\n                className: \"addition-answer-input\",\n                placeholder: \"Enter the result\",\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5412,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addition-buttons\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: checkSubtractionAnswer,\n                  className: \"addition-check-btn\",\n                  children: \"Check Answer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5421,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5420,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5399,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5398,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5397,\n          columnNumber: 9\n        }, this);\n      }\n    }\n\n    // 10. UPDATE mixedMath rendering (replace mixedMath section in renderGame)\n    if (gameType === 'mixedMath') {\n      if (additionShowingNumbers) {\n        const currentNum = additionNumbers[additionCurrentIndex];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-instruction\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Let's add and subtract like a pro\\u2728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5440,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5439,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"single-number-display\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `current-number ${currentNum.operation === 'add' ? 'addition-phase' : 'subtraction-phase'}`,\n                children: [currentNum.operation === 'add' ? '+' : '-', \" \", currentNum.value]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5444,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5443,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-progress\",\n              children: [\"Number \", additionCurrentIndex + 1, \" of \", additionNumbers.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5449,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-indicator\",\n              children: [\"Next number in: \", mixedMathTimer, \" seconds\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5453,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"operation-indicator\",\n              children: currentNum.operation === 'add' ? 'ADD this number' : 'SUBTRACT this number'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5457,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5438,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5437,\n          columnNumber: 7\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ask-q\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avc-game-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addition-input-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"addition-instruction\",\n                children: \"Calculate the final result:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5468,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: userAnswer,\n                onChange: e => setUserAnswer(e.target.value),\n                className: \"addition-answer-input\",\n                placeholder: \"Enter the final result\",\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5474,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addition-buttons\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: checkMixedMathAnswer,\n                  className: \"addition-check-btn\",\n                  children: \"Check Answer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5483,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5482,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5467,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5466,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5465,\n          columnNumber: 7\n        }, this);\n      }\n    }\n\n    // For math operation games - replace the math operations section:\n    if (['multiplication', 'division'].includes(gameType)) {\n      const currentPair = comparisonPairs[currentQuestionIndex];\n      if (!currentPair) return null;\n      const [a, b] = currentPair;\n      let operatorSymbol = '';\n      switch (gameType) {\n        case 'subtraction':\n          operatorSymbol = ' - ';\n          break;\n        case 'multiplication':\n          operatorSymbol = ' × ';\n          break;\n        case 'division':\n          operatorSymbol = ' ÷ ';\n          break;\n        case 'mixedMath':\n          const operation = currentPair[2];\n          operatorSymbol = operation === 'addition' ? ' + ' : ' - ';\n          break;\n      }\n      const intervalMs = speed * 1000;\n      const currentInterval = Math.floor(gameElapsedTime / intervalMs);\n      const timeInCurrentInterval = gameElapsedTime % intervalMs;\n      const timeLeftInInterval = intervalMs - timeInCurrentInterval;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ask-q\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-game-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-timer-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timer-progress\",\n              style: {\n                width: `${timeRemaining / (speed * count * 1000) * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5522,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5521,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-navigation\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"question-nav-buttons\",\n              children: comparisonPairs.map((_, index) => {\n                var _questionAnswers$inde;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `nav-btn ${index === currentQuestionIndex ? 'active' : ''} ${availableQuestions.has(index) ? 'available' : 'locked'} ${(_questionAnswers$inde = questionAnswers[index]) !== null && _questionAnswers$inde !== void 0 && _questionAnswers$inde.trim() ? 'answered' : ''}`,\n                  onClick: () => navigateToQuestion(index),\n                  disabled: !availableQuestions.has(index),\n                  children: [\"Q\", index + 1]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5531,\n                  columnNumber: 15\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5529,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5528,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-counter\",\n            children: [\"Question \", currentQuestionIndex + 1, \" of \", comparisonPairs.length, !availableQuestions.has(currentQuestionIndex + 1) && currentQuestionIndex < comparisonPairs.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"next-unlock\",\n              children: [\"Next question unlocks in: \", Math.ceil(timeLeftInInterval / 1000), \"s\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5552,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5549,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"math-question-display\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"math-problem\",\n              children: [a, \" \", operatorSymbol, \" \", b, \" = ?\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5559,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"answer-input-section\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: currentQuestionAnswer,\n                className: \"question-answer-input\",\n                placeholder: \"Your answer\",\n                onChange: handleKeyboardInput,\n                onKeyDown: e => {\n                  if (e.key === 'Enter') submitCurrentQuestion();\n                },\n                autoFocus: true\n                // ADD THESE ATTRIBUTES TO DISABLE MOBILE KEYBOARD:\n                ,\n                inputMode: \"none\",\n                onFocus: e => e.target.blur() // Immediately blur to prevent keyboard\n                ,\n                readOnly: true // Make it read-only to prevent typing\n                ,\n                onTouchStart: e => e.preventDefault() // Prevent touch events that might trigger keyboard\n                ,\n                style: {\n                  caretColor: 'transparent'\n                } // Hide cursor\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5564,\n                columnNumber: 1\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5563,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(NumberPad, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5581,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"total-time-remaining\",\n              children: [\"Total time remaining: \", Math.ceil(timeRemaining / 1000), \"s\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5583,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5558,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5520,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5519,\n        columnNumber: 5\n      }, this);\n    }\n  };\n\n  // REPLACE your renderResult function with this enhanced version:\n  // const renderResult = () => {\n  //   if (!result) return null;\n\n  //   return (\n  //     <div className=\"avc-result-screen-container\">\n  //       <div className=\"avc-result-card\">\n  //         <div className=\"avc-result-header\">\n  //           <h2>Game Result</h2>\n  //           <div className={`avc-result-message ${result.correct ? 'avc-correct' : 'avc-incorrect'}`}>\n  //             <span className=\"avc-emoji\">\n  //               {result.correct ? \"Correct! 🎉\" : \"Not quite right 😕\"}\n  //             </span>\n  //           </div>\n  //         </div>\n\n  //         <div className=\"avc-result-details\">\n  //           {/* Show detailed results for math operations */}\n  //           {['subtraction', 'multiplication', 'division'].includes(gameType) && result.userAnswers && result.correctAnswers ? (\n  //             <div className=\"avc-detailed-results\">\n  //               <div className=\"avc-result-summary\">\n  //                 <span className=\"avc-detail-label\">Overall Result:</span>\n  //                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\n  //                 {result.accuracy && (\n  //                   <span className=\"avc-detail-value\">Accuracy: {result.accuracy}</span>\n  //                 )}\n  //               </div>\n\n  //               {/* <div className=\"avc-question-breakdown\">\n  //                 <h3>Question Breakdown:</h3>\n  //                 {comparisonPairs.map((pair, index) => {\n  //                   const [a, b] = pair;\n  //                   const userAns = result.userAnswers[index] || 'No answer';\n  //                   const correctAns = result.correctAnswers[index];\n  //                   const isCorrect = userAns === correctAns;\n\n  //                   let operation = '';\n  //                   switch(gameType) {\n  //                     case 'subtraction': operation = ' - '; break;\n  //                     case 'multiplication': operation = ' × '; break;\n  //                     case 'division': operation = ' ÷ '; break;\n  //                   }\n\n  //                   return (\n  //                     <div key={index} className={`avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`}>\n  //                       <span className=\"question\">{a}{operation}{b} = </span>\n  //                       <span className=\"user-answer\">Your: {userAns}</span>\n  //                       <span className=\"correct-answer\">Correct: {correctAns}</span>\n  //                       <span className=\"status\">{isCorrect ? '✓' : '✗'}</span>\n  //                     </div>\n  //                   );\n  //                 })}\n  //               </div> */}\n\n  //               <div className=\"avc-question-breakdown\">\n  //             <h3>Question Breakdown:</h3>\n  //             {comparisonPairs.map((pair, index) => {\n  //                 const [a, b] = pair;\n  //                 const userAns = result.userAnswers[index] || 'No answer';\n  //                 const correctAns = result.correctAnswers[index];\n  //                 const isCorrect = userAns === correctAns;\n\n  //                 let operation = '';\n  //                 let calculatedResult = '';\n\n  //                 switch(gameType) {\n  //                 case 'subtraction': \n  //                     operation = ' - '; \n  //                     calculatedResult = a - b;\n  //                     break;\n  //                 case 'multiplication': \n  //                     operation = ' × '; \n  //                     calculatedResult = a * b;\n  //                     break;\n  //                 case 'division': \n  //                     operation = ' ÷ '; \n  //                     calculatedResult = Math.round(a / b);\n  //                     break;\n  //                 case 'mixedMath':\n  //                     const op = pair[2];\n  //                     operation = op === 'addition' ? ' + ' : ' - ';\n  //                     calculatedResult = op === 'addition' ? a + b : a - b;\n  //                     break;\n  //                 }\n\n  //                 return (\n  //                 <div key={index} className={`avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`}>\n  //                     <span className=\"question\">{a}{operation}{b} = {calculatedResult} </span>\n  //                     <span className=\"user-answer\">Your: {userAns}</span>\n  //                     <span className=\"correct-answer\">Correct: {correctAns}</span>\n  //                     <span className=\"status\">{isCorrect ? '✓' : '✗'}</span>\n  //                 </div>\n  //                 );\n  //             })}\n  //             </div>\n  //             </div>\n  //           ) : (\n  //             // Standard result display for other game types\n  //             <>\n  //               <div className=\"avc-result-detail\">\n  //                 <span className=\"avc-detail-label\">Your Answer: </span>\n  //                 <span className=\"avc-detail-value\">{userAnswer} </span>\n  //               </div>\n  //               <div className=\"avc-result-detail\">\n  //                 <span className=\"avc-detail-label\">Correct Answer:</span>\n  //                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\n  //               </div>\n  //             </>\n  //           )}\n\n  //           <div className=\"avc-result-detail\">\n  //             <span className=\"avc-detail-label\">Score:</span>\n  //             <span className={`avc-detail-value ${result.score > 0 ? 'avc-positive-score' : 'avc-negative-score'}`}>\n  //               {result.score > 0 ? \"+\" : \"\"}{result.score.toFixed(2)}\n  //               {result.maxScore > 1 && ` of ${result.maxScore}`}\n  //             </span>\n  //           </div>\n  //         </div>\n\n  //         <div className=\"avc-result-actions\">\n  //           <button \n  //             onClick={() => {\n  //               resetGame();\n  //               startGame();\n  //             }}\n  //             className=\"avc-btn avc-btn-retry\"\n  //           >\n  //             <span className=\"avc-emoji\">🔄</span>\n  //             <span>Try Again</span>\n  //           </button>\n\n  //           <button \n  //             // onClick={() => navigate('/play')}\n  //                       onClick={() => {\n  // resetGame();\n  //             }}\n  //             className=\"avc-btn avc-btn-dashboard\"\n  //           >\n  //             <span className=\"avc-emoji\">🏠</span>\n  //             <span>Dashboard</span>\n  //           </button>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   );\n  // };\n  // 18\n\n  const renderResult = () => {\n    console.log('=== RENDERING RESULT ===');\n    console.log('Current result:', result);\n    if (!result) {\n      console.log('No result data available');\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-result-screen-container\",\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          zIndex: 10000,\n          backgroundColor: 'rgba(0,0,0,0.8)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avc-result-card\",\n          style: {\n            backgroundColor: 'white',\n            padding: '20px',\n            borderRadius: '10px',\n            minWidth: '300px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Loading Results...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5767,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please wait while we process your answers.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5768,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAppState('setup'),\n            style: {\n              backgroundColor: '#6c5ce7',\n              color: 'white',\n              border: 'none',\n              padding: '10px 20px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              marginTop: '10px'\n            },\n            children: \"Back to Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5769,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5760,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5748,\n        columnNumber: 7\n      }, this);\n    }\n\n    // Determine if this is a detailed result (multiplication/division) or simple result (addition/subtraction)\n    const isDetailedResult = result.userAnswers && result.correctAnswers && Array.isArray(result.userAnswers) && Array.isArray(result.correctAnswers);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avc-result-screen-container\",\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: 10000,\n        backgroundColor: 'rgba(0,0,0,0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '20px',\n        boxSizing: 'border-box'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avc-result-card\",\n        style: {\n          backgroundColor: 'white',\n          borderRadius: '12px',\n          maxWidth: '90vw',\n          maxHeight: '90vh',\n          overflow: 'auto',\n          minWidth: '320px',\n          boxShadow: '0 10px 30px rgba(0,0,0,0.3)',\n          padding: '0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px 20px 10px 20px',\n            borderBottom: '1px solid #eee'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0 0 15px 0',\n              textAlign: 'center',\n              fontSize: '24px',\n              color: '#333'\n            },\n            children: \"Result\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5822,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              padding: '12px',\n              borderRadius: '8px',\n              backgroundColor: result.correct ? '#d4edda' : '#f8d7da',\n              border: `1px solid ${result.correct ? '#c3e6cb' : '#f5c6cb'}`,\n              color: result.correct ? '#155724' : '#721c24',\n              fontSize: '18px',\n              fontWeight: 'bold'\n            },\n            children: result.correct ? \"Excellent Work! 🎉\" : \"Keep Practicing! 😊\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5831,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5818,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: '#f8f9fa',\n              padding: '15px',\n              borderRadius: '8px',\n              marginBottom: '20px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '20px',\n                fontWeight: 'bold',\n                marginBottom: '8px'\n              },\n              children: result.actualAnswer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5855,\n              columnNumber: 13\n            }, this), result.accuracy && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '16px',\n                color: '#666'\n              },\n              children: [\"Accuracy: \", result.accuracy]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5859,\n              columnNumber: 15\n            }, this), !isDetailedResult && result.userAnswer !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '16px',\n                color: '#666',\n                marginTop: '8px'\n              },\n              children: [\"Your Answer: \", result.userAnswer || 'No answer provided']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5866,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '18px',\n                fontWeight: 'bold',\n                color: result.score > 0 ? '#28a745' : '#dc3545',\n                marginTop: '8px'\n              },\n              children: [\"Score: \", result.score > 0 ? '+' : '', result.score]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5871,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5848,\n            columnNumber: 11\n          }, this), isDetailedResult && comparisonPairs && comparisonPairs.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                marginBottom: '15px',\n                color: '#333'\n              },\n              children: \"Question Breakdown:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5981,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '300px',\n                overflow: 'auto',\n                border: '1px solid #ddd',\n                borderRadius: '8px'\n              },\n              children: comparisonPairs.map((pair, index) => {\n                const [a, b] = pair;\n                const userAnswer = result.userAnswers[index] || 'No answer';\n                const correctAnswer = result.correctAnswers[index];\n\n                // Clean comparison\n                const cleanUserAns = String(userAnswer).replace(/\\s+/g, '').toLowerCase();\n                const cleanCorrectAns = String(correctAnswer).replace(/\\s+/g, '').toLowerCase();\n                let isCorrect = false;\n                if (cleanUserAns !== '' && cleanCorrectAns !== '') {\n                  isCorrect = cleanUserAns === cleanCorrectAns;\n                  if (!isCorrect) {\n                    const userNum = parseFloat(cleanUserAns);\n                    const correctNum = parseFloat(cleanCorrectAns);\n                    if (!isNaN(userNum) && !isNaN(correctNum)) {\n                      isCorrect = Math.abs(userNum - correctNum) < 0.001;\n                    }\n                  }\n                }\n                let operation = '';\n                let calculatedResult = '';\n                switch (result.gameType || gameType) {\n                  case 'subtraction':\n                    operation = ' - ';\n                    calculatedResult = a - b;\n                    break;\n                  case 'multiplication':\n                    operation = ' × ';\n                    calculatedResult = a * b;\n                    break;\n                  case 'division':\n                    operation = ' ÷ ';\n                    calculatedResult = Math.round(a / b);\n                    break;\n                  case 'mixedMath':\n                    const op = pair[2];\n                    operation = op === 'addition' ? ' + ' : ' - ';\n                    calculatedResult = op === 'addition' ? a + b : a - b;\n                    break;\n                  default:\n                    operation = ' ? ';\n                    calculatedResult = correctAnswer;\n                }\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`,\n                  style: {\n                    padding: '12px 16px',\n                    borderBottom: index < comparisonPairs.length - 1 ? '1px solid #eee' : 'none',\n                    backgroundColor: isCorrect ? '#f8fff9' : '#fff8f8'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 'bold',\n                      marginBottom: '8px',\n                      color: '#333',\n                      fontSize: '16px'\n                    },\n                    children: [\"Q\", index + 1, \": \", a, operation, b, \" = \", calculatedResult]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6046,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '14px',\n                      display: 'grid',\n                      gridTemplateColumns: '1fr 1fr auto',\n                      gap: '12px',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        textAlign: 'left'\n                      },\n                      children: [\"Your: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: userAnswer\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 6062,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 6061,\n                      columnNumber: 15\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        textAlign: 'left'\n                      },\n                      children: [\"Correct: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: correctAnswer\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 6065,\n                        columnNumber: 26\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 6064,\n                      columnNumber: 15\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: '18px',\n                        color: isCorrect ? '#28a745' : '#dc3545',\n                        fontWeight: 'bold',\n                        textAlign: 'center',\n                        minWidth: '30px'\n                      },\n                      children: isCorrect ? '✓' : '✗'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 6067,\n                      columnNumber: 15\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6054,\n                    columnNumber: 13\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6037,\n                  columnNumber: 11\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5982,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5980,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5846,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            borderTop: '1px solid #eee',\n            display: 'flex',\n            gap: '12px',\n            justifyContent: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              console.log('Try Again clicked - resetting game');\n              setResult(null);\n              resetGame();\n              setTimeout(() => {\n                startGame();\n              }, 100);\n            },\n            style: {\n              backgroundColor: '#ff8c00',\n              color: 'white',\n              border: 'none',\n              padding: '12px 24px',\n              borderRadius: '6px',\n              fontSize: '16px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              fontWeight: 'bold',\n              minWidth: '120px',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDD04\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 6119,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Try Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 6120,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 6094,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              console.log('Dashboard clicked - returning to setup');\n              setResult(null);\n              resetGame();\n            },\n            style: {\n              backgroundColor: '#6c5ce7',\n              color: 'white',\n              border: 'none',\n              padding: '12px 24px',\n              borderRadius: '6px',\n              fontSize: '16px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              fontWeight: 'bold',\n              minWidth: '120px',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83C\\uDFE0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 6145,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 6146,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 6123,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 6086,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5807,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 5793,\n      columnNumber: 5\n    }, this);\n  };\n\n  // const renderResult = () => {\n  //   console.log('=== RENDERING RESULT ===');\n  //   console.log('Current result:', result);\n  //   console.log('Current appState:', appState);\n\n  //   if (!result) {\n  //     console.log('No result data available');\n  //     return (\n  //       <div className=\"avc-result-screen-container\">\n  //         <div className=\"avc-result-card\">\n  //           <div className=\"avc-result-header\">\n  //             <h2>Loading Results...</h2>\n  //           </div>\n  //         </div>\n  //       </div>\n  //     );\n  //   }\n\n  //   const isDetailedResult = result.userAnswers && result.correctAnswers && comparisonPairs.length > 0;\n\n  //   return (\n  //     <div className=\"avc-result-screen-container\" style={{ \n  //       position: 'fixed', \n  //       top: 0, \n  //       left: 0, \n  //       right: 0, \n  //       bottom: 0, \n  //       zIndex: 9999,\n  //       backgroundColor: 'rgba(0,0,0,0.8)',\n  //       display: 'flex',\n  //       alignItems: 'center',\n  //       justifyContent: 'center'\n  //     }}>\n  //       <div className=\"avc-result-card\" style={{\n  //         backgroundColor: 'white',\n  //         padding: '20px',\n  //         borderRadius: '10px',\n  //         maxWidth: '90vw',\n  //         maxHeight: '90vh',\n  //         overflow: 'auto',\n  //         minWidth: '300px'\n  //       }}>\n  //         <div className=\"avc-result-header\">\n  //           <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>Game Result</h2>\n  //           <div className={`avc-result-message ${result.correct ? 'avc-correct' : 'avc-incorrect'}`}\n  //                style={{\n  //                  textAlign: 'center',\n  //                  padding: '10px',\n  //                  borderRadius: '5px',\n  //                  backgroundColor: result.correct ? '#d4edda' : '#f8d7da',\n  //                  color: result.correct ? '#155724' : '#721c24',\n  //                  marginBottom: '20px'\n  //                }}>\n  //             <span className=\"avc-emoji\">\n  //               {result.correct ? \"Correct! 🎉\" : \"Not quite right 😕\"}\n  //             </span>\n  //           </div>\n  //         </div>\n\n  //         <div className=\"avc-result-details\">\n  //           {/* Show detailed results for math operations */}\n  //           {isDetailedResult ? (\n  //             <div className=\"avc-detailed-results\">\n  //               <div className=\"avc-result-summary\" style={{ marginBottom: '20px' }}>\n  //                 <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '10px' }}>\n  //                   <span className=\"avc-detail-label\">Overall Result: </span>\n  //                   <span className=\"avc-detail-value\">{result.actualAnswer}</span>\n  //                 </div>\n  //                 {result.accuracy && (\n  //                   <div style={{ fontSize: '16px', marginBottom: '10px' }}>\n  //                     <span className=\"avc-detail-label\">Accuracy: </span>\n  //                     <span className=\"avc-detail-value\">{result.accuracy}</span>\n  //                   </div>\n  //                 )}\n  //               </div>\n\n  //               <div className=\"avc-question-breakdown\" style={{ marginBottom: '20px' }}>\n  //                 <h3 style={{ marginBottom: '15px' }}>Question Breakdown:</h3>\n  //                 <div style={{ maxHeight: '300px', overflow: 'auto' }}>\n  //                   {comparisonPairs.map((pair, index) => {\n  //                     const [a, b] = pair;\n  //                     const userAns = result.userAnswers[index] || 'No answer';\n  //                     const correctAns = result.correctAnswers[index];\n  //                     const isCorrect = userAns.toString().trim() === correctAns.toString().trim();\n\n  //                     let operation = '';\n  //                     let calculatedResult = '';\n\n  //                     switch(gameType) {\n  //                       case 'subtraction': \n  //                         operation = ' - '; \n  //                         calculatedResult = a - b;\n  //                         break;\n  //                       case 'multiplication': \n  //                         operation = ' × '; \n  //                         calculatedResult = a * b;\n  //                         break;\n  //                       case 'division': \n  //                         operation = ' ÷ '; \n  //                         calculatedResult = Math.round(a / b);\n  //                         break;\n  //                       case 'mixedMath':\n  //                         const op = pair[2];\n  //                         operation = op === 'addition' ? ' + ' : ' - ';\n  //                         calculatedResult = op === 'addition' ? a + b : a - b;\n  //                         break;\n  //                       default:\n  //                         operation = ' ? ';\n  //                         calculatedResult = correctAns;\n  //                     }\n\n  //                     return (\n  //                       <div key={index} \n  //                            style={{\n  //                              padding: '8px 12px',\n  //                              margin: '5px 0',\n  //                              borderRadius: '5px',\n  //                              backgroundColor: isCorrect ? '#d4edda' : '#f8d7da',\n  //                              border: `1px solid ${isCorrect ? '#c3e6cb' : '#f5c6cb'}`\n  //                            }}>\n  //                         <div style={{ fontWeight: 'bold' }}>\n  //                           Q{index + 1}: {a}{operation}{b} = {calculatedResult}\n  //                         </div>\n  //                         <div style={{ fontSize: '14px', marginTop: '4px' }}>\n  //                           <span>Your answer: {userAns} | </span>\n  //                           <span>Correct: {correctAns} | </span>\n  //                           <span style={{ fontWeight: 'bold', color: isCorrect ? '#155724' : '#721c24' }}>\n  //                             {isCorrect ? '✓' : '✗'}\n  //                           </span>\n  //                         </div>\n  //                       </div>\n  //                     );\n  //                   })}\n  //                 </div>\n  //               </div>\n  //             </div>\n  //           ) : (\n  //             // Standard result display for other game types\n  //             <div style={{ marginBottom: '20px' }}>\n  //               <div style={{ marginBottom: '10px' }}>\n  //                 <span className=\"avc-detail-label\">Your Answer: </span>\n  //                 <span className=\"avc-detail-value\">{userAnswer || 'No answer provided'}</span>\n  //               </div>\n  //               <div style={{ marginBottom: '10px' }}>\n  //                 <span className=\"avc-detail-label\">Correct Answer: </span>\n  //                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\n  //               </div>\n  //             </div>\n  //           )}\n\n  //           <div style={{ \n  //             padding: '10px',\n  //             borderRadius: '5px',\n  //             backgroundColor: '#f8f9fa',\n  //             textAlign: 'center',\n  //             marginBottom: '20px'\n  //           }}>\n  //             <span className=\"avc-detail-label\">Score: </span>\n  //             <span style={{\n  //               fontSize: '18px',\n  //               fontWeight: 'bold',\n  //               color: result.score > 0 ? '#28a745' : '#dc3545'\n  //             }}>\n  //               {result.score > 0 ? \"+\" : \"\"}{result.score}\n  //               {result.maxScore > 1 && ` of ${result.maxScore}`}\n  //             </span>\n  //           </div>\n  //         </div>\n\n  //         <div className=\"avc-result-actions\" style={{ \n  //           display: 'flex', \n  //           gap: '10px', \n  //           justifyContent: 'center',\n  //           flexWrap: 'wrap'\n  //         }}>\n  //           <button \n  //             onClick={() => {\n  //               console.log('Try Again clicked');\n  //               resetGame();\n  //               setTimeout(() => {\n  //                 startGame();\n  //               }, 100);\n  //             }}\n  //             style={{\n  //               backgroundColor: '#ff8c00',\n  //               color: 'white',\n  //               border: 'none',\n  //               padding: '12px 24px',\n  //               borderRadius: '5px',\n  //               fontSize: '16px',\n  //               cursor: 'pointer',\n  //               display: 'flex',\n  //               alignItems: 'center',\n  //               gap: '8px'\n  //             }}\n  //           >\n  //             <span>🔄</span>\n  //             <span>Try Again</span>\n  //           </button>\n\n  //           <button \n  //             onClick={() => {\n  //               console.log('Dashboard clicked');\n  //               resetGame();\n  //             }}\n  //             style={{\n  //               backgroundColor: '#6c5ce7',\n  //               color: 'white',\n  //               border: 'none',\n  //               padding: '12px 24px',\n  //               borderRadius: '5px',\n  //               fontSize: '16px',\n  //               cursor: 'pointer',\n  //               display: 'flex',\n  //               alignItems: 'center',\n  //               gap: '8px'\n  //             }}\n  //           >\n  //             <span>🏠</span>\n  //             <span>Dashboard</span>\n  //           </button>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   );\n  // };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [appState === 'setup' && renderSetup(), appState === 'game' && renderGame(), appState === 'result' && renderResult()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 6382,\n    columnNumber: 5\n  }, this);\n};\n_s(AvecusApp, \"wr2A8BnD32VJxAGQD4AygfLQuEA=\", false, function () {\n  return [useNavigate];\n});\n_c = AvecusApp;\nexport default AvecusApp;\n\n// dfjdfjzjhdifzsidh tfideifhysidjv hkjz ddhvxhcpioofuhydfhgsdffvioodznfv;oidfgvnse\n\n// mgvicnbnnd gdfngdnfkjgn kjdfgjkdkjfgjhykhjkhjkkoudhfoigh idf hgidfogdf bjdbfjbbudfbvuijsdnfjbdjkfbndnfbjncivbn\n\n// 4fhg48h694fg6h4f4gh4f46ghghgh198\nvar _c;\n$RefreshReg$(_c, \"AvecusApp\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Netflix","ThreeDot","bdaLogo","jsxDEV","_jsxDEV","AvecusApp","_s","navigate","appState","setAppState","gameType","setGameType","difficulty","setDifficulty","firstDigit","setFirstDigit","secondDigit","setSecondDigit","speed","setSpeed","count","setCount","numbers","setNumbers","userAnswer","setUserAnswer","currentIndex","setCurrentIndex","showingNumbers","setShowingNumbers","result","setResult","correct","actualAnswer","score","targetNumber","setTargetNumber","missingIndices","setMissingIndices","symbols","setSymbols","comparisonPairs","setComparisonPairs","showConfirmDialog","setShowConfirmDialog","currentQuestionIndex","setCurrentQuestionIndex","questionAnswers","setQuestionAnswers","currentQuestionAnswer","setCurrentQuestionAnswer","questionTimer","setQuestionTimer","timeRemaining","setTimeRemaining","gameElapsedTime","setGameElapsedTime","availableQuestions","setAvailableQuestions","Set","autoSubmitTimer","setAutoSubmitTimer","additionTimer","setAdditionTimer","additionTimeRemaining","setAdditionTimeRemaining","showAdditionAnswer","setShowAdditionAnswer","additionNumbers","setAdditionNumbers","additionCurrentIndex","setAdditionCurrentIndex","additionShowingNumbers","setAdditionShowingNumbers","additionIndividualTimer","setAdditionIndividualTimer","beepInterval","setBeepInterval","totalGameTime","setTotalGameTime","gameStartTime","setGameStartTime","totalGameTimer","setTotalGameTimer","additionCurrentTimer","setAdditionCurrentTimer","subtractionCurrentTimer","setSubtractionCurrentTimer","mixedMathTimer","setMixedMathTimer","subtractionNumbers","setSubtractionNumbers","subtractionCurrentIndex","setSubtractionCurrentIndex","subtractionShowingNumbers","setSubtractionShowingNumbers","showSubtractionAnswer","setShowSubtractionAnswer","subtractionTimeRemaining","setSubtractionTimeRemaining","subtractionTimer","setSubtractionTimer","gameIntervalTimer","setGameIntervalTimer","userId","setUserId","isLoading","setIsLoading","error","setError","performanceData","setPerformanceData","totalGames","totalCorrect","totalScore","gameTypes","dailyStats","history","loading","setLoading","showImage","setShowImage","isInputDisabled","setIsInputDisabled","getQuestionMs","s","Number","safeSeconds","isFinite","Math","max","round","clearInterval","allTimers","forEach","timer","clearTimeout","includes","renderGameWithErrorHandling","length","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","currentPair","debugTimerExpiry","log","GameErrorBoundary","onError","style","textAlign","padding","backgroundColor","color","borderRadius","margin","window","location","reload","border","cursor","marginTop","renderGameEnhanced","alert","additionalCSS","additionalResultCSS","combinedCSS","generateSubtractionNumbers","nums","digits","firstNum","floor","random","push","remaining","i","remainingSlots","maxForThisSlot","num","min","checkSubtractionAnswer","reduce","acc","index","parseInt","resultData","toString","totalQuestions","correctCount","accuracy","updatePerformanceData","correctAnswers","comparisonPairsLength","autoSubmitWithCapturedState","checkAllAnswersForAutoSubmit","answers","actualAnswers","expectedCount","map","a","b","operation","normalizedAnswers","filter","userAns","idx","cleanUserAns","String","replace","toLowerCase","cleanCorrectAns","isMatch","userNum","parseFloat","correctNum","isNaN","abs","isCorrect","toFixed","userAnswers","timestamp","Date","now","setTimeout","finalAnswers","trim","timersToGlear","e","message","playBeep","type","audioContext","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","setValueAtTime","currentTime","gain","exponentialRampToValueAtTime","start","stop","oscillator2","gainNode2","startAdditionIntervalDisplay","currentIdx","timerInterval","setInterval","prev","interval","startSubtractionIntervalDisplay","generateMixedMathNumbers","digit1","startingNumber","value","runningSum","wouldBeNegative","isSubtract","startAdditionSequentialDisplay","timePerNumber","API_URL","token","localStorage","getItem","deviceId","get","headers","Authorization","then","response","data","fetchUserData","catch","err","removeItem","loadLocalData","savedData","JSON","parse","uid","emptyData","setItem","stringify","timerId","post","gameModes","label","getCurrentDateString","getFullYear","getMonth","padStart","getDate","generateNumbers","newNumbers","generateSymbols","Array","fill","generateComparisonPairs","pairs","num1","num2","startGlobalGameTimer","totalTime","hasTriggeredExpiry","gameTimer","newElapsed","newRemaining","intervalMs","currentIntervalIndex","maxAvailableQuestion","newAvailable","add","allAvailable","autoSubmitAllAnswers","checkAllAnswers","forceEndGame","currentAnswer","generateSubtractionPairs","digit2","minFirst","maxFirst","generateDivisionPairs","maxDividend","minDividend","maxMultiplier","minMultiplier","ceil","multiplier","generateMultiplicationPairs","generateMixedMathPairs","startGame","generatedNumbers","mixedNumbers","startMixedMathDisplay","firstNumber","subsequentNumbers","remainingValue","remainingPositions","maxForThisPosition","maxValue","nextNum","baseNumber","divisors","j","step","_","missing","totalMissing","baseFactor","start2","slice","showNumbersSequentially","checkMixedMathAnswer","numData","startAdditionTimer","beepTimer","newTime","checkAdditionAnswer","correctSum","sum","showCorrectAdditionAnswer","startQuestionTimer","handleQuestionTimeout","submitCurrentQuestion","newAnswers","nextIndex","handleKeyboardInput","preventDefault","raw","target","sanitized","navigateToQuestion","questionIndex","has","handleNumberPadInput","event","stopPropagation","startsWith","NumberPad","position","zIndex","marginBottom","fontWeight","fontSize","animation","onMouseDown","pointerEvents","opacity","disabled","handleNumberPadInputFixed","newValue","showPairsSequentially","checkAnswer","_userCounts$","_userCounts$2","maxScore","subtractionAnswers","split","correctSubtractionAnswers","join","every","ans","multiplicationAnswers","correctMultiplicationAnswers","divisionAnswers","correctDivisionAnswers","totalSum","totalDifference","totalProduct","product","totalQuotient","quotient","n","patternStep","reverse","missingNumbers","sort","oddCount","evenCount","userCounts","userOdd","userEven","comparisons","correctComparisons","c","endNumber","associations","correctAssociations","additionalData","today","prevData","newData","plays","unshift","date","toISOString","resetGame","formatDate","dateString","toLocaleDateString","weekday","month","day","clearPerformanceData","delete","getDisplayText","getInstructionText","getPlaceholderText","goToStats","state","goToLogin","handleLogout","renderLoginState","href","renderSetup","src","alt","onChange","mode","val","onFocus","select","placeholder","renderGame","autoFocus","currentNum","operatorSymbol","currentInterval","timeInCurrentInterval","timeLeftInInterval","width","_questionAnswers$inde","onKeyDown","key","inputMode","blur","readOnly","onTouchStart","caretColor","renderResult","top","left","right","bottom","display","alignItems","justifyContent","minWidth","isDetailedResult","isArray","boxSizing","maxWidth","maxHeight","overflow","boxShadow","borderBottom","undefined","pair","correctAnswer","calculatedResult","op","gridTemplateColumns","gap","borderTop","flexWrap","_c","$RefreshReg$"],"sources":["A:/AI_LOGS/hosting_1/GIT_H3/FrontendX/src/components/home/index_x.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"../../styles/SetUp_State/index2.css\"; // Ensure this path is correct\r\nimport axios from 'axios'; // Make sure axios is installed\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Netflix from \"../../components/home/netflix\";\r\nimport { ThreeDot } from 'react-loading-indicators';\r\nimport bdaLogo from './BDA-avc.png'; // Adjust the path as necessary\r\n\r\n\r\nconst AvecusApp = () => {\r\n  const navigate = useNavigate();\r\n  // App states (unchanged)\r\n  const [appState, setAppState] = useState('setup');\r\n  const [gameType, setGameType] = useState('multiplication');\r\n  const [difficulty, setDifficulty] = useState('single');\r\n  const [firstDigit, setFirstDigit] = useState(1);\r\n  const [secondDigit, setSecondDigit] = useState(1);\r\n  const [speed, setSpeed] = useState(2);\r\n  const [count, setCount] = useState(10);\r\n\r\n\r\n  // Game data (unchanged)\r\n  const [numbers, setNumbers] = useState([]);\r\n  const [userAnswer, setUserAnswer] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [showingNumbers, setShowingNumbers] = useState(false);\r\n  const [result, setResult] = useState({ correct: false, actualAnswer: '', score: 0 });\r\n  const [targetNumber, setTargetNumber] = useState(null);\r\n  const [missingIndices, setMissingIndices] = useState([]);\r\n  const [symbols, setSymbols] = useState([]);\r\n  const [comparisonPairs, setComparisonPairs] = useState([]);\r\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n  \r\n// With these:\r\nconst [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\nconst [questionAnswers, setQuestionAnswers] = useState([]);\r\nconst [currentQuestionAnswer, setCurrentQuestionAnswer] = useState('');\r\nconst [questionTimer, setQuestionTimer] = useState(null);\r\nconst [timeRemaining, setTimeRemaining] = useState(0);\r\nconst [gameElapsedTime, setGameElapsedTime] = useState(0);\r\nconst [availableQuestions, setAvailableQuestions] = useState(new Set([0])); // Questions user can access\r\nconst [autoSubmitTimer, setAutoSubmitTimer] = useState(null);\r\n\r\n    // 1. ADD ADDITION GAME STATE VARIABLES (add these with your other useState)\r\nconst [additionTimer, setAdditionTimer] = useState(null);\r\nconst [additionTimeRemaining, setAdditionTimeRemaining] = useState(0);\r\nconst [showAdditionAnswer, setShowAdditionAnswer] = useState(false);\r\nconst [additionNumbers, setAdditionNumbers] = useState([]);\r\n\r\nconst [additionCurrentIndex, setAdditionCurrentIndex] = useState(0);\r\nconst [additionShowingNumbers, setAdditionShowingNumbers] = useState(true);\r\nconst [additionIndividualTimer, setAdditionIndividualTimer] = useState(null);\r\n\r\nconst [beepInterval, setBeepInterval] = useState(null);\r\n\r\nconst [totalGameTime, setTotalGameTime] = useState(0); // Total time for entire game\r\nconst [gameStartTime, setGameStartTime] = useState(null); // When game started\r\nconst [totalGameTimer, setTotalGameTimer] = useState(null); // Global game timer\r\n\r\nconst [additionCurrentTimer, setAdditionCurrentTimer] = useState(0);\r\nconst [subtractionCurrentTimer, setSubtractionCurrentTimer] = useState(0);\r\nconst [mixedMathTimer, setMixedMathTimer] = useState(0);\r\n\r\n// 2. ADD new state variables for subtraction display\r\nconst [subtractionNumbers, setSubtractionNumbers] = useState([]);\r\nconst [subtractionCurrentIndex, setSubtractionCurrentIndex] = useState(0);\r\nconst [subtractionShowingNumbers, setSubtractionShowingNumbers] = useState(true);\r\nconst [showSubtractionAnswer, setShowSubtractionAnswer] = useState(false);\r\nconst [subtractionTimeRemaining, setSubtractionTimeRemaining] = useState(0);\r\nconst [subtractionTimer, setSubtractionTimer] = useState(null);\r\nconst [gameIntervalTimer, setGameIntervalTimer] = useState(null);\r\n\r\n  // Auth state\r\n  const [userId, setUserId] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Performance tracking\r\n  const [performanceData, setPerformanceData] = useState({\r\n    totalGames: 0,\r\n    totalCorrect: 0,\r\n    totalScore: 0,\r\n    gameTypes: {},\r\n    dailyStats: {},\r\n    history: []\r\n  });\r\n\r\n  const [loading, setLoading] = useState(true); // Add loading state\r\n  const [showImage, setShowImage] = useState(false);\r\n\r\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\r\n\r\n\r\n// Always use a safe, positive duration for timers (ms)\r\nconst getQuestionMs = () => {\r\n  const s = Number(speed);\r\n  const safeSeconds = !Number.isFinite(s) || s <= 0 ? 1 : s; // default 1s if invalid/0\r\n  return Math.max(100, Math.round(safeSeconds * 1000));\r\n};\r\n\r\n// useEffect(() => {\r\n//   return () => {\r\n//     if (questionTimer) clearInterval(questionTimer);\r\n//     if (additionTimer) clearInterval(additionTimer);\r\n//     if (beepInterval) clearInterval(beepInterval);\r\n//   };\r\n// }, [questionTimer, additionTimer, beepInterval]);\r\n\r\n// 9. Additional cleanup in useEffect\r\nuseEffect(() => {\r\n  return () => {\r\n    // Cleanup all timers on component unmount\r\n    if (questionTimer) clearInterval(questionTimer);\r\n    if (additionTimer) clearInterval(additionTimer);\r\n    if (totalGameTimer) clearInterval(totalGameTimer);\r\n    if (beepInterval) clearInterval(beepInterval);\r\n  };\r\n  }, [questionTimer, additionTimer, totalGameTimer, beepInterval]);\r\n\r\n//   useEffect(() => {\r\n//   if (appState === 'result' && !result) {\r\n//     console.warn('Result state without result data - staying in setup');\r\n//     setAppState('setup');\r\n//   }\r\n// }, [appState, result]);\r\n\r\n// 5. ADD this useEffect to ensure proper cleanup:\r\nuseEffect(() => {\r\n  return () => {\r\n    // Cleanup function for component unmount\r\n    const allTimers = [\r\n      questionTimer, additionTimer, totalGameTimer, \r\n      beepInterval, autoSubmitTimer, gameIntervalTimer\r\n    ];\r\n    \r\n    allTimers.forEach(timer => {\r\n      if (timer) {\r\n        clearInterval(timer);\r\n        clearTimeout(timer);\r\n      }\r\n    });\r\n  };\r\n}, []); // Empty dependency array - runs only on unmount\r\n\r\nuseEffect(() => {\r\n  // Set appropriate defaults when game type changes\r\n  if (gameType === 'subtraction') {\r\n    // For subtraction, default to double digits\r\n    if (firstDigit === 1) {\r\n      setFirstDigit(2);\r\n      setSecondDigit(2);\r\n      setDifficulty('double');\r\n    }\r\n  } else if (!['multiplication', 'division'].includes(gameType)) {\r\n    // For other games (except multiplication/division), default to single digits\r\n    if (firstDigit === 0 || firstDigit === '') {\r\n      setFirstDigit(1);\r\n      setSecondDigit(1);\r\n      setDifficulty('single');\r\n    }\r\n  }\r\n}, [gameType]);\r\n\r\n\r\nconst renderGameWithErrorHandling = () => {\r\n  try {\r\n    // Your existing renderGame logic here, but wrap math operations in try-catch\r\n    \r\n    // For math operation games - enhanced error handling\r\n    if (['multiplication', 'division'].includes(gameType)) {\r\n      if (!comparisonPairs || comparisonPairs.length === 0) {\r\n        console.error('No comparison pairs available');\r\n        return (\r\n          <div className=\"avc-game-container\">\r\n            <div className=\"error-message\">\r\n              <h2>Game Error</h2>\r\n              <p>Unable to load questions. Please try again.</p>\r\n              <button onClick={() => setAppState('setup')} className=\"avc-btn\">\r\n                Back to Setup\r\n              </button>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      const currentPair = comparisonPairs[currentQuestionIndex];\r\n      if (!currentPair || currentPair.length < 2) {\r\n        console.error('Invalid current pair:', currentPair);\r\n        return (\r\n          <div className=\"avc-game-container\">\r\n            <div className=\"error-message\">\r\n              <h2>Question Error</h2>\r\n              <p>Invalid question data. Returning to setup.</p>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      // Your existing math operations rendering logic continues here...\r\n      // (Keep the rest of your renderGame function as it was)\r\n    }\r\n    \r\n    // Continue with rest of renderGame function...\r\n  } catch (error) {\r\n    console.error('Error in renderGame:', error);\r\n    return (\r\n      <div className=\"avc-game-container\">\r\n        <div className=\"error-message\">\r\n          <h2>Rendering Error</h2>\r\n          <p>An error occurred while loading the game.</p>\r\n          <button onClick={() => setAppState('setup')} className=\"avc-btn\">\r\n            Back to Setup\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\n// FIX 6: Additional debugging and monitoring for timer expiry\r\nconst debugTimerExpiry = () => {\r\n  console.log('=== TIMER EXPIRY DEBUG ===');\r\n  console.log('Current app state:', appState);\r\n  console.log('Has comparison pairs:', !!comparisonPairs?.length);\r\n  console.log('Current question index:', currentQuestionIndex);\r\n  console.log('Question answers:', questionAnswers);\r\n  console.log('Current question answer:', currentQuestionAnswer);\r\n  console.log('Time remaining:', timeRemaining);\r\n  console.log('Game elapsed time:', gameElapsedTime);\r\n};\r\n\r\n// FIX 7: Enhanced monitoring useEffect - ADD THIS TO YOUR COMPONENT\r\n// useEffect(() => {\r\n//   // Monitor app state changes\r\n//   console.log('App state changed to:', appState);\r\n  \r\n//   if (appState === 'game' && timeRemaining <= 0 && totalGameTimer === null) {\r\n//     console.log('DETECTED: Game state but no time remaining and no active timer');\r\n//     console.log('This might be the white screen issue - forcing result check');\r\n    \r\n//     // Check if we have valid game data\r\n//     if (comparisonPairs && comparisonPairs.length > 0) {\r\n//       console.log('Valid game data found - calling forceEndGame');\r\n//       forceEndGame();\r\n//     } else {\r\n//       console.log('No valid game data - returning to setup');\r\n//       setAppState('setup');\r\n//     }\r\n//   }\r\n// }, [appState, timeRemaining, totalGameTimer, comparisonPairs]);\r\n\r\n// FIX 8: Add error boundary component for better error handling\r\nconst GameErrorBoundary = ({ children, onError }) => {\r\n  try {\r\n    return children;\r\n  } catch (error) {\r\n    console.error('Game Error Boundary caught error:', error);\r\n    onError && onError(error);\r\n    return (\r\n      <div className=\"avc-game-container\">\r\n        <div className=\"error-message\" style={{\r\n          textAlign: 'center',\r\n          padding: '20px',\r\n          backgroundColor: '#f8d7da',\r\n          color: '#721c24',\r\n          borderRadius: '5px',\r\n          margin: '20px'\r\n        }}>\r\n          <h2>Game Error</h2>\r\n          <p>An unexpected error occurred. Please refresh the page and try again.</p>\r\n          <button \r\n            onClick={() => window.location.reload()} \r\n            style={{\r\n              backgroundColor: '#dc3545',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '10px 20px',\r\n              borderRadius: '5px',\r\n              cursor: 'pointer',\r\n              marginTop: '10px'\r\n            }}\r\n          >\r\n            Refresh Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\n// FIX 9: Enhanced renderGame with white screen prevention\r\nconst renderGameEnhanced = () => {\r\n  // Add white screen detection\r\n  if (appState === 'game' && (!comparisonPairs || comparisonPairs.length === 0) && \r\n      ['multiplication', 'division'].includes(gameType)) {\r\n    console.log('WHITE SCREEN DETECTED: No comparison pairs in game state');\r\n    return (\r\n      <div className=\"avc-game-container\">\r\n        <div className=\"loading-message\">\r\n          <h2>Loading Questions...</h2>\r\n          <p>Please wait while we prepare your questions.</p>\r\n          <button \r\n            onClick={() => setAppState('setup')}\r\n            style={{\r\n              backgroundColor: '#6c5ce7',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '10px 20px',\r\n              borderRadius: '5px',\r\n              cursor: 'pointer',\r\n              marginTop: '10px'\r\n            }}\r\n          >\r\n            Back to Setup\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Your existing renderGame logic goes here...\r\n  // But wrap it in the error boundary\r\n  return (\r\n    <GameErrorBoundary onError={(error) => {\r\n      console.error('Render error:', error);\r\n      setAppState('setup');\r\n      alert('A rendering error occurred. Returning to setup.');\r\n    }}>\r\n      {/* Your existing renderGame content */}\r\n    </GameErrorBoundary>\r\n  );\r\n};\r\n\r\nconst additionalCSS = `\r\n/* Fix number pad z-index and interaction issues */\r\n.number-pad {\r\n  position: relative !important;\r\n  z-index: 1000 !important;\r\n  pointer-events: auto !important;\r\n  isolation: isolate; /* Creates new stacking context */\r\n}\r\n\r\n.number-btn {\r\n  pointer-events: auto !important;\r\n  position: relative !important;\r\n  z-index: 1001 !important;\r\n  user-select: none !important;\r\n  touch-action: manipulation !important; /* Better mobile touch handling */\r\n}\r\n\r\n/* Ensure parent containers don't block events */\r\n.math-question-display {\r\n  position: relative !important;\r\n}\r\n\r\n.answer-input-section {\r\n  position: relative !important;\r\n  z-index: 999 !important;\r\n}\r\n\r\n/* Fix any overlapping issues */\r\n.avc-game-container {\r\n  position: relative !important;\r\n  overflow: visible !important;\r\n}\r\n\r\n/* Remove any conflicting pointer-events rules */\r\n.overlapping-class {\r\n  pointer-events: none !important;\r\n}\r\n\r\n/* Ensure buttons are always clickable */\r\n.number-pad * {\r\n  pointer-events: auto !important;\r\n}\r\n\r\n/* Fix button active states */\r\n.number-btn:active {\r\n  transform: scale(0.95) !important;\r\n  transition: transform 0.1s ease !important;\r\n}\r\n\r\n/* Mobile touch improvements */\r\n@media (max-width: 768px) {\r\n  .number-btn {\r\n    min-height: 50px !important;\r\n    min-width: 50px !important;\r\n    font-size: 18px !important;\r\n  }\r\n}\r\n  /* Background watermark */\r\n.avc-page-background::before,\r\n.avc-game-container::before,\r\n.avc-result-screen-container::before {\r\n  content: \"BRAIN DEVELOPMENT ACADEMY\";\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) rotate(-45deg);\r\n  font-size: clamp(2rem, 8vw, 6rem);\r\n  font-weight: 100;\r\n  color: rgba(0, 0, 0, 0.03);\r\n  z-index: -1;\r\n  pointer-events: none;\r\n  white-space: nowrap;\r\n  letter-spacing: 0.3em;\r\n  text-transform: uppercase;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n\r\n.dark-theme .avc-page-background::before,\r\n.dark-theme .avc-game-container::before,\r\n.dark-theme .avc-result-screen-container::before {\r\n  color: rgba(255, 255, 255, 0.03);\r\n}\r\n.number-btn.disabled {\r\n  opacity: 0.5 !important;\r\n  cursor: not-allowed !important;\r\n  pointer-events: none !important;\r\n}\r\n\r\n.number-btn:not(.disabled):hover {\r\n  background-color: #5a67d8 !important;\r\n  transform: scale(1.05) !important;\r\n}\r\n\r\n.timer-expired-message {\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% { opacity: 1; }\r\n  50% { opacity: 0.7; }\r\n  100% { opacity: 1; }\r\n}\r\n`;\r\n\r\n// 7. Additional CSS to ensure result screen stays visible:\r\nconst additionalResultCSS = `\r\n.avc-result-screen-container {\r\n  position: fixed !important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  right: 0 !important;\r\n  bottom: 0 !important;\r\n  z-index: 9999 !important;\r\n  background-color: rgba(0, 0, 0, 0.8) !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n  pointer-events: auto !important;\r\n}\r\n\r\n.avc-result-card {\r\n  background-color: white !important;\r\n  padding: 20px !important;\r\n  border-radius: 10px !important;\r\n  max-width: 90vw !important;\r\n  max-height: 90vh !important;\r\n  overflow: auto !important;\r\n  min-width: 300px !important;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5) !important;\r\n  pointer-events: auto !important;\r\n  position: relative !important;\r\n}\r\n\r\n/* Ensure no other elements can interfere */\r\n.avc-result-screen-container * {\r\n  pointer-events: auto !important;\r\n}\r\n`;\r\n\r\n// Add the additional CSS to your existing additionalCSS\r\nconst combinedCSS = additionalCSS + additionalResultCSS;\r\n\r\nconst generateSubtractionNumbers = () => {\r\n  const nums = [];\r\n  const digits = firstDigit || 1;\r\n  \r\n  // Generate first (largest) number\r\n  let firstNum;\r\n  if (digits === 1) firstNum = Math.floor(Math.random() * 5) + 5; // 5-9\r\n  else if (digits === 2) firstNum = Math.floor(Math.random() * 50) + 50; // 50-99\r\n  else if (digits === 3) firstNum = Math.floor(Math.random() * 500) + 500; // 500-999\r\n  else if (digits === 4) firstNum = Math.floor(Math.random() * 5000) + 5000;\r\n  else if (digits === 5) firstNum = Math.floor(Math.random() * 50000) + 50000;\r\n  else if (digits === 6) firstNum = Math.floor(Math.random() * 500000) + 500000;\r\n  \r\n  nums.push(firstNum);\r\n  \r\n  let remaining = firstNum * 0.8; // Keep 20% buffer to ensure positive result\r\n  \r\n  // Generate remaining numbers that won't exceed the buffer\r\n  for (let i = 1; i < count; i++) {\r\n    const remainingSlots = count - i;\r\n    const maxForThisSlot = Math.floor(remaining / remainingSlots);\r\n    \r\n    let num;\r\n    if (digits === 1) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 9);\r\n    else if (digits === 2) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 99);\r\n    else if (digits === 3) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 999);\r\n    else if (digits === 4) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 9999);\r\n    else if (digits === 5) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 99999);\r\n    else if (digits === 6) num = Math.min(Math.floor(Math.random() * maxForThisSlot) + 1, 999999);\r\n    \r\n    num = Math.max(1, num); // Ensure at least 1\r\n    nums.push(num);\r\n    remaining -= num;\r\n  }\r\n  \r\n  return nums;\r\n};\r\n\r\nconst checkSubtractionAnswer = () => {\r\n  // Calculate by subtracting all numbers from the first\r\n  const result = subtractionNumbers.reduce((acc, num, index) => {\r\n    return index === 0 ? num : acc - num;\r\n  }, 0);\r\n  \r\n  const correct = parseInt(userAnswer) === result;\r\n  const score = correct ? 2 : -1;\r\n  \r\n  // Create result object that matches the expected structure\r\n  const resultData = {\r\n    correct,\r\n    actualAnswer: result.toString(),\r\n    score,\r\n    gameType: 'subtraction',\r\n    userAnswer: userAnswer, // Add user's answer for display\r\n    totalQuestions: 1,\r\n    correctCount: correct ? 1 : 0,\r\n    accuracy: correct ? '100%' : '0%'\r\n  };\r\n\r\n  updatePerformanceData(correct, score, null, {\r\n  totalQuestions: 1,\r\n  correctAnswers: correct ? 1 : 0,\r\n  accuracy: correct ? '100%' : '0%'\r\n});\r\n\r\n  \r\n  setResult(resultData);\r\n  updatePerformanceData(correct, score);\r\n  setAppState('result');\r\n};\r\n\r\n\r\nuseEffect(() => {\r\n  // Whenever isInputDisabled becomes true (time expired), capture current state\r\n  if (isInputDisabled && timeRemaining <= 0 && appState === 'game') {\r\n    console.log('=== TIME EXPIRED - CAPTURING FINAL STATE ===');\r\n    console.log('Captured state:', {\r\n      currentQuestionIndex,\r\n      currentQuestionAnswer,\r\n      questionAnswers: [...questionAnswers],\r\n      comparisonPairsLength: comparisonPairs.length,\r\n      gameType,\r\n      count,\r\n      speed\r\n    });\r\n    \r\n    // Call auto-submit with current state\r\n    autoSubmitWithCapturedState();\r\n  }\r\n}, [isInputDisabled, timeRemaining, appState]);\r\n\r\n\r\n// MODIFIED checkAllAnswersForAutoSubmit - exact copy of checkAllAnswers but with console logging\r\nconst checkAllAnswersForAutoSubmit = (answers) => {\r\n  console.log('=== CHECKING ALL ANSWERS - AUTO SUBMIT VERSION ===');\r\n  console.log('Game type:', gameType);\r\n  console.log('User answers (raw):', answers);\r\n  console.log('Comparison pairs:', comparisonPairs);\r\n  \r\n  let correctCount = 0;\r\n  let actualAnswers = [];\r\n  \r\n  const expectedCount = comparisonPairs.length;\r\n  \r\n  // Ensure we have valid comparison pairs\r\n  if (!comparisonPairs || comparisonPairs.length === 0) {\r\n    console.error('No comparison pairs available');\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  // Calculate correct answers based on game type\r\n  try {\r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = a - b;\r\n          console.log(`Question ${index + 1}: ${a} - ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'multiplication':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = a * b;\r\n          console.log(`Question ${index + 1}: ${a} × ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'division':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = Math.round(a / b);\r\n          console.log(`Question ${index + 1}: ${a} ÷ ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'mixedMath':\r\n        actualAnswers = comparisonPairs.map(([a, b, operation], index) => {\r\n          const result = operation === 'addition' ? a + b : a - b;\r\n          console.log(`Question ${index + 1}: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      default:\r\n        console.error('Unknown game type for checkAllAnswers:', gameType);\r\n        setAppState('setup');\r\n        return;\r\n    }\r\n  } catch (error) {\r\n    console.error('Error calculating correct answers:', error);\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  // Normalize user answers array\r\n  const normalizedAnswers = [...answers];\r\n  while (normalizedAnswers.length < expectedCount) {\r\n    normalizedAnswers.push('');\r\n  }\r\n  \r\n  console.log('Correct answers calculated:', actualAnswers);\r\n  console.log('Normalized user answers:', normalizedAnswers);\r\n  \r\n  // Compare answers\r\n  correctCount = normalizedAnswers.filter((userAns, idx) => {\r\n    const cleanUserAns = String(userAns || '').replace(/\\s+/g, '').toLowerCase();\r\n    const cleanCorrectAns = String(actualAnswers[idx] || '').replace(/\\s+/g, '').toLowerCase();\r\n    \r\n    let isMatch = false;\r\n    \r\n    if (cleanUserAns === '' || cleanCorrectAns === '') {\r\n      isMatch = false;\r\n    } else {\r\n      isMatch = cleanUserAns === cleanCorrectAns;\r\n      \r\n      if (!isMatch) {\r\n        const userNum = parseFloat(cleanUserAns);\r\n        const correctNum = parseFloat(cleanCorrectAns);\r\n        \r\n        if (!isNaN(userNum) && !isNaN(correctNum)) {\r\n          isMatch = Math.abs(userNum - correctNum) < 0.001;\r\n        }\r\n      }\r\n    }\r\n    \r\n    console.log(`Question ${idx + 1}: \"${cleanUserAns}\" vs \"${cleanCorrectAns}\" = ${isMatch ? 'CORRECT' : 'WRONG'}`);\r\n    \r\n    return isMatch;\r\n  }).length;\r\n  \r\n  const accuracy = expectedCount > 0 ? correctCount / expectedCount : 0;\r\n  const isCorrect = accuracy >= 0.8;\r\n  const score = isCorrect ? 2 : -1;\r\n  \r\n  console.log(`Final Result: ${correctCount}/${expectedCount} correct, accuracy: ${(accuracy * 100).toFixed(1)}%`);\r\n  \r\n  // Create result object\r\n  const resultData = {\r\n    correct: isCorrect,\r\n    actualAnswer: `${correctCount}/${expectedCount} correct`,\r\n    score: score,\r\n    userAnswers: normalizedAnswers,\r\n    correctAnswers: actualAnswers,\r\n    accuracy: (accuracy * 100).toFixed(1) + '%',\r\n    gameType: gameType,\r\n    totalQuestions: expectedCount,\r\n    correctCount: correctCount,\r\n    timestamp: Date.now()\r\n  };\r\n  \r\n  console.log('Setting final result data:', resultData);\r\n  \r\n  // Update performance data\r\n  updatePerformanceData(isCorrect, score, null, {\r\n    totalQuestions: expectedCount,\r\n    correctAnswers: correctCount,\r\n    accuracy: (accuracy * 100).toFixed(1) + '%'\r\n  });\r\n  \r\n  // Set result and change state\r\n  try {\r\n    setResult(resultData);\r\n    \r\n    // Use setTimeout to ensure result is set before changing state\r\n    setTimeout(() => {\r\n      console.log('Transitioning to result state');\r\n      setAppState('result');\r\n    }, 300);\r\n    \r\n  } catch (error) {\r\n    console.error('Error setting result:', error);\r\n    setAppState('setup');\r\n  }\r\n};\r\n\r\n// NEW FUNCTION: Auto-submit using captured state\r\nconst autoSubmitWithCapturedState = () => {\r\n  console.log('=== AUTO-SUBMITTING WITH CAPTURED STATE ===');\r\n  \r\n  // Use current state directly - don't wait for state updates\r\n  const finalAnswers = [...questionAnswers];\r\n  \r\n  // Add current answer\r\n  if (currentQuestionIndex >= 0 && currentQuestionIndex < comparisonPairs.length) {\r\n    finalAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\r\n  }\r\n  \r\n  // Fill remaining with empty strings\r\n  while (finalAnswers.length < count) {\r\n    finalAnswers.push('');\r\n  }\r\n  \r\n  console.log('Final answers:', finalAnswers);\r\n  console.log('Comparison pairs count:', comparisonPairs.length);\r\n  console.log('Game type:', gameType);\r\n  \r\n  // Validate we have game data\r\n  if (!comparisonPairs || comparisonPairs.length === 0) {\r\n    console.error('ERROR: No comparison pairs - something went wrong');\r\n    return; // Exit early, don't go to setup\r\n  }\r\n  \r\n  // Clear all timers\r\n  const timersToGlear = [\r\n    totalGameTimer, beepInterval, autoSubmitTimer, \r\n    questionTimer, gameIntervalTimer\r\n  ];\r\n  \r\n  timersToGlear.forEach(timer => {\r\n    if (timer) {\r\n      try {\r\n        clearInterval(timer);\r\n        clearTimeout(timer);\r\n      } catch (e) {\r\n        console.log('Timer cleanup error:', e.message);\r\n      }\r\n    }\r\n  });\r\n  \r\n  setTotalGameTimer(null);\r\n  setBeepInterval(null);\r\n  setAutoSubmitTimer(null);\r\n  setQuestionTimer(null);\r\n  setGameIntervalTimer(null);\r\n  \r\n  // Process results immediately\r\n  try {\r\n    checkAllAnswersForAutoSubmit(finalAnswers);\r\n  } catch (error) {\r\n    console.error('Error in auto-submit:', error);\r\n  }\r\n};\r\n\r\n\r\n  // Add beep sound function\r\n// const playBeep = () => {\r\n//   try {\r\n//     const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n//     const oscillator = audioContext.createOscillator();\r\n//     const gainNode = audioContext.createGain();\r\n    \r\n//     oscillator.connect(gainNode);\r\n//     gainNode.connect(audioContext.destination);\r\n    \r\n//     oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\r\n//     gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\r\n//     gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\r\n    \r\n//     oscillator.start(audioContext.currentTime);\r\n//     oscillator.stop(audioContext.currentTime + 0.5);\r\n//   } catch (error) {\r\n//     console.log('Beep sound not supported');\r\n//   }\r\n// };   10-09\r\n\r\n// Enhanced beep sound function with different types\r\nconst playBeep = (type = 'normal') => {\r\n  try {\r\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n    const oscillator = audioContext.createOscillator();\r\n    const gainNode = audioContext.createGain();\r\n    \r\n    oscillator.connect(gainNode);\r\n    gainNode.connect(audioContext.destination);\r\n    \r\n    // Different beep types\r\n    switch(type) {\r\n      case 'normal':\r\n        oscillator.frequency.setValueAtTime(600, audioContext.currentTime);\r\n        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);\r\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\r\n        oscillator.start(audioContext.currentTime);\r\n        oscillator.stop(audioContext.currentTime + 0.2);\r\n        break;\r\n        \r\n      case 'warning':\r\n        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\r\n        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\r\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);\r\n        oscillator.start(audioContext.currentTime);\r\n        oscillator.stop(audioContext.currentTime + 0.15);\r\n        break;\r\n        \r\n      case 'urgent':\r\n        // Double beep for urgency\r\n        oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);\r\n        gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);\r\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\r\n        oscillator.start(audioContext.currentTime);\r\n        oscillator.stop(audioContext.currentTime + 0.1);\r\n        \r\n        // Second beep\r\n        setTimeout(() => {\r\n          const oscillator2 = audioContext.createOscillator();\r\n          const gainNode2 = audioContext.createGain();\r\n          oscillator2.connect(gainNode2);\r\n          gainNode2.connect(audioContext.destination);\r\n          oscillator2.frequency.setValueAtTime(1000, audioContext.currentTime);\r\n          gainNode2.gain.setValueAtTime(0.4, audioContext.currentTime);\r\n          gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\r\n          oscillator2.start(audioContext.currentTime);\r\n          oscillator2.stop(audioContext.currentTime + 0.1);\r\n        }, 150);\r\n        break;\r\n        \r\n      case 'final':\r\n        oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);\r\n        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);\r\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);\r\n        oscillator.start(audioContext.currentTime);\r\n        oscillator.stop(audioContext.currentTime + 0.8);\r\n        break;\r\n    }\r\n  } catch (error) {\r\n    console.log('Beep sound not supported');\r\n  }\r\n};\r\n\r\n// 2. REPLACE startAdditionIntervalDisplay function\r\nconst startAdditionIntervalDisplay = (nums) => {\r\n  let currentIdx = 0;\r\n  setAdditionCurrentIndex(0);\r\n  setAdditionCurrentTimer(speed); // Set initial timer display\r\n  \r\n  // Timer countdown for display\r\n  const timerInterval = setInterval(() => {\r\n    setAdditionCurrentTimer(prev => {\r\n      if (prev <= 1) {\r\n        return speed; // Reset to speed when reaching 0\r\n      }\r\n      return prev - 1;\r\n    });\r\n  }, 1000);\r\n  \r\n  // Play beep for first number\r\n  playBeep('normal');\r\n  \r\n  const interval = setInterval(() => {\r\n    if (currentIdx < nums.length - 1) {\r\n      currentIdx++;\r\n      setAdditionCurrentIndex(currentIdx);\r\n      setAdditionCurrentTimer(speed); // Reset timer for new number\r\n      playBeep('normal');\r\n    } else {\r\n      // All numbers shown, now show input\r\n      clearInterval(interval);\r\n      clearInterval(timerInterval);\r\n      setAdditionShowingNumbers(false);\r\n      setShowAdditionAnswer(true);\r\n    }\r\n  }, speed * 1000);\r\n  \r\n  setGameIntervalTimer(interval);\r\n};\r\n\r\n// 3. REPLACE startSubtractionIntervalDisplay function\r\nconst startSubtractionIntervalDisplay = (nums) => {\r\n  let currentIdx = 0;\r\n  setSubtractionCurrentIndex(0);\r\n  setSubtractionCurrentTimer(speed); // Set initial timer display\r\n  \r\n  // Timer countdown for display\r\n  const timerInterval = setInterval(() => {\r\n    setSubtractionCurrentTimer(prev => {\r\n      if (prev <= 1) {\r\n        return speed;\r\n      }\r\n      return prev - 1;\r\n    });\r\n  }, 1000);\r\n  \r\n  playBeep('normal');\r\n  \r\n  const interval = setInterval(() => {\r\n    if (currentIdx < nums.length - 1) {\r\n      currentIdx++;\r\n      setSubtractionCurrentIndex(currentIdx);\r\n      setSubtractionCurrentTimer(speed); // Reset timer for new number\r\n      playBeep('normal');\r\n    } else {\r\n      clearInterval(interval);\r\n      clearInterval(timerInterval);\r\n      setSubtractionShowingNumbers(false);\r\n      setShowSubtractionAnswer(true);\r\n    }\r\n  }, speed * 1000);\r\n  \r\n  setGameIntervalTimer(interval);\r\n};\r\n\r\n// 4. REPLACE generateMixedMathPairs to generate numbers with operations\r\n// const generateMixedMathNumbers = () => {\r\n//   const numbers = [];\r\n//   const digit1 = firstDigit || 1;\r\n  \r\n//   for (let i = 0; i < count; i++) {\r\n//     let num;\r\n    \r\n//     // Generate number based on firstDigit\r\n//     if (digit1 === 1) num = Math.floor(Math.random() * 9) + 1;\r\n//     else if (digit1 === 2) num = Math.floor(Math.random() * 90) + 10;\r\n//     else if (digit1 === 3) num = Math.floor(Math.random() * 900) + 100;\r\n//     else if (digit1 === 4) num = Math.floor(Math.random() * 9000) + 1000;\r\n//     else if (digit1 === 5) num = Math.floor(Math.random() * 90000) + 10000;\r\n//     else if (digit1 === 6) num = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n//     // 50% chance to be negative (subtraction)\r\n//     const isNegative = Math.random() < 0.5;\r\n    \r\n//     numbers.push({\r\n//       value: num,\r\n//       operation: isNegative ? 'subtract' : 'add'\r\n//     });\r\n//   }\r\n  \r\n//   // Ensure first number is always positive to avoid negative results\r\n//   numbers[0].operation = 'add';\r\n  \r\n//   // Check if result would be negative, if so, adjust\r\n//   let runningSum = 0;\r\n//   for (let i = 0; i < numbers.length; i++) {\r\n//     if (numbers[i].operation === 'add') {\r\n//       runningSum += numbers[i].value;\r\n//     } else {\r\n//       runningSum -= numbers[i].value;\r\n//     }\r\n    \r\n//     // If result becomes negative, change this number to addition\r\n//     if (runningSum < 0) {\r\n//       numbers[i].operation = 'add';\r\n//       runningSum += 2 * numbers[i].value; // Add back twice to correct\r\n//     }\r\n//   }\r\n  \r\n//   return numbers;\r\n// };\r\n\r\nconst generateMixedMathNumbers = () => {\r\n  const numbers = [];\r\n  const digit1 = firstDigit || 1;\r\n  \r\n  // Start with a large positive number to ensure final result stays positive\r\n  let startingNumber;\r\n  if (digit1 === 1) startingNumber = Math.floor(Math.random() * 5) + 5; // 5-9\r\n  else if (digit1 === 2) startingNumber = Math.floor(Math.random() * 50) + 50; // 50-99\r\n  else if (digit1 === 3) startingNumber = Math.floor(Math.random() * 500) + 500; // 500-999\r\n  else if (digit1 === 4) startingNumber = Math.floor(Math.random() * 5000) + 5000;\r\n  else if (digit1 === 5) startingNumber = Math.floor(Math.random() * 50000) + 50000;\r\n  else if (digit1 === 6) startingNumber = Math.floor(Math.random() * 500000) + 500000;\r\n  \r\n  numbers.push({\r\n    value: startingNumber,\r\n    operation: 'add'\r\n  });\r\n  \r\n  let runningSum = startingNumber;\r\n  \r\n  for (let i = 1; i < count; i++) {\r\n    let num;\r\n    \r\n    // Generate number based on firstDigit but smaller to avoid negative results\r\n    if (digit1 === 1) num = Math.floor(Math.random() * 4) + 1; // 1-4\r\n    else if (digit1 === 2) num = Math.floor(Math.random() * 30) + 10; // 10-39\r\n    else if (digit1 === 3) num = Math.floor(Math.random() * 200) + 100; // 100-299\r\n    else if (digit1 === 4) num = Math.floor(Math.random() * 2000) + 1000;\r\n    else if (digit1 === 5) num = Math.floor(Math.random() * 20000) + 10000;\r\n    else if (digit1 === 6) num = Math.floor(Math.random() * 200000) + 100000;\r\n    \r\n    // Randomly choose operation, but ensure it won't make result negative\r\n    const wouldBeNegative = (runningSum - num) < 0;\r\n    const isSubtract = Math.random() < 0.5 && !wouldBeNegative;\r\n    \r\n    const operation = isSubtract ? 'subtract' : 'add';\r\n    \r\n    if (operation === 'add') {\r\n      runningSum += num;\r\n    } else {\r\n      runningSum -= num;\r\n    }\r\n    \r\n    numbers.push({\r\n      value: num,\r\n      operation: operation\r\n    });\r\n  }\r\n  \r\n  console.log(`Generated mixed math numbers (final result: ${runningSum}):`, numbers);\r\n  return numbers;\r\n};\r\n\r\n\r\n\r\n\r\nconst startAdditionSequentialDisplay = (nums, timePerNumber) => {\r\n  let currentIdx = 0;\r\n  setAdditionCurrentIndex(0);\r\n  \r\n  const interval = setInterval(() => {\r\n    if (currentIdx < nums.length - 1) {\r\n      currentIdx++;\r\n      setAdditionCurrentIndex(currentIdx);\r\n      \r\n      // Play beep sound when showing new number\r\n      playBeep();\r\n    } else {\r\n      // All numbers shown, now show input\r\n      clearInterval(interval);\r\n      setAdditionShowingNumbers(false);\r\n      setShowAdditionAnswer(true);\r\n    }\r\n  }, timePerNumber);\r\n};\r\n\r\n  // API configuration\r\n  const API_URL = 'http://localhost:5000/api';\r\n  \r\n  // Check authentication on load\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n        const deviceId = localStorage.getItem('deviceId');\r\n\r\n    if (token) {\r\n      console.log(\"Found token, verifying...\");\r\n      axios.get(`${API_URL}/auth/verify`, {\r\n        headers: { Authorization: `${token}`,\r\n      'X-Device-Id': deviceId }\r\n      })\r\n      .then(response => {\r\n        console.log(\"Token verified successfully\", response.data);\r\n        setUserId(response.data.userId);\r\n        fetchUserData(response.data.userId);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Authentication error:\", err);\r\n        localStorage.removeItem('token');\r\n        setIsLoading(false);\r\n        loadLocalData();\r\n      });\r\n    } else {\r\n      console.log(\"No token found, loading local data\");\r\n      loadLocalData();\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n  \r\n  const loadLocalData = () => {\r\n    const savedData = localStorage.getItem('avecusPerformance');\r\n    if (savedData) {\r\n      try {\r\n        setPerformanceData(JSON.parse(savedData));\r\n      } catch (e) {\r\n        console.error(\"Error parsing saved performance data\", e);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const fetchUserData = (uid) => {\r\n    const token = localStorage.getItem('token');\r\n  const deviceId = localStorage.getItem('deviceId');\r\n\r\n    setIsLoading(true);\r\n    axios.get(`${API_URL}/performance/${uid}`, {\r\n      headers: { Authorization: `${token}`,\r\n      'X-Device-Id': deviceId }\r\n    })\r\n      .then(response => {\r\n        if (response.data) {\r\n          console.log(\"Successfully loaded data from server:\", response.data);\r\n          setPerformanceData(response.data);\r\n        } else {\r\n          console.log(\"No data found on server, initializing empty structure\");\r\n          const emptyData = {\r\n            totalGames: 0,\r\n            totalCorrect: 0,\r\n            totalScore: 0,\r\n            gameTypes: {},\r\n            dailyStats: {},\r\n            history: []\r\n          };\r\n          setPerformanceData(emptyData);\r\n        }\r\n        setIsLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error fetching user data:\", err);\r\n        setError(\"Could not load your data. Using local data instead.\");\r\n        loadLocalData();\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (isLoading) return;\r\n    localStorage.setItem('avecusPerformance', JSON.stringify(performanceData));\r\n    console.log(\"Saved to localStorage:\", performanceData);\r\n  const deviceId = localStorage.getItem('deviceId');\r\n    if (userId) {\r\n      const timerId = setTimeout(() => {\r\n        console.log(\"Saving to server for user:\", userId);\r\n        axios.post(`${API_URL}/performance/${userId}`, performanceData, {\r\n          headers: { \r\n            'Content-Type': 'application/json',\r\n            'Authorization': `${localStorage.getItem('token') }`,\r\n              'X-Device-Id': deviceId\r\n           \r\n          }\r\n        })\r\n        .then(response => {\r\n          console.log(\"Successfully saved to server:\", response.data);\r\n        })\r\n        .catch(err => {\r\n          console.error(\"Error saving data to server:\", err);\r\n          setError(\"Failed to save your progress to the server.\");\r\n        });\r\n      }, 2000);\r\n      \r\n      return () => clearTimeout(timerId);\r\n    }\r\n  }, [performanceData, userId, isLoading]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      const savedData = localStorage.getItem('avecusPerformance');\r\n      console.log(\"Data persistence check:\", savedData ? \"Data exists in localStorage\" : \"No data in localStorage\");\r\n    }, 5000);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n  \r\n  // Updated gameModes with the three new math operation games at the top\r\n  const gameModes = [\r\n    { value: 'addition', label: 'Addition ⭐' },\r\n    { value: 'subtraction', label: 'Subtraction ⭐' },\r\n    { value: 'multiplication', label: 'Multiplication ⭐' },\r\n    { value: 'division', label: 'Division ⭐' },\r\n    { value: 'mixedMath', label: 'Addition And Subtraction ⭐' },\r\n\r\n    // { value: 'memory', label: 'Memory Mode' },\r\n\r\n     // Add the new total operation modes\r\n    // { value: 'totalAddition', label: 'Total Addition' },\r\n    // { value: 'totalSubtraction', label: 'Total Subtraction' },\r\n    // { value: 'totalMultiplication', label: 'Total Multiplication' },\r\n    // { value: 'totalDivision', label: 'Total Division' },\r\n    // { value: 'counting', label: 'Counting Mode' },\r\n\r\n    // { value: 'counting', label: 'Counting Mode' },\r\n    // { value: 'pattern', label: 'Pattern Recognition' },\r\n    // { value: 'reverse', label: 'Reverse Counting' },\r\n    // { value: 'missing', label: 'Missing Number' },\r\n    // { value: 'oddeven', label: 'Odd & Even Recognition' },\r\n    // { value: 'multiples', label: 'Multiples & Factors' },\r\n    // { value: 'comparison', label: 'Number Comparison' },\r\n    // { value: 'speed', label: 'Speed Counting' },\r\n    // { value: 'symbol', label: 'Number-Symbol Association' }\r\n  ];\r\n  \r\n  const getCurrentDateString = () => {\r\n    const now = new Date();\r\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\r\n  };\r\n  \r\n  // const generateNumbers = () => {\r\n  //   const newNumbers = [];\r\n  //   for (let i = 0; i < count; i++) {\r\n  //     if (difficulty === 'single') {\r\n  //       newNumbers.push(Math.floor(Math.random() * 10));\r\n  //     } else if (difficulty === 'double') {\r\n  //       newNumbers.push(Math.floor(Math.random() * 90 + 10));\r\n  //     } else {\r\n  //       newNumbers.push(Math.floor(Math.random() * 900 + 100));\r\n  //     }\r\n  //   }\r\n  //   return newNumbers;\r\n  // };\r\n  \r\n  const generateNumbers = () => {\r\n  const newNumbers = [];\r\n  const digits = firstDigit || 1;\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    if (digits === 1) {\r\n      newNumbers.push(Math.floor(Math.random() * 9) + 1);\r\n    } else if (digits === 2) {\r\n      newNumbers.push(Math.floor(Math.random() * 90) + 10);\r\n    } else if (digits === 3) {\r\n      newNumbers.push(Math.floor(Math.random() * 900) + 100);\r\n    } else if (digits === 4) {\r\n      newNumbers.push(Math.floor(Math.random() * 9000) + 1000);\r\n    } else if (digits === 5) {\r\n      newNumbers.push(Math.floor(Math.random() * 90000) + 10000);\r\n    } else if (digits === 6) {\r\n      newNumbers.push(Math.floor(Math.random() * 900000) + 100000);\r\n    }\r\n  }\r\n  return newNumbers;\r\n};\r\n\r\n  const generateSymbols = () => {\r\n    const symbols = ['★', '♦', '♣', '♠', '♥', '▲', '●', '■', '◆', '○'];\r\n    return Array(count).fill().map(() => symbols[Math.floor(Math.random() * symbols.length)]);\r\n  };\r\n  \r\n  const generateComparisonPairs = () => {\r\n    const pairs = [];\r\n    for (let i = 0; i < count; i++) {\r\n      const num1 = Math.floor(Math.random() * 50) + 1;\r\n      const num2 = Math.floor(Math.random() * 50) + 1;\r\n      pairs.push([num1, num2]);\r\n    }\r\n    return pairs;\r\n  };\r\n  \r\n  // Generate number pairs for subtraction, ensuring the first number is larger\r\n// REPLACE your generateSubtractionPairs, generateMultiplicationPairs, and generateDivisionPairs functions:\r\n\r\n// Generate number pairs for subtraction, ensuring the first number is larger\r\n// const generateSubtractionPairs = () => {\r\n//   const pairs = [];\r\n//   // Use 'count' parameter to generate the correct number of questions\r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n//     if (difficulty === 'single') {\r\n//       num1 = Math.floor(Math.random() * 9) + 5;  // Start with at least 5\r\n//       num2 = Math.floor(Math.random() * Math.min(num1, 5)) + 1;\r\n//     } else if (difficulty === 'double') {\r\n//       num1 = Math.floor(Math.random() * 50) + 50; // Start with at least 50\r\n//       num2 = Math.floor(Math.random() * Math.min(num1, 50)) + 1;\r\n//     } else {\r\n//       num1 = Math.floor(Math.random() * 500) + 500; // Start with at least 500\r\n//       num2 = Math.floor(Math.random() * Math.min(num1, 500)) + 1;\r\n//     }\r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   console.log(`Generated ${pairs.length} subtraction pairs:`, pairs); // Debug log\r\n//   return pairs;\r\n// }; 10-09\r\n\r\n// Generate number pairs for multiplication\r\n// const generateMultiplicationPairs = () => {\r\n//   const pairs = [];\r\n//   // Use 'count' parameter to generate the correct number of questions\r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n//     if (difficulty === 'single') {\r\n//       num1 = Math.floor(Math.random() * 9) + 1;\r\n//       num2 = Math.floor(Math.random() * 9) + 1;\r\n//     } else if (difficulty === 'double') {\r\n//       num1 = Math.floor(Math.random() * 12) + 1;\r\n//       num2 = Math.floor(Math.random() * 12) + 1;\r\n//     } else {\r\n//       num1 = Math.floor(Math.random() * 20) + 1;\r\n//       num2 = Math.floor(Math.random() * 20) + 1;\r\n//     }\r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   console.log(`Generated ${pairs.length} multiplication pairs:`, pairs); // Debug log\r\n//   return pairs;\r\n// };\r\n\r\n\r\n\r\n// Generate number pairs for division, ensuring clean division\r\n// const generateDivisionPairs = () => {\r\n//   const pairs = [];\r\n//   // Use 'count' parameter to generate the correct number of questions\r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n//     if (difficulty === 'single') {\r\n//       num2 = Math.floor(Math.random() * 9) + 1;\r\n//       const multiplier = Math.floor(Math.random() * 9) + 1;\r\n//       num1 = num2 * multiplier;\r\n//     } else if (difficulty === 'double') {\r\n//       num2 = Math.floor(Math.random() * 12) + 1;\r\n//       const multiplier = Math.floor(Math.random() * 12) + 1;\r\n//       num1 = num2 * multiplier;\r\n//     } else {\r\n//       num2 = Math.floor(Math.random() * 20) + 1;\r\n//       const multiplier = Math.floor(Math.random() * 20) + 1;\r\n//       num1 = num2 * multiplier;\r\n//     }\r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   console.log(`Generated ${pairs.length} division pairs:`, pairs); // Debug log\r\n//   return pairs;\r\n// };\r\n  \r\n//   const generateMultiplicationPairs = () => {\r\n//   const pairs = [];\r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n//     switch(difficulty) {\r\n//       case 'single':\r\n//         num1 = Math.floor(Math.random() * 9) + 1;\r\n//         num2 = Math.floor(Math.random() * 9) + 1;\r\n//         break;\r\n//       case 'double':\r\n//         num1 = Math.floor(Math.random() * 12) + 1;\r\n//         num2 = Math.floor(Math.random() * 12) + 1;\r\n//         break;\r\n//       case 'triple':\r\n//         num1 = Math.floor(Math.random() * 20) + 1;\r\n//         num2 = Math.floor(Math.random() * 20) + 1;\r\n//         break;\r\n//       case 'singleToDouble':\r\n//         // Single digit numbers that multiply to double digit results\r\n//         num1 = Math.floor(Math.random() * 9) + 2; // 2-10\r\n//         num2 = Math.floor(Math.random() * 9) + 2; // 2-10\r\n//         // Ensure result is double digit\r\n//         while ((num1 * num2) < 10 || (num1 * num2) > 99) {\r\n//           num1 = Math.floor(Math.random() * 9) + 2;\r\n//           num2 = Math.floor(Math.random() * 9) + 2;\r\n//         }\r\n//         break;\r\n//       case 'doubleToSingle':\r\n//         // Double digit first number, single digit second, result is single digit\r\n//         num2 = Math.floor(Math.random() * 9) + 1; // 1-9\r\n//         num1 = Math.floor(Math.random() * 90) + 10; // 10-99\r\n//         break;\r\n//       default:\r\n//         num1 = Math.floor(Math.random() * 9) + 1;\r\n//         num2 = Math.floor(Math.random() * 9) + 1;\r\n//     }\r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   console.log(`Generated ${pairs.length} multiplication pairs:`, pairs);\r\n//   return pairs;\r\n// };10-09\r\n\r\n\r\n// const generateDivisionPairs = () => {\r\n//   const pairs = [];\r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n//     switch(difficulty) {\r\n//       case 'single':\r\n//         num2 = Math.floor(Math.random() * 9) + 1;\r\n//         const multiplier1 = Math.floor(Math.random() * 9) + 1;\r\n//         num1 = num2 * multiplier1;\r\n//         break;\r\n//       case 'double':\r\n//         num2 = Math.floor(Math.random() * 12) + 1;\r\n//         const multiplier2 = Math.floor(Math.random() * 12) + 1;\r\n//         num1 = num2 * multiplier2;\r\n//         break;\r\n//       case 'triple':\r\n//         num2 = Math.floor(Math.random() * 20) + 1;\r\n//         const multiplier3 = Math.floor(Math.random() * 20) + 1;\r\n//         num1 = num2 * multiplier3;\r\n//         break;\r\n//       case 'singleToDouble':\r\n//         // Single digit division resulting in double digit answer\r\n//         num2 = Math.floor(Math.random() * 9) + 1; // 1-9\r\n//         const multiplier4 = Math.floor(Math.random() * 90) + 10; // 10-99\r\n//         num1 = num2 * multiplier4;\r\n//         break;\r\n//       case 'doubleToSingle':\r\n//         // Double digit divided by double digit = single digit\r\n//         const result = Math.floor(Math.random() * 9) + 1; // 1-9\r\n//         num2 = Math.floor(Math.random() * 90) + 10; // 10-99\r\n//         num1 = num2 * result;\r\n//         break;\r\n//       default:\r\n//         num2 = Math.floor(Math.random() * 9) + 1;\r\n//         const multiplier5 = Math.floor(Math.random() * 9) + 1;\r\n//         num1 = num2 * multiplier5;\r\n//     }\r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   console.log(`Generated ${pairs.length} division pairs:`, pairs);\r\n//   return pairs;\r\n// };10-09\r\n\r\n\r\n\r\n// const startGlobalGameTimer = () => {\r\n//   const totalGameTime = speed * count * 1000; // Total time = interval per question × number of questions\r\n//   console.log(`Starting game: ${speed}s per question × ${count} questions = ${totalGameTime/1000}s total`);\r\n  \r\n//   // Clear existing timers\r\n//   if (totalGameTimer) clearInterval(totalGameTimer);\r\n//   if (beepInterval) clearInterval(beepInterval);\r\n//   if (autoSubmitTimer) clearInterval(autoSubmitTimer);\r\n  \r\n//   setGameElapsedTime(0);\r\n//   setTimeRemaining(totalGameTime);\r\n//   setAvailableQuestions(new Set([0])); // Start with only first question available\r\n  \r\n//   // Auto-submit timer for when total time is up\r\n//   const submitTimer = setTimeout(() => {\r\n//     console.log('Total game time up - auto-submitting');\r\n//     forceEndGame();\r\n//   }, totalGameTime);\r\n//   setAutoSubmitTimer(submitTimer);\r\n  \r\n//   // Main game timer - updates every 100ms\r\n//   const gameTimer = setInterval(() => {\r\n//     setGameElapsedTime(prev => {\r\n//       const newElapsed = prev + 100;\r\n//       const newRemaining = totalGameTime - newElapsed;\r\n      \r\n//       // Calculate which questions should be available based on elapsed time\r\n//       const intervalMs = speed * 1000;\r\n//       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\r\n//       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\r\n      \r\n//       // Update available questions\r\n//       const newAvailable = new Set();\r\n//       for (let i = 0; i <= maxAvailableQuestion; i++) {\r\n//         newAvailable.add(i);\r\n//       }\r\n//       setAvailableQuestions(newAvailable);\r\n      \r\n//       // Beep at interval transitions\r\n//       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\r\n//         playBeep('normal');\r\n//       }\r\n      \r\n//       setTimeRemaining(newRemaining);\r\n      \r\n//       if (newRemaining <= 0) {\r\n//         clearInterval(gameTimer);\r\n//         clearTimeout(submitTimer);\r\n//         setTotalGameTimer(null);\r\n//         setAutoSubmitTimer(null);\r\n//         return newElapsed;\r\n//       }\r\n      \r\n//       return newElapsed;\r\n//     });\r\n//   }, 100);\r\n  \r\n//   setTotalGameTimer(gameTimer);\r\n// };\r\n// 18\r\n\r\n// const startGlobalGameTimer = () => {\r\n//   const totalTime = speed * count * 1000;\r\n//   console.log(`Starting timer: ${totalTime}ms - NO AUTO-SUBMIT`);\r\n  \r\n//   // Clear existing timers\r\n\r\n//   setGameElapsedTime(0);\r\n//   setTimeRemaining(totalTime);\r\n//   setAvailableQuestions(new Set([0]));\r\n  \r\n//   // NO AUTO-SUBMIT TIMERS - Remove these lines completely:\r\n//   // const primarySubmitTimer = setTimeout(() => { forceEndGame(); }, totalTime);\r\n//   // const backupSubmitTimer = setTimeout(() => { forceEndGame(); }, totalTime + 500);\r\n//   // const emergencyTimer = setTimeout(() => { handleEmergencyResult(); }, totalTime + 2000);\r\n  \r\n//   // Main game timer - ONLY updates display, never force-submits\r\n//   const gameTimer = setInterval(() => {\r\n//     setGameElapsedTime(prev => {\r\n//       const newElapsed = prev + 100;\r\n//       const newRemaining = totalTime - newElapsed;\r\n      \r\n//       // Update available questions based on time\r\n//       const intervalMs = speed * 1000;\r\n//       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\r\n//       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\r\n      \r\n//       const newAvailable = new Set();\r\n//       for (let i = 0; i <= maxAvailableQuestion; i++) {\r\n//         newAvailable.add(i);\r\n//       }\r\n//       setAvailableQuestions(newAvailable);\r\n      \r\n//       // Play beep at intervals\r\n//       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\r\n//         playBeep('normal');\r\n//       }\r\n      \r\n//       setTimeRemaining(newRemaining);\r\n      \r\n//       // When time reaches zero, just stop the timer - NO FORCE SUBMIT\r\n//       if (newRemaining <= 0) {\r\n//         clearInterval(gameTimer);\r\n//         setTotalGameTimer(null);\r\n        \r\n//         // Optional: Disable input after time expires\r\n//         // You can add UI indication that time is up\r\n//         console.log('Time expired - but allowing user to continue');\r\n//         return newElapsed;\r\n//       }\r\n      \r\n//       return newElapsed;\r\n//     });\r\n//   }, 100);\r\n  \r\n//   setTotalGameTimer(gameTimer);\r\n// };\r\n\r\nconst startGlobalGameTimer = () => {\r\n  const totalTime = speed * count * 1000;\r\n  console.log(`Starting timer: ${totalTime}ms - AUTO-SUBMIT ON EXPIRY`);\r\n  \r\n  setGameElapsedTime(0);\r\n  setTimeRemaining(totalTime);\r\n  setAvailableQuestions(new Set([0]));\r\n  setIsInputDisabled(false);\r\n  \r\n  let hasTriggeredExpiry = false; // Flag to prevent multiple triggers\r\n  \r\n  const gameTimer = setInterval(() => {\r\n    setGameElapsedTime(prev => {\r\n      const newElapsed = prev + 100;\r\n      const newRemaining = totalTime - newElapsed;\r\n      \r\n      // Update available questions during active time\r\n      if (newRemaining > 0) {\r\n        const intervalMs = speed * 1000;\r\n        const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\r\n        const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\r\n        \r\n        const newAvailable = new Set();\r\n        for (let i = 0; i <= maxAvailableQuestion; i++) {\r\n          newAvailable.add(i);\r\n        }\r\n        setAvailableQuestions(newAvailable);\r\n        \r\n        if (newElapsed % intervalMs < 100 && newElapsed > 100) {\r\n          playBeep('normal');\r\n        }\r\n      }\r\n      \r\n      setTimeRemaining(newRemaining);\r\n      \r\n      // When time expires - trigger only ONCE\r\n      if (newRemaining <= 0 && !hasTriggeredExpiry) {\r\n        hasTriggeredExpiry = true;\r\n        console.log('⏰ TIME EXPIRED - STOPPING TIMER');\r\n        \r\n        clearInterval(gameTimer);\r\n        setTotalGameTimer(null);\r\n        setIsInputDisabled(true);\r\n        \r\n        // Make all questions available\r\n        const allAvailable = new Set();\r\n        for (let i = 0; i < count; i++) {\r\n          allAvailable.add(i);\r\n        }\r\n        setAvailableQuestions(allAvailable);\r\n      }\r\n      \r\n      return newElapsed;\r\n    });\r\n  }, 100);\r\n  \r\n  setTotalGameTimer(gameTimer);\r\n};\r\n\r\n// NEW FUNCTION: Auto-submit all remaining answers\r\nconst autoSubmitAllAnswers = () => {\r\n  console.log('=== AUTO-SUBMITTING ALL ANSWERS ===');\r\n  console.log('Current state:', {\r\n    currentQuestionIndex,\r\n    currentQuestionAnswer,\r\n    questionAnswers: [...questionAnswers],\r\n    comparisonPairsLength: comparisonPairs.length,\r\n    gameType\r\n  });\r\n  \r\n  // Validate we have game data\r\n  if (!comparisonPairs || comparisonPairs.length === 0) {\r\n    console.error('No comparison pairs available - cannot submit');\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  // Get current state of all answers\r\n  const finalAnswers = [...questionAnswers];\r\n  \r\n  // Add current answer if we're on a valid question\r\n  if (currentQuestionIndex >= 0 && currentQuestionIndex < comparisonPairs.length) {\r\n    finalAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\r\n    console.log(`Added current answer at index ${currentQuestionIndex}: \"${finalAnswers[currentQuestionIndex]}\"`);\r\n  }\r\n  \r\n  // Ensure we have exactly count answers (fill empty ones)\r\n  while (finalAnswers.length < count) {\r\n    finalAnswers.push('');\r\n  }\r\n  \r\n  console.log('Final answers being submitted:', finalAnswers);\r\n  console.log('Total answers count:', finalAnswers.length);\r\n  console.log('Expected count:', count);\r\n  console.log('Game type:', gameType);\r\n  \r\n  // Clear all active timers FIRST\r\n  const timersToGlear = [\r\n    totalGameTimer, beepInterval, autoSubmitTimer, \r\n    questionTimer, gameIntervalTimer\r\n  ];\r\n  \r\n  timersToGlear.forEach(timer => {\r\n    if (timer) {\r\n      try {\r\n        clearInterval(timer);\r\n        clearTimeout(timer);\r\n      } catch (e) {\r\n        console.log('Timer cleanup error (non-critical):', e.message);\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Reset timer states\r\n  setTotalGameTimer(null);\r\n  setBeepInterval(null);\r\n  setAutoSubmitTimer(null);\r\n  setQuestionTimer(null);\r\n  setGameIntervalTimer(null);\r\n  \r\n  console.log('All timers cleared. Now calling checkAllAnswers...');\r\n  \r\n  // Process results IMMEDIATELY - no timeout\r\n  try {\r\n    checkAllAnswers(finalAnswers);\r\n  } catch (error) {\r\n    console.error('Error in autoSubmitAllAnswers:', error);\r\n    alert('Error processing results. Please try again.');\r\n    setAppState('setup');\r\n  }\r\n};\r\n\r\n// SOLUTION 2: EXTENDED TIME AFTER EXPIRY\r\n// This allows input for extra time after main timer expires\r\n\r\n\r\n\r\n\r\n// const startGlobalGameTimer = () => {\r\n//   const totalGameTime = speed * count * 1000; // Total time = interval per question × number of questions\r\n//   console.log(`Starting game: ${speed}s per question × ${count} questions = ${totalGameTime/1000}s total`);\r\n  \r\n//   // Clear existing timers\r\n//   if (totalGameTimer) clearInterval(totalGameTimer);\r\n//   if (beepInterval) clearInterval(beepInterval);\r\n//   if (autoSubmitTimer) clearTimeout(autoSubmitTimer);\r\n  \r\n//   setGameElapsedTime(0);\r\n//   setTimeRemaining(totalGameTime);\r\n//   setAvailableQuestions(new Set([0])); // Start with only first question available\r\n  \r\n//   // Auto-submit timer for when total time is up - THIS IS THE KEY FIX\r\n//   const submitTimer = setTimeout(() => {\r\n//     console.log('=== TOTAL GAME TIME EXPIRED - AUTO SUBMITTING ===');\r\n    \r\n//     // Clear all timers immediately\r\n//     if (totalGameTimer) {\r\n//       clearInterval(totalGameTimer);\r\n//       setTotalGameTimer(null);\r\n//     }\r\n//     if (beepInterval) {\r\n//       clearInterval(beepInterval);\r\n//       setBeepInterval(null);\r\n//     }\r\n    \r\n//     // Force end the game with current state\r\n//     forceEndGame();\r\n//   }, totalGameTime);\r\n//   setAutoSubmitTimer(submitTimer);\r\n  \r\n//   // Main game timer - updates every 100ms\r\n//   const gameTimer = setInterval(() => {\r\n//     setGameElapsedTime(prev => {\r\n//       const newElapsed = prev + 100;\r\n//       const newRemaining = totalGameTime - newElapsed;\r\n      \r\n//       // Calculate which questions should be available based on elapsed time\r\n//       const intervalMs = speed * 1000;\r\n//       const currentIntervalIndex = Math.floor(newElapsed / intervalMs);\r\n//       const maxAvailableQuestion = Math.min(currentIntervalIndex, count - 1);\r\n      \r\n//       // Update available questions\r\n//       const newAvailable = new Set();\r\n//       for (let i = 0; i <= maxAvailableQuestion; i++) {\r\n//         newAvailable.add(i);\r\n//       }\r\n//       setAvailableQuestions(newAvailable);\r\n      \r\n//       // Beep at interval transitions\r\n//       if (newElapsed % intervalMs < 100 && newElapsed > 100) {\r\n//         playBeep('normal');\r\n//       }\r\n      \r\n//       setTimeRemaining(newRemaining);\r\n      \r\n//       // Check if time is up\r\n//       if (newRemaining <= 0) {\r\n//         console.log('Game timer reached zero - clearing interval');\r\n//         clearInterval(gameTimer);\r\n//         setTotalGameTimer(null);\r\n        \r\n//         // Don't call forceEndGame here since setTimeout will handle it\r\n//         return newElapsed;\r\n//       }\r\n      \r\n//       return newElapsed;\r\n//     });\r\n//   }, 100);\r\n  \r\n//   setTotalGameTimer(gameTimer);\r\n//   console.log('Global game timer started successfully');\r\n// };\r\n\r\n\r\n// 4. NEW FUNCTION: Force end game when total time is up\r\n// const forceEndGame = () => {\r\n//   console.log('Force ending game - collecting all answers');\r\n  \r\n//   // Add current answer to the list\r\n//   const finalAnswers = [...questionAnswers];\r\n//   if (currentQuestionAnswer.trim()) {\r\n//     finalAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\r\n//   }\r\n  \r\n//   // Fill remaining answers with empty strings\r\n//   while (finalAnswers.length < comparisonPairs.length) {\r\n//     finalAnswers.push('');\r\n//   }\r\n  \r\n//   console.log('Final answers submitted:', finalAnswers);\r\n//   checkAllAnswers(finalAnswers);\r\n// };\r\n// 18\r\n\r\nconst forceEndGame = () => {\r\n  console.log('=== FORCE ENDING GAME - ENHANCED VERSION ===');\r\n  \r\n  // Validation checks\r\n  if (!comparisonPairs || comparisonPairs.length === 0) {\r\n    console.error('No comparison pairs available - cannot end game properly');\r\n    alert('Game data is missing. Returning to setup.');\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  console.log('Current state snapshot:', {\r\n    currentQuestionIndex,\r\n    currentQuestionAnswer,\r\n    questionAnswers: [...questionAnswers],\r\n    comparisonPairsLength: comparisonPairs.length,\r\n    timeRemaining,\r\n    gameElapsedTime\r\n  });\r\n  \r\n  // Collect all answers with current answer\r\n  const finalAnswers = [...questionAnswers];\r\n  \r\n  // Add current answer if valid\r\n  if (currentQuestionIndex >= 0 && \r\n      currentQuestionIndex < comparisonPairs.length) {\r\n    const currentAnswer = (currentQuestionAnswer || '').toString().trim();\r\n    finalAnswers[currentQuestionIndex] = currentAnswer;\r\n    console.log(`Added current answer \"${currentAnswer}\" for question ${currentQuestionIndex + 1}`);\r\n  }\r\n  \r\n  // Ensure we have exactly the right number of answers\r\n  while (finalAnswers.length < comparisonPairs.length) {\r\n    finalAnswers.push('');\r\n  }\r\n  \r\n  console.log('Final answers for submission:', finalAnswers);\r\n  \r\n  // Clear all timers immediately\r\n  [totalGameTimer, beepInterval, autoSubmitTimer, questionTimer, gameIntervalTimer].forEach(timer => {\r\n    if (timer) {\r\n      clearInterval(timer);\r\n      clearTimeout(timer);\r\n    }\r\n  });\r\n  \r\n  // Reset timer states\r\n  setTotalGameTimer(null);\r\n  setBeepInterval(null);\r\n  setAutoSubmitTimer(null);\r\n  setQuestionTimer(null);\r\n  setGameIntervalTimer(null);\r\n  setTimeRemaining(0);\r\n  \r\n  // Process results with error handling\r\n  setTimeout(() => {\r\n    try {\r\n      checkAllAnswers(finalAnswers);\r\n    } catch (error) {\r\n      console.error('Error in forceEndGame -> checkAllAnswers:', error);\r\n      alert('Error processing results. Please try again.');\r\n      setAppState('setup');\r\n    }\r\n  }, 200);\r\n};\r\n\r\n\r\n// FIX 2: REPLACE your forceEndGame function with this enhanced version\r\n// const forceEndGame = () => {\r\n//   console.log('=== FORCE ENDING GAME - ENHANCED VERSION ===');\r\n//   console.log('Current state:', {\r\n//     currentQuestionIndex,\r\n//     currentQuestionAnswer,\r\n//     questionAnswers,\r\n//     comparisonPairsLength: comparisonPairs.length,\r\n//     appState\r\n//   });\r\n  \r\n//   // Ensure we have the comparison pairs data\r\n//   if (!comparisonPairs || comparisonPairs.length === 0) {\r\n//     console.error('No comparison pairs available for force end');\r\n//     // Fallback to setup if no game data\r\n//     setAppState('setup');\r\n//     return;\r\n//   }\r\n  \r\n//   // Collect all answers including current one\r\n//   const finalAnswers = [...questionAnswers];\r\n  \r\n//   // Add current answer if it exists and we're on a valid question\r\n//   if (currentQuestionIndex >= 0 && \r\n//       currentQuestionIndex < comparisonPairs.length && \r\n//       currentQuestionAnswer && \r\n//       currentQuestionAnswer.trim()) {\r\n//     finalAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\r\n//     console.log(`Added current answer \"${currentQuestionAnswer.trim()}\" for question ${currentQuestionIndex + 1}`);\r\n//   }\r\n  \r\n//   // Fill remaining answers with empty strings\r\n//   while (finalAnswers.length < comparisonPairs.length) {\r\n//     finalAnswers.push('');\r\n//   }\r\n  \r\n//   console.log('Final answers for submission:', finalAnswers);\r\n//   console.log('Total questions expected:', comparisonPairs.length);\r\n  \r\n//   // Clear ALL timers immediately to prevent any interference\r\n//   const timersToGlear = [\r\n//     totalGameTimer, beepInterval, autoSubmitTimer, \r\n//     questionTimer, gameIntervalTimer\r\n//   ];\r\n  \r\n//   timersToGlear.forEach(timer => {\r\n//     if (timer) {\r\n//       clearInterval(timer);\r\n//       clearTimeout(timer);\r\n//     }\r\n//   });\r\n  \r\n//   // Reset timer states\r\n//   setTotalGameTimer(null);\r\n//   setBeepInterval(null);\r\n//   setAutoSubmitTimer(null);\r\n//   setQuestionTimer(null);\r\n//   setGameIntervalTimer(null);\r\n  \r\n//   // Ensure we're in a stable state before checking answers\r\n//   setTimeRemaining(0);\r\n  \r\n//   // Use setTimeout to ensure all state updates complete before checking answers\r\n//   setTimeout(() => {\r\n//     console.log('Checking answers after timeout');\r\n//     try {\r\n//       checkAllAnswers(finalAnswers);\r\n//     } catch (error) {\r\n//       console.error('Error in checkAllAnswers:', error);\r\n//       // Fallback to setup on error\r\n//       setAppState('setup');\r\n//       alert('An error occurred while processing results. Please try again.');\r\n//     }\r\n//   }, 200); // Increased timeout to ensure state stability\r\n// };\r\n\r\n\r\n\r\n// const generateSubtractionPairs = () => {\r\n//   const pairs = [];\r\n//   const digit1 = firstDigit || 1;\r\n//   const digit2 = secondDigit || 1;\r\n  \r\n//   for (let i = 0; i < count; i++) {\r\n//     let num1, num2;\r\n    \r\n//     // Generate first number based on firstDigit\r\n//     if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;\r\n//     else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;\r\n//     else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;\r\n//     else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;\r\n//     else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;\r\n//     else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n//     // Generate second number based on secondDigit\r\n//     if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;\r\n//     else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;\r\n//     else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;\r\n//     else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\r\n//     else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\r\n//     else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n//     // Ensure positive result\r\n//     if (num2 > num1) [num1, num2] = [num2, num1];\r\n    \r\n//     pairs.push([num1, num2]);\r\n//   }\r\n//   return pairs;\r\n// };\r\n\r\nconst generateSubtractionPairs = () => {\r\n  const pairs = [];\r\n  const digit1 = firstDigit || 1;\r\n  const digit2 = secondDigit || 1;\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    let num1, num2;\r\n    \r\n    // Generate second number (smaller) first based on secondDigit\r\n    if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;\r\n    else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;\r\n    else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;\r\n    else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    // Generate first number (larger) to ensure positive result\r\n    let minFirst = num2 + 1; // At least 1 more than second number\r\n    let maxFirst;\r\n    \r\n    if (digit1 === 1) maxFirst = 9;\r\n    else if (digit1 === 2) maxFirst = 99;\r\n    else if (digit1 === 3) maxFirst = 999;\r\n    else if (digit1 === 4) maxFirst = 9999;\r\n    else if (digit1 === 5) maxFirst = 99999;\r\n    else if (digit1 === 6) maxFirst = 999999;\r\n    \r\n    // Ensure minFirst doesn't exceed maxFirst\r\n    if (minFirst > maxFirst) {\r\n      // If second number is too big, regenerate a smaller one\r\n      if (digit2 === 1) num2 = Math.floor(Math.random() * Math.min(8, maxFirst - 1)) + 1;\r\n      else if (digit2 === 2) num2 = Math.floor(Math.random() * Math.min(89, maxFirst - 1)) + 10;\r\n      else if (digit2 === 3) num2 = Math.floor(Math.random() * Math.min(899, maxFirst - 1)) + 100;\r\n      else num2 = Math.floor(maxFirst * 0.8); // 80% of max for safety\r\n      \r\n      minFirst = num2 + 1;\r\n    }\r\n    \r\n    num1 = Math.floor(Math.random() * (maxFirst - minFirst + 1)) + minFirst;\r\n    \r\n    pairs.push([num1, num2]);\r\n  }\r\n  \r\n  console.log(`Generated ${pairs.length} subtraction pairs (all positive results):`, pairs);\r\n  return pairs;\r\n};\r\n\r\nconst generateDivisionPairs = () => {\r\n  const pairs = [];\r\n  const digit1 = firstDigit || 1;  // Dividend (first number) digits\r\n  const digit2 = secondDigit || 1; // Divisor (second number) digits\r\n  \r\n  console.log(`Generating division pairs: ${digit1}-digit ÷ ${digit2}-digit`);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    let num2, num1;\r\n    \r\n    // Generate divisor (second number) based on secondDigit\r\n    if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1; // 1-9\r\n    else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10; // 10-99\r\n    else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100; // 100-999\r\n    else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    // Calculate the max value for dividend based on firstDigit\r\n    let maxDividend;\r\n    if (digit1 === 1) maxDividend = 9;\r\n    else if (digit1 === 2) maxDividend = 99;\r\n    else if (digit1 === 3) maxDividend = 999;\r\n    else if (digit1 === 4) maxDividend = 9999;\r\n    else if (digit1 === 5) maxDividend = 99999;\r\n    else if (digit1 === 6) maxDividend = 999999;\r\n    \r\n    // Calculate min value for dividend\r\n    let minDividend;\r\n    if (digit1 === 1) minDividend = 1;\r\n    else if (digit1 === 2) minDividend = 10;\r\n    else if (digit1 === 3) minDividend = 100;\r\n    else if (digit1 === 4) minDividend = 1000;\r\n    else if (digit1 === 5) minDividend = 10000;\r\n    else if (digit1 === 6) minDividend = 100000;\r\n    \r\n    // Calculate maximum multiplier that keeps dividend within range\r\n    const maxMultiplier = Math.floor(maxDividend / num2);\r\n    const minMultiplier = Math.max(1, Math.ceil(minDividend / num2));\r\n    \r\n    // Generate a random multiplier within the valid range\r\n    let multiplier;\r\n    if (maxMultiplier >= minMultiplier) {\r\n      multiplier = Math.floor(Math.random() * (maxMultiplier - minMultiplier + 1)) + minMultiplier;\r\n    } else {\r\n      // If no valid range, adjust divisor to be smaller\r\n      num2 = Math.floor(Math.random() * Math.min(9, maxDividend)) + 1;\r\n      multiplier = Math.floor(Math.random() * (Math.floor(maxDividend / num2) - 1)) + 1;\r\n    }\r\n    \r\n    // Calculate dividend\r\n    num1 = num2 * multiplier;\r\n    \r\n    // Ensure dividend is within the correct digit range\r\n    if (num1 > maxDividend) {\r\n      num1 = maxDividend;\r\n    }\r\n    if (num1 < minDividend) {\r\n      num1 = minDividend;\r\n    }\r\n    \r\n    // Final validation - make sure we can cleanly divide\r\n    // If not clean division, adjust num1 to be a clean multiple of num2\r\n    if (num1 % num2 !== 0) {\r\n      num1 = num2 * Math.floor(num1 / num2);\r\n    }\r\n    \r\n    console.log(`Division pair ${i + 1}: ${num1} ÷ ${num2} = ${num1 / num2} (${digit1} digits ÷ ${digit2} digits)`);\r\n    \r\n    pairs.push([num1, num2]);\r\n  }\r\n  \r\n  return pairs;\r\n};\r\n\r\n// ALSO UPDATE generateMultiplicationPairs to be consistent:\r\n\r\nconst generateMultiplicationPairs = () => {\r\n  const pairs = [];\r\n  const digit1 = firstDigit || 1;\r\n  const digit2 = secondDigit || 1;\r\n  \r\n  console.log(`Generating multiplication pairs: ${digit1}-digit × ${digit2}-digit`);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    let num1, num2;\r\n    \r\n    // Generate first number based on firstDigit\r\n    if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;\r\n    else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;\r\n    else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;\r\n    else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    // Generate second number based on secondDigit\r\n    if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;\r\n    else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;\r\n    else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;\r\n    else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    console.log(`Multiplication pair ${i + 1}: ${num1} × ${num2} = ${num1 * num2}`);\r\n    \r\n    pairs.push([num1, num2]);\r\n  }\r\n  \r\n  return pairs;\r\n};\r\n\r\n// 2. ADD this new function after generateDivisionPairs (around line 580)\r\nconst generateMixedMathPairs = () => {\r\n  const pairs = [];\r\n  const digit1 = firstDigit || 1;\r\n  const digit2 = secondDigit || 1;\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    let num1, num2;\r\n    \r\n    // Generate first number based on firstDigit\r\n    if (digit1 === 1) num1 = Math.floor(Math.random() * 9) + 1;\r\n    else if (digit1 === 2) num1 = Math.floor(Math.random() * 90) + 10;\r\n    else if (digit1 === 3) num1 = Math.floor(Math.random() * 900) + 100;\r\n    else if (digit1 === 4) num1 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit1 === 5) num1 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit1 === 6) num1 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    // Generate second number based on secondDigit\r\n    if (digit2 === 1) num2 = Math.floor(Math.random() * 9) + 1;\r\n    else if (digit2 === 2) num2 = Math.floor(Math.random() * 90) + 10;\r\n    else if (digit2 === 3) num2 = Math.floor(Math.random() * 900) + 100;\r\n    else if (digit2 === 4) num2 = Math.floor(Math.random() * 9000) + 1000;\r\n    else if (digit2 === 5) num2 = Math.floor(Math.random() * 90000) + 10000;\r\n    else if (digit2 === 6) num2 = Math.floor(Math.random() * 900000) + 100000;\r\n    \r\n    // Randomly choose addition or subtraction\r\n    const operation = Math.random() < 0.5 ? 'addition' : 'subtraction';\r\n    \r\n    // For subtraction, ensure positive result\r\n    if (operation === 'subtraction' && num2 > num1) {\r\n      [num1, num2] = [num2, num1];\r\n    }\r\n    \r\n    pairs.push([num1, num2, operation]);\r\n  }\r\n  \r\n  console.log(`Generated ${pairs.length} mixed math pairs:`, pairs);\r\n  return pairs;\r\n};\r\n\r\n\r\n\r\nconst startGame = () => {\r\n  let generatedNumbers = [];\r\n  let pairs = [];\r\n\r\n  switch(gameType) {\r\n    //    case 'addition':\r\n    //   generatedNumbers = generateNumbers();\r\n    //   setAdditionNumbers(generatedNumbers);\r\n    //   setAdditionCurrentIndex(0);\r\n    //   setAdditionShowingNumbers(true);\r\n      \r\n    //   const totalAdditionTime = speed * 1000; // Total time in ms\r\n    //   setAdditionIndividualTimer(Math.floor(totalAdditionTime / count));\r\n    //   setAdditionTimeRemaining(totalAdditionTime);\r\n    //   setShowAdditionAnswer(false);\r\n    //   setUserAnswer('');\r\n    //   setAppState('game');\r\n      \r\n    //   startAdditionTimer();\r\n    //   startAdditionSequentialDisplay(generatedNumbers, Math.floor(totalAdditionTime / count));\r\n    //   return;\r\n     case 'addition':\r\n      generatedNumbers = generateNumbers();\r\n      setAdditionNumbers(generatedNumbers);\r\n      setAdditionCurrentIndex(0);\r\n      setAdditionShowingNumbers(true);\r\n      \r\n      setShowAdditionAnswer(false);\r\n      setUserAnswer('');\r\n      setAppState('game');\r\n      \r\n      startAdditionIntervalDisplay(generatedNumbers);\r\n      return;\r\n      \r\ncase 'subtraction':\r\n  // Use the new subtraction number generation\r\n  generatedNumbers = generateSubtractionNumbers();\r\n  setSubtractionNumbers(generatedNumbers);\r\n  setSubtractionCurrentIndex(0);\r\n  setSubtractionShowingNumbers(true);\r\n  \r\n  setShowSubtractionAnswer(false);\r\n  setUserAnswer('');\r\n  setAppState('game');\r\n  \r\n  startSubtractionIntervalDisplay(generatedNumbers);\r\n  return;\r\n\r\n  case 'multiplication':\r\n    case 'division':\r\n    console.log(`Starting ${gameType}: ${count} questions, ${speed}s per question`);\r\n    \r\n    // Generate pairs based on game type\r\n    if (gameType === 'subtraction') pairs = generateSubtractionPairs();\r\n    else if (gameType === 'multiplication') pairs = generateMultiplicationPairs();\r\n    else if (gameType === 'division') pairs = generateDivisionPairs();\r\n    else if (gameType === 'mixedMath') pairs = generateMixedMathPairs();\r\n    \r\n    setComparisonPairs(pairs);\r\n    setCurrentQuestionIndex(0);\r\n    setQuestionAnswers(Array(count).fill(''));\r\n    setCurrentQuestionAnswer('');\r\n    \r\n    setAppState('game');\r\n    startGlobalGameTimer();\r\n    return;\r\n\r\n case 'mixedMath':\r\n  const mixedNumbers = generateMixedMathNumbers();\r\n  setAdditionNumbers(mixedNumbers); // Store mixed numbers in additionNumbers\r\n  setAdditionCurrentIndex(0);\r\n  setAdditionShowingNumbers(true);\r\n  \r\n  setShowAdditionAnswer(false);\r\n  setUserAnswer('');\r\n  setAppState('game');\r\n  \r\n  startMixedMathDisplay(mixedNumbers);\r\n  return;\r\n\r\n    // New total operation cases\r\n    case 'totalAddition':\r\n    case 'totalSubtraction':\r\n    case 'totalMultiplication':\r\n    case 'totalDivision':\r\n      // Generate sequence of numbers for the calculation\r\n      if (difficulty === 'single') {\r\n        generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 9) + 1);\r\n      } else if (difficulty === 'double') {\r\n        generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 90) + 10);\r\n      } else {\r\n        generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 900) + 100);\r\n      }\r\n      \r\n      // For totalSubtraction, ensure positive results\r\n      if (gameType === 'totalSubtraction') {\r\n        let firstNumber;\r\n        if (difficulty === 'single') {\r\n          firstNumber = Math.floor(Math.random() * 30) + 20; // 20-50\r\n        } else if (difficulty === 'double') {\r\n          firstNumber = Math.floor(Math.random() * 100) + 100; // 100-200\r\n        } else {\r\n          firstNumber = Math.floor(Math.random() * 500) + 500; // 500-1000\r\n        }\r\n        \r\n        const subsequentNumbers = [];\r\n        let remainingValue = firstNumber * 0.8;\r\n        \r\n        for (let i = 1; i < count; i++) {\r\n          const remainingPositions = count - i;\r\n          const maxForThisPosition = Math.floor(remainingValue / remainingPositions);\r\n          \r\n          let maxValue;\r\n          if (difficulty === 'single') {\r\n            maxValue = Math.min(9, maxForThisPosition);\r\n          } else if (difficulty === 'double') {\r\n            maxValue = Math.min(99, maxForThisPosition);\r\n          } else {\r\n            maxValue = Math.min(999, maxForThisPosition);\r\n          }\r\n          \r\n          maxValue = Math.max(1, maxValue);\r\n          const nextNum = Math.floor(Math.random() * maxValue) + 1;\r\n          subsequentNumbers.push(nextNum);\r\n          remainingValue -= nextNum;\r\n        }\r\n        \r\n        generatedNumbers = [firstNumber, ...subsequentNumbers];\r\n      }\r\n      \r\n      // For totalDivision, ensure clean division\r\n      if (gameType === 'totalDivision') {\r\n        const baseNumber = generatedNumbers[0];\r\n        generatedNumbers = [baseNumber];\r\n        for (let i = 1; i < count; i++) {\r\n          const divisors = [];\r\n          for (let j = 2; j <= Math.min(baseNumber, 12); j++) {\r\n            if (baseNumber % j === 0) divisors.push(j);\r\n          }\r\n          generatedNumbers.push(divisors.length > 0 ? \r\n            divisors[Math.floor(Math.random() * divisors.length)] : 1);\r\n        }\r\n      }\r\n      break;\r\n\r\n    case 'memory':\r\n      generatedNumbers = generateNumbers();\r\n      break;\r\n      \r\n    case 'counting':\r\n      generatedNumbers = generateNumbers();\r\n      setTargetNumber(Math.floor(Math.random() * 10));\r\n      break;\r\n      \r\n    case 'pattern':\r\n      const start = Math.floor(Math.random() * 10);\r\n      const step = Math.floor(Math.random() * 5) + 1;\r\n      generatedNumbers = Array(count).fill().map((_, i) => start + i * step);\r\n      break;\r\n      \r\n    case 'reverse':\r\n      generatedNumbers = generateNumbers();\r\n      break;\r\n      \r\n    case 'missing':\r\n      generatedNumbers = Array(count).fill().map((_, i) => i + 1);\r\n      const missing = [];\r\n      const totalMissing = Math.floor(count / 3);\r\n      while (missing.length < totalMissing) {\r\n        const idx = Math.floor(Math.random() * count);\r\n        if (!missing.includes(idx)) missing.push(idx);\r\n      }\r\n      setMissingIndices(missing);\r\n      break;\r\n      \r\n    case 'oddeven':\r\n      generatedNumbers = Array(count).fill().map(() => Math.floor(Math.random() * 100));\r\n      break;\r\n      \r\n    case 'multiples':\r\n      const baseFactor = Math.floor(Math.random() * 9) + 2;\r\n      generatedNumbers = Array(count).fill().map((_, i) => baseFactor * (i + 1));\r\n      setTargetNumber(baseFactor);\r\n      break;\r\n      \r\n    case 'comparison':\r\n      setComparisonPairs(generateComparisonPairs());\r\n      break;\r\n      \r\n    case 'speed':\r\n      const start2 = Math.floor(Math.random() * 50) + 1;\r\n      generatedNumbers = Array(count).fill().map((_, i) => start2 + i);\r\n      break;\r\n      \r\n    case 'symbol':\r\n      generatedNumbers = generateNumbers().slice(0, 5);\r\n      setSymbols(generateSymbols().slice(0, 5));\r\n      break;\r\n      \r\n    default:\r\n      generatedNumbers = generateNumbers();\r\n  }\r\n  \r\n  setNumbers(generatedNumbers);\r\n  setCurrentIndex(0);\r\n  setShowingNumbers(true);\r\n  setAppState('game');\r\n  \r\n  // Show numbers sequentially for non-math operations\r\n  showNumbersSequentially(generatedNumbers);\r\n};\r\n\r\n// 6. REPLACE startMixedMathDisplay function\r\nconst startMixedMathDisplay = (mixedNumbers) => {\r\n  let currentIdx = 0;\r\n  setAdditionCurrentIndex(0);\r\n  setMixedMathTimer(speed);\r\n  \r\n  // Timer countdown for display\r\n  const timerInterval = setInterval(() => {\r\n    setMixedMathTimer(prev => {\r\n      if (prev <= 1) {\r\n        return speed;\r\n      }\r\n      return prev - 1;\r\n    });\r\n  }, 1000);\r\n  \r\n  playBeep('normal');\r\n  \r\n  const interval = setInterval(() => {\r\n    if (currentIdx < mixedNumbers.length - 1) {\r\n      currentIdx++;\r\n      setAdditionCurrentIndex(currentIdx);\r\n      setMixedMathTimer(speed); // Reset timer for new number\r\n      playBeep('normal');\r\n    } else {\r\n      // All numbers shown, now show input\r\n      clearInterval(interval);\r\n      clearInterval(timerInterval);\r\n      setAdditionShowingNumbers(false);\r\n      setShowAdditionAnswer(true);\r\n    }\r\n  }, speed * 1000);\r\n  \r\n  setGameIntervalTimer(interval);\r\n};\r\n\r\n// 7. REPLACE checkMixedMathAnswer function\r\nconst checkMixedMathAnswer = () => {\r\n  // Calculate result from mixed math numbers\r\n  let result = 0;\r\n  \r\n  for (let i = 0; i < additionNumbers.length; i++) {\r\n    const numData = additionNumbers[i];\r\n    if (numData.operation === 'add') {\r\n      result += numData.value;\r\n    } else {\r\n      result -= numData.value;\r\n    }\r\n  }\r\n  \r\n  const correct = parseInt(userAnswer) === result;\r\n  const score = correct ? 2 : -1;\r\n  \r\n  // Create result object that matches the expected structure\r\n  const resultData = {\r\n    correct,\r\n    actualAnswer: result.toString(),\r\n    score,\r\n    gameType: 'mixedMath',\r\n    userAnswer: userAnswer, // Add user's answer for display\r\n    totalQuestions: 1,\r\n    correctCount: correct ? 1 : 0,\r\n    accuracy: correct ? '100%' : '0%'\r\n  };\r\n\r\n  // In checkMixedMathAnswer function:\r\nupdatePerformanceData(correct, score, null, {\r\n  totalQuestions: 1,\r\n  correctAnswers: correct ? 1 : 0,\r\n  accuracy: correct ? '100%' : '0%'\r\n});\r\n  \r\n  setResult(resultData);\r\n  updatePerformanceData(correct, score);\r\n  setAppState('result');\r\n};\r\n\r\n\r\n// const startAdditionTimer = () => {\r\n//   const timer = setInterval(() => {\r\n//     setAdditionTimeRemaining(prev => {\r\n//       if (prev <= 100) {\r\n//         clearInterval(timer);\r\n//         setShowAdditionAnswer(true);\r\n//         return 0;\r\n//       }\r\n//       return prev - 100;\r\n//     });\r\n//   }, 100);\r\n//   setAdditionTimer(timer);\r\n// };\r\n\r\n// 4. ADD ADDITION ANSWER CHECK\r\n// const checkAdditionAnswer = () => {\r\n//   const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\r\n//   const correct = parseInt(userAnswer) === correctSum;\r\n//   const  score = correct ? 2 : -1;\r\n  \r\n//   setResult({ \r\n//     correct, \r\n//     actualAnswer: correctSum.toString(), \r\n//     score \r\n//   });\r\n  \r\n//   updatePerformanceData(correct, score);\r\n//   setAppState('result');\r\n// };\r\n\r\n//   const startAdditionTimer = () => {\r\n//   const timer = setInterval(() => {\r\n//     setAdditionTimeRemaining(prev => {\r\n//       // Play beep when 3 seconds remaining\r\n//       if (prev <= 3000 && prev > 2900) {\r\n//         playBeep();\r\n//       }\r\n      \r\n//       if (prev <= 100) {\r\n//         clearInterval(timer);\r\n//         playBeep(); // Beep when time expires\r\n//         setShowAdditionAnswer(true);\r\n//         return 0;\r\n//       }\r\n//       return prev - 100;\r\n//     });\r\n//   }, 100);\r\n//   setAdditionTimer(timer);\r\n// }; 09-10\r\n\r\nconst startAdditionTimer = () => {\r\n  if (beepInterval) {\r\n    clearInterval(beepInterval);\r\n    setBeepInterval(null);\r\n  }\r\n  \r\n  // Start regular beeping every second for addition\r\n  const beepTimer = setInterval(() => {\r\n    playBeep('normal');\r\n  }, 1000);\r\n  setBeepInterval(beepTimer);\r\n  \r\n  const timer = setInterval(() => {\r\n    setAdditionTimeRemaining(prev => {\r\n      const newTime = prev - 100;\r\n      \r\n      // Different beep patterns for addition timer\r\n      if (newTime <= 3000 && newTime > 2000) {\r\n        // Last 3 seconds - warning beeps\r\n        if (newTime % 1000 < 100) {\r\n          clearInterval(beepTimer); // Stop regular beeping\r\n          playBeep('warning');\r\n        }\r\n      } else if (newTime <= 2000 && newTime > 1000) {\r\n        // Last 2 seconds - faster urgent beeps\r\n        if (newTime % 500 < 100) {\r\n          playBeep('urgent');\r\n        }\r\n      } else if (newTime <= 1000 && newTime > 0) {\r\n        // Last 1 second - very fast urgent beeps\r\n        if (newTime % 250 < 100) {\r\n          playBeep('urgent');\r\n        }\r\n      }\r\n      \r\n      if (newTime <= 100) {\r\n        clearInterval(timer);\r\n        clearInterval(beepTimer);\r\n        setBeepInterval(null);\r\n        playBeep('final'); // Final beep when time expires\r\n        setShowAdditionAnswer(true);\r\n        return 0;\r\n      }\r\n      return newTime;\r\n    });\r\n  }, 100);\r\n  setAdditionTimer(timer);\r\n};\r\n\r\nconst checkAdditionAnswer = () => {\r\n  const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\r\n  const correct = parseInt(userAnswer) === correctSum;\r\n  const score = correct ? 2 : -1;\r\n  \r\n  // Create result object that matches the expected structure\r\n  const resultData = {\r\n    correct,\r\n    actualAnswer: correctSum.toString(),\r\n    score,\r\n    gameType: 'addition',\r\n    userAnswer: userAnswer, // Add user's answer for display\r\n    totalQuestions: 1,\r\n    correctCount: correct ? 1 : 0,\r\n    accuracy: correct ? '100%' : '0%'\r\n  };\r\n\r\n  updatePerformanceData(correct, score, null, {\r\n  totalQuestions: 1,\r\n  correctAnswers: correct ? 1 : 0,\r\n  accuracy: correct ? '100%' : '0%'\r\n});\r\n  \r\n  setResult(resultData);\r\n  updatePerformanceData(correct, score);\r\n  setAppState('result');\r\n};\r\n\r\n// 5. ADD SHOW ANSWER FUNCTION\r\nconst showCorrectAdditionAnswer = () => {\r\n  const correctSum = additionNumbers.reduce((sum, num) => sum + num, 0);\r\n  alert(`Correct Answer: ${correctSum}`);\r\n};\r\n\r\n  // 3. ADD NEW TIMER FUNCTIONS\r\n// const startQuestionTimer = () => {\r\n//   console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\r\n//   console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\r\n  \r\n//   // Clear any existing timer first\r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n  \r\n//   // Reset time remaining\r\n//   setTimeRemaining(speed * 1000);\r\n  \r\n//   const timer = setInterval(() => {\r\n//     setTimeRemaining(prev => {\r\n//       const newTime = prev - 100;\r\n      \r\n//       if (newTime <= 0) {\r\n//         console.log(`Question ${currentQuestionIndex + 1} timer expired`);\r\n//         clearInterval(timer);\r\n//         setQuestionTimer(null);\r\n//         handleQuestionTimeout();\r\n//         return 0;\r\n//       }\r\n//       return newTime;\r\n//     });\r\n//   }, 100);\r\n  \r\n//   setQuestionTimer(timer);\r\n// };\r\n\r\n//   const startQuestionTimer = () => {\r\n//   console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\r\n//   console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\r\n  \r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n  \r\n//   setTimeRemaining(speed * 1000);\r\n  \r\n//   const timer = setInterval(() => {\r\n//     setTimeRemaining(prev => {\r\n//       const newTime = prev - 100;\r\n      \r\n//       // Play beep when 3 seconds remaining\r\n//       if (newTime <= 3000 && newTime > 2900) {\r\n//         playBeep();\r\n//       }\r\n      \r\n//       if (newTime <= 0) {\r\n//         console.log(`Question ${currentQuestionIndex + 1} timer expired`);\r\n//         clearInterval(timer);\r\n//         setQuestionTimer(null);\r\n//         playBeep(); // Beep when time expires\r\n//         handleQuestionTimeout();\r\n//         return 0;\r\n//       }\r\n//       return newTime;\r\n//     });\r\n//   }, 100);\r\n  \r\n//   setQuestionTimer(timer);\r\n// }; 10-09\r\n\r\n\r\n\r\nconst startQuestionTimer = () => {\r\n  console.log(`Starting timer for question ${currentQuestionIndex + 1} of ${comparisonPairs.length}`);\r\n  console.log(`Timer duration: ${speed * 1000}ms (${speed} seconds)`);\r\n  \r\n  if (questionTimer) {\r\n    clearInterval(questionTimer);\r\n    setQuestionTimer(null);\r\n  }\r\n  \r\n  if (beepInterval) {\r\n    clearInterval(beepInterval);\r\n    setBeepInterval(null);\r\n  }\r\n  \r\n  setTimeRemaining(speed * 1000);\r\n  \r\n  // Start regular beeping every second\r\n  const beepTimer = setInterval(() => {\r\n    playBeep('normal');\r\n  }, 1000);\r\n  setBeepInterval(beepTimer);\r\n  \r\n  const timer = setInterval(() => {\r\n    setTimeRemaining(prev => {\r\n      const newTime = prev - 100;\r\n      \r\n      // Different beep patterns based on remaining time\r\n      if (newTime <= 3000 && newTime > 2000) {\r\n        // Last 3 seconds - warning beeps\r\n        if (newTime % 1000 < 100) {\r\n          clearInterval(beepTimer); // Stop regular beeping\r\n          playBeep('warning');\r\n        }\r\n      } else if (newTime <= 2000 && newTime > 1000) {\r\n        // Last 2 seconds - faster urgent beeps\r\n        if (newTime % 500 < 100) {\r\n          playBeep('urgent');\r\n        }\r\n      } else if (newTime <= 1000 && newTime > 0) {\r\n        // Last 1 second - very fast urgent beeps\r\n        if (newTime % 250 < 100) {\r\n          playBeep('urgent');\r\n        }\r\n      }\r\n      \r\n      if (newTime <= 0) {\r\n        console.log(`Question ${currentQuestionIndex + 1} timer expired`);\r\n        clearInterval(timer);\r\n        clearInterval(beepTimer);\r\n        setQuestionTimer(null);\r\n        setBeepInterval(null);\r\n        playBeep('final'); // Final timeout beep\r\n        handleQuestionTimeout();\r\n        return 0;\r\n      }\r\n      return newTime;\r\n    });\r\n  }, 100);\r\n  \r\n  setQuestionTimer(timer);\r\n};\r\n\r\n// 2. FIX the handleQuestionTimeout function:\r\nconst handleQuestionTimeout = () => {\r\n  console.log(`Question ${currentQuestionIndex + 1} timed out`);\r\n  // Do nothing - the global timer handles auto-submit\r\n};\r\n\r\n\r\n// 4. ADD QUESTION SUBMISSION LOGIC\r\n// const submitCurrentQuestion = () => {\r\n//   console.log(`Submitting answer for question ${currentQuestionIndex + 1}: \"${currentQuestionAnswer}\"`);\r\n//   console.log(`Total questions: ${comparisonPairs.length}, Current question index: ${currentQuestionIndex}`);\r\n  \r\n//   // Add current answer to the answers array\r\n// const newAnswers = [...questionAnswers, currentQuestionAnswer.trim()];\r\n//   setQuestionAnswers(newAnswers);\r\n  \r\n//   // Clear the current timer\r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n\r\n//     // Clear beep interval when submitting\r\n//   if (beepInterval) {\r\n//     clearInterval(beepInterval);\r\n//     setBeepInterval(null);\r\n//   }\r\n  \r\n//   // Check if there are more questions\r\n//   if (currentQuestionIndex < comparisonPairs.length - 1) {\r\n//     console.log(`Moving to next question: ${currentQuestionIndex + 2}`);\r\n    \r\n//     // Move to next question\r\n//     const nextIndex = currentQuestionIndex + 1;\r\n//     setCurrentQuestionIndex(nextIndex);\r\n    \r\n//     // Clear current answer\r\n//     setCurrentQuestionAnswer('');\r\n    \r\n//     // Start timer for next question with a delay to ensure state updates\r\n//     setTimeout(() => {\r\n//       setTimeRemaining(speed * 1000);\r\n//       startQuestionTimer();\r\n//     }, 200);\r\n    \r\n//   } else {\r\n//     // All questions completed\r\n//     console.log('All questions completed! Final answers:', newAnswers);\r\n//     console.log('Moving to results...');\r\n//     checkAllAnswers(newAnswers);\r\n//   }\r\n// };  10-09\r\n\r\nconst submitCurrentQuestion = () => {\r\n  // If already disabled, do nothing\r\n  if (isInputDisabled && timeRemaining <= 0) {\r\n    return;\r\n  }\r\n  \r\n  console.log(`=== SUBMITTING QUESTION ${currentQuestionIndex + 1} ===`);\r\n  \r\n  if (currentQuestionIndex < 0 || currentQuestionIndex >= comparisonPairs.length) {\r\n    console.error('Invalid question index:', currentQuestionIndex);\r\n    return;\r\n  }\r\n  \r\n  // Update answers\r\n  const newAnswers = [...questionAnswers];\r\n  newAnswers[currentQuestionIndex] = (currentQuestionAnswer || '').toString().trim();\r\n  setQuestionAnswers(newAnswers);\r\n  \r\n  // Check if more questions\r\n  if (currentQuestionIndex < comparisonPairs.length - 1) {\r\n    const nextIndex = currentQuestionIndex + 1;\r\n    setCurrentQuestionIndex(nextIndex);\r\n    setCurrentQuestionAnswer(newAnswers[nextIndex] || '');\r\n  } else {\r\n    // Last question - end game\r\n    if (totalGameTimer) {\r\n      clearInterval(totalGameTimer);\r\n      setTotalGameTimer(null);\r\n    }\r\n    if (beepInterval) {\r\n      clearInterval(beepInterval);\r\n      setBeepInterval(null);\r\n    }\r\n    \r\n    try {\r\n      checkAllAnswersForAutoSubmit(newAnswers);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setAppState('setup');\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n// Allow keyboard typing as well (digits + optional leading minus)\r\n// const handleKeyboardInput = (e) => {\r\n//   const raw = e.target.value;\r\n//   // Keep digits and a single leading '-'\r\n//   const sanitized = raw.replace(/[^0-9-]/g, '').replace(/(?!^)-/g, '');\r\n//   setCurrentQuestionAnswer(sanitized);\r\n// };\r\n\r\nconst handleKeyboardInput = (e) => {\r\n  if (isInputDisabled) {\r\n    e.preventDefault();\r\n    return;\r\n  }\r\n  \r\n  const raw = e.target.value;\r\n  const sanitized = raw.replace(/[^0-9-]/g, '').replace(/(?!^)-/g, '');\r\n  setCurrentQuestionAnswer(sanitized);\r\n};\r\n\r\nconst navigateToQuestion = (questionIndex) => {\r\n  if (availableQuestions.has(questionIndex)) {\r\n    // Save current answer first\r\n    const newAnswers = [...questionAnswers];\r\n    newAnswers[currentQuestionIndex] = currentQuestionAnswer.trim();\r\n    setQuestionAnswers(newAnswers);\r\n    \r\n    // Navigate to new question\r\n    setCurrentQuestionIndex(questionIndex);\r\n    setCurrentQuestionAnswer(newAnswers[questionIndex] || '');\r\n  }\r\n};\r\n\r\n// const checkAllAnswers = (answers) => {\r\n//   let correctCount = 0;\r\n//   let actualAnswers = [];\r\n  \r\n//   const expectedCount = comparisonPairs.length;\r\n  \r\n//   switch(gameType) {\r\n//     case 'subtraction':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\r\n//       correctCount = answers.filter((ans, idx) => \r\n//         idx < actualAnswers.length && ans === actualAnswers[idx]\r\n//       ).length;\r\n//       break;\r\n      \r\n//     case 'multiplication':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\r\n//       correctCount = answers.filter((ans, idx) => \r\n//         idx < actualAnswers.length && ans === actualAnswers[idx]\r\n//       ).length;\r\n//       break;\r\n      \r\n//     case 'division':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => (a / b).toString());\r\n//       correctCount = answers.filter((ans, idx) => \r\n//         idx < actualAnswers.length && ans === actualAnswers[idx]\r\n//       ).length;\r\n//       break;\r\n//       case 'mixedMath':\r\n//   actualAnswers = comparisonPairs.map(([a, b, operation]) => {\r\n//     const result = operation === 'addition' ? a + b : a - b;\r\n//     return result.toString();\r\n//   });\r\n//   correctCount = answers.filter((ans, idx) => \r\n//     idx < actualAnswers.length && ans === actualAnswers[idx]\r\n//   ).length;\r\n//   break;\r\n//   }\r\n  \r\n//   const accuracy = correctCount / expectedCount;\r\n//   const isCorrect = accuracy >= 0.8; // 80% threshold\r\n//   const score = isCorrect ? 2 : -1; // +2 if 80%+ correct, -1 if below\r\n  \r\n//   setResult({ \r\n//     correct: isCorrect, \r\n//     actualAnswer: `${correctCount}/${expectedCount} correct`, \r\n//     score,\r\n//     userAnswers: answers,\r\n//     correctAnswers: actualAnswers,\r\n//     accuracy: (accuracy * 100).toFixed(1) + '%'\r\n//   });\r\n  \r\n//   updatePerformanceData(isCorrect, score);\r\n//   setAppState('result');\r\n// };\r\n\r\n\r\n// 7. ADD NUMBER PAD COMPONENT\r\n// const NumberPad = () => (\r\n//   <div className=\"number-pad\">\r\n//     <div className=\"number-pad-row\">\r\n//       {[7, 8, 9].map(num => (\r\n//         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       {[4, 5, 6].map(num => (\r\n//         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       {[1, 2, 3].map(num => (\r\n//         <button key={num} onClick={() => handleNumberPadInput(num.toString())} className=\"number-btn\">\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       <button onClick={() => handleNumberPadInput('negative')} className=\"number-btn special\">\r\n//         ±\r\n//       </button>\r\n//       <button onClick={() => handleNumberPadInput('0')} className=\"number-btn\">\r\n//         0\r\n//       </button>\r\n//       <button onClick={() => handleNumberPadInput('backspace')} className=\"number-btn special\">\r\n//         ⌫\r\n//       </button>\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       <button onClick={() => handleNumberPadInput('clear')} className=\"number-btn clear\">\r\n//         Clear\r\n//       </button>\r\n//       <button \r\n//         onClick={() => {\r\n//           console.log(`Manual submit clicked for question ${currentQuestionIndex + 1}`);\r\n//           console.log(`Current answer: \"${currentQuestionAnswer}\"`);\r\n//           submitCurrentQuestion();\r\n//         }} \r\n//         className=\"number-btn submit\"\r\n//         // disabled={!currentQuestionAnswer.trim()}\r\n//       >\r\n//         Submit\r\n//       </button>\r\n//     </div>\r\n//   </div>\r\n// );\r\n\r\n// const checkAllAnswers = (answers) => {\r\n//   let correctCount = 0;\r\n//   let actualAnswers = [];\r\n  \r\n//   const expectedCount = comparisonPairs.length;\r\n  \r\n//   switch(gameType) {\r\n//     case 'subtraction':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\r\n//       break;\r\n      \r\n//     case 'multiplication':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\r\n//       break;\r\n      \r\n//     case 'division':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => Math.round(a / b).toString()); // Round for cleaner results\r\n//       break;\r\n      \r\n//     case 'mixedMath':\r\n//       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\r\n//         const result = operation === 'addition' ? a + b : a - b;\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n//   }\r\n  \r\n//   // Compare user answers with correct answers\r\n//   correctCount = answers.filter((userAns, idx) => {\r\n//     const trimmedUserAns = (userAns || '').toString().trim();\r\n//     const correctAns = actualAnswers[idx] || '';\r\n//     return trimmedUserAns === correctAns;\r\n//   }).length;\r\n  \r\n//   const accuracy = correctCount / expectedCount;\r\n//   const isCorrect = accuracy >= 0.8; // 80% threshold\r\n//   const score = isCorrect ? 2 : -1;\r\n  \r\n//   setResult({ \r\n//     correct: isCorrect, \r\n//     actualAnswer: `${correctCount}/${expectedCount} correct`, \r\n//     score,\r\n//     userAnswers: answers,\r\n//     correctAnswers: actualAnswers,\r\n//     accuracy: (accuracy * 100).toFixed(1) + '%'\r\n//   });\r\n  \r\n//   updatePerformanceData(isCorrect, score);\r\n//   setAppState('result');\r\n// };\r\n\r\n// const checkAllAnswers = (answers) => {\r\n//   let correctCount = 0;\r\n//   let actualAnswers = [];\r\n  \r\n//   const expectedCount = comparisonPairs.length;\r\n  \r\n//   switch(gameType) {\r\n//     case 'subtraction':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = a - b;\r\n//         console.log(`Subtraction: ${a} - ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'multiplication':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = a * b;\r\n//         console.log(`Multiplication: ${a} × ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'division':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = Math.round(a / b);\r\n//         console.log(`Division: ${a} ÷ ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'mixedMath':\r\n//       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\r\n//         const result = operation === 'addition' ? a + b : a - b;\r\n//         console.log(`Mixed: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n//   }\r\n  \r\n//   // Debug logging\r\n//   console.log('User answers:', answers);\r\n//   console.log('Correct answers:', actualAnswers);\r\n  \r\n//   // Compare user answers with correct answers (exact string match)\r\n//   correctCount = answers.filter((userAns, idx) => {\r\n//     const trimmedUserAns = (userAns || '').toString().trim();\r\n//     const correctAns = (actualAnswers[idx] || '').toString().trim();\r\n//     const isMatch = trimmedUserAns === correctAns;\r\n    \r\n//     console.log(`Question ${idx + 1}: User=\"${trimmedUserAns}\" vs Correct=\"${correctAns}\" = ${isMatch}`);\r\n    \r\n//     return isMatch;\r\n//   }).length;\r\n  \r\n//   const accuracy = correctCount / expectedCount;\r\n//   const isCorrect = accuracy >= 0.8;\r\n//   const score = isCorrect ? 2 : -1;\r\n  \r\n//   console.log(`Final: ${correctCount}/${expectedCount} correct, accuracy: ${accuracy}`);\r\n  \r\n//   setResult({ \r\n//     correct: isCorrect, \r\n//     actualAnswer: `${correctCount}/${expectedCount} correct`, \r\n//     score,\r\n//     userAnswers: answers,\r\n//     correctAnswers: actualAnswers,\r\n//     accuracy: (accuracy * 100).toFixed(1) + '%'\r\n//   });\r\n  \r\n//   updatePerformanceData(isCorrect, score);\r\n//   setAppState('result');\r\n// };\r\n// 18\r\n\r\n// const checkAllAnswers = (answers) => {\r\n//   console.log('=== CHECKING ALL ANSWERS ===');\r\n//   console.log('Game type:', gameType);\r\n//   console.log('User answers:', answers);\r\n//   console.log('Comparison pairs:', comparisonPairs);\r\n  \r\n//   let correctCount = 0;\r\n//   let actualAnswers = [];\r\n  \r\n//   const expectedCount = comparisonPairs.length;\r\n  \r\n//   // Clear all timers immediately to prevent interference\r\n//   if (totalGameTimer) {\r\n//     clearInterval(totalGameTimer);\r\n//     setTotalGameTimer(null);\r\n//   }\r\n//   if (beepInterval) {\r\n//     clearInterval(beepInterval);\r\n//     setBeepInterval(null);\r\n//   }\r\n//   if (autoSubmitTimer) {\r\n//     clearInterval(autoSubmitTimer);\r\n//     setAutoSubmitTimer(null);\r\n//   }\r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n  \r\n//   // Calculate correct answers based on game type\r\n//   switch(gameType) {\r\n//     case 'subtraction':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = a - b;\r\n//         console.log(`Subtraction: ${a} - ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'multiplication':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = a * b;\r\n//         console.log(`Multiplication: ${a} × ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'division':\r\n//       actualAnswers = comparisonPairs.map(([a, b]) => {\r\n//         const result = Math.round(a / b);\r\n//         console.log(`Division: ${a} ÷ ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     case 'mixedMath':\r\n//       actualAnswers = comparisonPairs.map(([a, b, operation]) => {\r\n//         const result = operation === 'addition' ? a + b : a - b;\r\n//         console.log(`Mixed: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\r\n//         return result.toString();\r\n//       });\r\n//       break;\r\n      \r\n//     default:\r\n//       console.error('Unknown game type for checkAllAnswers:', gameType);\r\n//       actualAnswers = comparisonPairs.map(() => '0');\r\n//   }\r\n  \r\n//   // Compare answers - ensure we have exactly the right number of answers\r\n//   const normalizedAnswers = [...answers];\r\n//   while (normalizedAnswers.length < expectedCount) {\r\n//     normalizedAnswers.push('');\r\n//   }\r\n  \r\n//   // Count correct answers\r\n//   correctCount = normalizedAnswers.filter((userAns, idx) => {\r\n//     const trimmedUserAns = (userAns || '').toString().trim();\r\n//     const correctAns = (actualAnswers[idx] || '').toString().trim();\r\n//     const isMatch = trimmedUserAns === correctAns;\r\n    \r\n//     console.log(`Question ${idx + 1}: User=\"${trimmedUserAns}\" vs Correct=\"${correctAns}\" = ${isMatch}`);\r\n    \r\n//     return isMatch;\r\n//   }).length;\r\n  \r\n//   const accuracy = correctCount / expectedCount;\r\n//   const isCorrect = accuracy >= 0.8;\r\n//   const score = isCorrect ? 2 : -1;\r\n  \r\n//   console.log(`Final: ${correctCount}/${expectedCount} correct, accuracy: ${accuracy.toFixed(2)}`);\r\n  \r\n//   // Create stable result object\r\n//   const resultData = {\r\n//     correct: isCorrect,\r\n//     actualAnswer: `${correctCount}/${expectedCount} correct`,\r\n//     score: score,\r\n//     userAnswers: normalizedAnswers,\r\n//     correctAnswers: actualAnswers,\r\n//     accuracy: (accuracy * 100).toFixed(1) + '%',\r\n//     gameType: gameType,\r\n//     totalQuestions: expectedCount,\r\n//     correctCount: correctCount\r\n//   };\r\n  \r\n//   console.log('Setting result data:', resultData);\r\n  \r\n//   // Set result and immediately change to result state\r\n//   setResult(resultData);\r\n//   updatePerformanceData(isCorrect, score);\r\n  \r\n//   // Force state change after a brief delay to ensure result is set\r\n//   setTimeout(() => {\r\n//     console.log('Changing to result state');\r\n//     setAppState('result');\r\n//   }, 100);\r\n// };\r\n\r\nconst checkAllAnswers = (answers) => {\r\n  console.log('=== CHECKING ALL ANSWERS - FIXED VERSION ===');\r\n  console.log('Game type:', gameType);\r\n  console.log('User answers (raw):', answers);\r\n  console.log('Comparison pairs:', comparisonPairs);\r\n  \r\n  let correctCount = 0;\r\n  let actualAnswers = [];\r\n  \r\n  const expectedCount = comparisonPairs.length;\r\n  \r\n  // Ensure we have valid comparison pairs\r\n  if (!comparisonPairs || comparisonPairs.length === 0) {\r\n    console.error('No comparison pairs available');\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  // Clear all timers immediately\r\n  const timersToGlear = [\r\n    totalGameTimer, beepInterval, autoSubmitTimer, \r\n    questionTimer, gameIntervalTimer\r\n  ];\r\n  \r\n  timersToGlear.forEach(timer => {\r\n    if (timer) {\r\n      clearInterval(timer);\r\n      clearTimeout(timer);\r\n    }\r\n  });\r\n  \r\n  // Reset timer states\r\n  setTotalGameTimer(null);\r\n  setBeepInterval(null);\r\n  setAutoSubmitTimer(null);\r\n  setQuestionTimer(null);\r\n  setGameIntervalTimer(null);\r\n  \r\n  // Calculate correct answers based on game type\r\n  try {\r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = a - b;\r\n          console.log(`Question ${index + 1}: ${a} - ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'multiplication':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = a * b;\r\n          console.log(`Question ${index + 1}: ${a} × ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'division':\r\n        actualAnswers = comparisonPairs.map(([a, b], index) => {\r\n          const result = Math.round(a / b);\r\n          console.log(`Question ${index + 1}: ${a} ÷ ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      case 'mixedMath':\r\n        actualAnswers = comparisonPairs.map(([a, b, operation], index) => {\r\n          const result = operation === 'addition' ? a + b : a - b;\r\n          console.log(`Question ${index + 1}: ${a} ${operation === 'addition' ? '+' : '-'} ${b} = ${result}`);\r\n          return result.toString();\r\n        });\r\n        break;\r\n        \r\n      default:\r\n        console.error('Unknown game type for checkAllAnswers:', gameType);\r\n        setAppState('setup');\r\n        return;\r\n    }\r\n  } catch (error) {\r\n    console.error('Error calculating correct answers:', error);\r\n    setAppState('setup');\r\n    return;\r\n  }\r\n  \r\n  // Normalize user answers array\r\n  const normalizedAnswers = [...answers];\r\n  while (normalizedAnswers.length < expectedCount) {\r\n    normalizedAnswers.push('');\r\n  }\r\n  \r\n  console.log('Correct answers calculated:', actualAnswers);\r\n  console.log('Normalized user answers:', normalizedAnswers);\r\n  \r\n  // Compare answers with enhanced logging\r\n  correctCount = normalizedAnswers.filter((userAns, idx) => {\r\n    // Clean both answers - remove all whitespace and normalize\r\n    const cleanUserAns = String(userAns || '').replace(/\\s+/g, '').toLowerCase();\r\n    const cleanCorrectAns = String(actualAnswers[idx] || '').replace(/\\s+/g, '').toLowerCase();\r\n    \r\n    // For numeric answers, try parsing as numbers\r\n    let isMatch = false;\r\n    \r\n    if (cleanUserAns === '' || cleanCorrectAns === '') {\r\n      isMatch = false;\r\n    } else {\r\n      // Try exact string match first\r\n      isMatch = cleanUserAns === cleanCorrectAns;\r\n      \r\n      // If not exact match, try numeric comparison\r\n      if (!isMatch) {\r\n        const userNum = parseFloat(cleanUserAns);\r\n        const correctNum = parseFloat(cleanCorrectAns);\r\n        \r\n        if (!isNaN(userNum) && !isNaN(correctNum)) {\r\n          isMatch = Math.abs(userNum - correctNum) < 0.001; // Allow tiny floating point differences\r\n        }\r\n      }\r\n    }\r\n    \r\n    console.log(`Question ${idx + 1}: \"${cleanUserAns}\" vs \"${cleanCorrectAns}\" = ${isMatch ? 'CORRECT' : 'WRONG'}`);\r\n    \r\n    return isMatch;\r\n  }).length;\r\n  \r\n  const accuracy = expectedCount > 0 ? correctCount / expectedCount : 0;\r\n  const isCorrect = accuracy >= 0.8; // 80% threshold\r\n  const score = isCorrect ? 2 : -1;\r\n  \r\n  console.log(`Final Result: ${correctCount}/${expectedCount} correct, accuracy: ${(accuracy * 100).toFixed(1)}%`);\r\n  \r\n  // Create stable result object with all necessary data\r\n  const resultData = {\r\n    correct: isCorrect,\r\n    actualAnswer: `${correctCount}/${expectedCount} correct`,\r\n    score: score,\r\n    userAnswers: normalizedAnswers,\r\n    correctAnswers: actualAnswers,\r\n    accuracy: (accuracy * 100).toFixed(1) + '%',\r\n    gameType: gameType,\r\n    totalQuestions: expectedCount,\r\n    correctCount: correctCount,\r\n    timestamp: Date.now() // Add timestamp to prevent stale results\r\n  };\r\n  \r\n  console.log('Setting final result data:', resultData);\r\n  \r\n  // Update performance data\r\n  updatePerformanceData(isCorrect, score);\r\n\r\n  updatePerformanceData(isCorrect, score, null, {\r\n  totalQuestions: expectedCount,\r\n  correctAnswers: correctCount,\r\n  accuracy: (accuracy * 100).toFixed(1) + '%'\r\n});\r\n  \r\n  // Set result with error handling\r\n  try {\r\n    setResult(resultData);\r\n    \r\n    // Use a longer timeout to ensure state is set properly\r\n    setTimeout(() => {\r\n      console.log('Transitioning to result state');\r\n      setAppState('result');\r\n    }, 300);\r\n    \r\n  } catch (error) {\r\n    console.error('Error setting result:', error);\r\n    alert('Error displaying results. Please try again.');\r\n    setAppState('setup');\r\n  }\r\n};\r\n\r\n\r\n\r\nconst handleNumberPadInput = (value, event) => {\r\n  // Prevent event bubbling and default behavior\r\n  if (event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  }\r\n  \r\n  console.log(`Number pad input: ${value}, current answer: \"${currentQuestionAnswer}\"`);\r\n  \r\n  if (value === 'clear') {\r\n    setCurrentQuestionAnswer('');\r\n  } else if (value === 'backspace') {\r\n    setCurrentQuestionAnswer(prev => prev.slice(0, -1));\r\n  } else if (value === 'negative') {\r\n    setCurrentQuestionAnswer(prev => \r\n      prev.startsWith('-') ? prev.slice(1) : '-' + prev\r\n    );\r\n  } else {\r\n    // Add the number to current answer\r\n    setCurrentQuestionAnswer(prev => prev + value);\r\n  }\r\n};\r\n// const NumberPad = () => (\r\n//   <div className=\"number-pad\" style={{ position: 'relative', zIndex: 1000 }}>\r\n//     <div className=\"number-pad-row\">\r\n//       {[7, 8, 9].map(num => (\r\n//         <button \r\n//           key={num} \r\n//           onMouseDown={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//             handleNumberPadInput(num.toString(), e);\r\n//           }}\r\n//           onClick={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//           }}\r\n//           className=\"number-btn\"\r\n//           style={{ pointerEvents: 'auto' }}\r\n//         >\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       {[4, 5, 6].map(num => (\r\n//         <button \r\n//           key={num} \r\n//           onMouseDown={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//             handleNumberPadInput(num.toString(), e);\r\n//           }}\r\n//           onClick={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//           }}\r\n//           className=\"number-btn\"\r\n//           style={{ pointerEvents: 'auto' }}\r\n//         >\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       {[1, 2, 3].map(num => (\r\n//         <button \r\n//           key={num} \r\n//           onMouseDown={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//             handleNumberPadInput(num.toString(), e);\r\n//           }}\r\n//           onClick={(e) => {\r\n//             e.preventDefault();\r\n//             e.stopPropagation();\r\n//           }}\r\n//           className=\"number-btn\"\r\n//           style={{ pointerEvents: 'auto' }}\r\n//         >\r\n//           {num}\r\n//         </button>\r\n//       ))}\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       <button \r\n//         onMouseDown={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//           handleNumberPadInput('negative', e);\r\n//         }}\r\n//         onClick={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//         }}\r\n//         className=\"number-btn special\"\r\n//         style={{ pointerEvents: 'auto' }}\r\n//       >\r\n//         ±\r\n//       </button>\r\n//       <button \r\n//         onMouseDown={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//           handleNumberPadInput('0', e);\r\n//         }}\r\n//         onClick={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//         }}\r\n//         className=\"number-btn\"\r\n//         style={{ pointerEvents: 'auto' }}\r\n//       >\r\n//         0\r\n//       </button>\r\n//       <button \r\n//         onMouseDown={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//           handleNumberPadInput('backspace', e);\r\n//         }}\r\n//         onClick={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//         }}\r\n//         className=\"number-btn special\"\r\n//         style={{ pointerEvents: 'auto' }}\r\n//       >\r\n//         ⌫\r\n//       </button>\r\n//     </div>\r\n//     <div className=\"number-pad-row\">\r\n//       <button \r\n//         onMouseDown={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//           handleNumberPadInput('clear', e);\r\n//         }}\r\n//         onClick={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//         }}\r\n//         className=\"number-btn clear\"\r\n//         style={{ pointerEvents: 'auto' }}\r\n//       >\r\n//         Clear\r\n//       </button>\r\n//       <button \r\n//         onMouseDown={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//           console.log(`Manual submit clicked for question ${currentQuestionIndex + 1}`);\r\n//           console.log(`Current answer: \"${currentQuestionAnswer}\"`);\r\n//           submitCurrentQuestion();\r\n//         }}\r\n//         onClick={(e) => {\r\n//           e.preventDefault();\r\n//           e.stopPropagation();\r\n//         }}\r\n//         className=\"number-btn submit\"\r\n//         style={{ pointerEvents: 'auto' }}\r\n//       >\r\n//         Submit\r\n//       </button>\r\n//     </div>\r\n//   </div>\r\n// );\r\n\r\n// UPDATED NumberPad with better feedback:\r\nconst NumberPad = () => (\r\n  <div className=\"number-pad\" style={{ position: 'relative', zIndex: 1000 }}>\r\n    {/* Show message when time expired */}\r\n    {isInputDisabled && timeRemaining <= 0 && (\r\n      <div style={{\r\n        padding: '15px',\r\n        backgroundColor: '#ff6b6b',\r\n        color: 'white',\r\n        borderRadius: '8px',\r\n        marginBottom: '12px',\r\n        textAlign: 'center',\r\n        fontWeight: 'bold',\r\n        fontSize: '16px',\r\n        animation: 'pulse 1.5s infinite'\r\n      }}>\r\n        ⏰ Time Expired - Processing Results...\r\n      </div>\r\n    )}\r\n    \r\n    <div className=\"number-pad-row\">\r\n      {[7, 8, 9].map(num => (\r\n        <button \r\n          key={num} \r\n          onMouseDown={(e) => {\r\n            if (isInputDisabled) return;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            handleNumberPadInput(num.toString(), e);\r\n          }}\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          }}\r\n          className={`number-btn ${isInputDisabled ? 'disabled' : ''}`}\r\n          style={{ \r\n            pointerEvents: 'auto',\r\n            opacity: isInputDisabled ? 0.5 : 1,\r\n            cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n          }}\r\n          disabled={isInputDisabled}\r\n        >\r\n          {num}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    <div className=\"number-pad-row\">\r\n      {[4, 5, 6].map(num => (\r\n        <button \r\n          key={num} \r\n          onMouseDown={(e) => {\r\n            if (isInputDisabled) return;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            handleNumberPadInput(num.toString(), e);\r\n          }}\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          }}\r\n          className={`number-btn ${isInputDisabled ? 'disabled' : ''}`}\r\n          style={{ \r\n            pointerEvents: 'auto',\r\n            opacity: isInputDisabled ? 0.5 : 1,\r\n            cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n          }}\r\n          disabled={isInputDisabled}\r\n        >\r\n          {num}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    <div className=\"number-pad-row\">\r\n      {[1, 2, 3].map(num => (\r\n        <button \r\n          key={num} \r\n          onMouseDown={(e) => {\r\n            if (isInputDisabled) return;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            handleNumberPadInput(num.toString(), e);\r\n          }}\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          }}\r\n          className={`number-btn ${isInputDisabled ? 'disabled' : ''}`}\r\n          style={{ \r\n            pointerEvents: 'auto',\r\n            opacity: isInputDisabled ? 0.5 : 1,\r\n            cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n          }}\r\n          disabled={isInputDisabled}\r\n        >\r\n          {num}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    <div className=\"number-pad-row\">\r\n      <button \r\n        onMouseDown={(e) => {\r\n          if (isInputDisabled) return;\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          handleNumberPadInput('negative', e);\r\n        }}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        className={`number-btn special ${isInputDisabled ? 'disabled' : ''}`}\r\n        style={{ \r\n          pointerEvents: 'auto',\r\n          opacity: isInputDisabled ? 0.5 : 1,\r\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n        }}\r\n        disabled={isInputDisabled}\r\n      >\r\n        ±\r\n      </button>\r\n      <button \r\n        onMouseDown={(e) => {\r\n          if (isInputDisabled) return;\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          handleNumberPadInput('0', e);\r\n        }}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        className={`number-btn ${isInputDisabled ? 'disabled' : ''}`}\r\n        style={{ \r\n          pointerEvents: 'auto',\r\n          opacity: isInputDisabled ? 0.5 : 1,\r\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n        }}\r\n        disabled={isInputDisabled}\r\n      >\r\n        0\r\n      </button>\r\n      <button \r\n        onMouseDown={(e) => {\r\n          if (isInputDisabled) return;\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          handleNumberPadInput('backspace', e);\r\n        }}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        className={`number-btn special ${isInputDisabled ? 'disabled' : ''}`}\r\n        style={{ \r\n          pointerEvents: 'auto',\r\n          opacity: isInputDisabled ? 0.5 : 1,\r\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n        }}\r\n        disabled={isInputDisabled}\r\n      >\r\n        ⌫\r\n      </button>\r\n    </div>\r\n    <div className=\"number-pad-row\">\r\n      <button \r\n        onMouseDown={(e) => {\r\n          if (isInputDisabled) return;\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          handleNumberPadInput('clear', e);\r\n        }}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        className={`number-btn clear ${isInputDisabled ? 'disabled' : ''}`}\r\n        style={{ \r\n          pointerEvents: 'auto',\r\n          opacity: isInputDisabled ? 0.5 : 1,\r\n          cursor: isInputDisabled ? 'not-allowed' : 'pointer'\r\n        }}\r\n        disabled={isInputDisabled}\r\n      >\r\n        Clear\r\n      </button>\r\n      <button \r\n        onMouseDown={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          if (!isInputDisabled || timeRemaining > 0) {\r\n            console.log(`Submit clicked for question ${currentQuestionIndex + 1}`);\r\n            submitCurrentQuestion();\r\n          }\r\n        }}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        className=\"number-btn submit\"\r\n        style={{ \r\n          pointerEvents: 'auto',\r\n          backgroundColor: isInputDisabled && timeRemaining <= 0 ? '#28a745' : '#6c5ce7',\r\n          opacity: 1,\r\n          cursor: isInputDisabled && timeRemaining <= 0 ? 'wait' : 'pointer'\r\n        }}\r\n        disabled={isInputDisabled && timeRemaining <= 0}\r\n      >\r\n        {isInputDisabled && timeRemaining <= 0 ? 'Processing...' : 'Submit'}\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\nconst handleNumberPadInputFixed = (value, event) => {\r\n  if (event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  }\r\n  \r\n  console.log(`Number pad clicked: ${value}`);\r\n  \r\n  // Use functional state updates to avoid race conditions\r\n  if (value === 'clear') {\r\n    setCurrentQuestionAnswer('');\r\n    console.log('Cleared answer');\r\n  } else if (value === 'backspace') {\r\n    setCurrentQuestionAnswer(prev => {\r\n      const newValue = prev.slice(0, -1);\r\n      console.log(`Backspace: \"${prev}\" -> \"${newValue}\"`);\r\n      return newValue;\r\n    });\r\n  } else if (value === 'negative') {\r\n    setCurrentQuestionAnswer(prev => {\r\n      const newValue = prev.startsWith('-') ? prev.slice(1) : '-' + prev;\r\n      console.log(`Toggle negative: \"${prev}\" -> \"${newValue}\"`);\r\n      return newValue;\r\n    });\r\n  } else {\r\n    setCurrentQuestionAnswer(prev => {\r\n      const newValue = prev + value;\r\n      console.log(`Add digit: \"${prev}\" -> \"${newValue}\"`);\r\n      return newValue;\r\n    });\r\n  }\r\n};\r\n  const showNumbersSequentially = (nums) => {\r\n    let index = 0;\r\n    \r\n    const interval = setInterval(() => {\r\n      if (index < (gameType === 'comparison' ? comparisonPairs.length : nums.length)) {\r\n        setCurrentIndex(index);\r\n        index++;\r\n      } else {\r\n        clearInterval(interval);\r\n        setShowingNumbers(false);\r\n        setCurrentIndex(-1);\r\n      }\r\n    }, speed * 1000);\r\n  };\r\n  \r\n  // Function to show pairs sequentially for math operations\r\n  const showPairsSequentially = (pairs) => {\r\n    let index = 0;\r\n    \r\n    const interval = setInterval(() => {\r\n      if (index < pairs.length) {\r\n        setCurrentIndex(index);\r\n        index++;\r\n      } else {\r\n        clearInterval(interval);\r\n        setShowingNumbers(false);\r\n        setCurrentIndex(-1);\r\n      }\r\n    }, speed * 1000);\r\n  };\r\n  \r\n  const checkAnswer = () => {\r\n    let correct = false;\r\n    let actualAnswer = '';\r\n    let score = 0;\r\n    let maxScore = 1;\r\n    \r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        // For subtraction, we expect comma-separated answers\r\n        const subtractionAnswers = userAnswer.replace(/\\s+/g, '').split(',');\r\n        const correctSubtractionAnswers = comparisonPairs.map(([a, b]) => (a - b).toString());\r\n        actualAnswer = correctSubtractionAnswers.join(',');\r\n        \r\n        // Check if all answers are correct\r\n        correct = subtractionAnswers.length === correctSubtractionAnswers.length &&\r\n                 subtractionAnswers.every((ans, idx) => ans === correctSubtractionAnswers[idx]);\r\n        \r\n        // Calculate score based on correct answers\r\n        // const correctSubtractionCount = subtractionAnswers.filter((ans, idx) => \r\n        //   idx < correctSubtractionAnswers.length && ans === correctSubtractionAnswers[idx]\r\n        // ).length;\r\n        \r\n        // maxScore = comparisonPairs.length;\r\n        // score = Math.max(correctSubtractionCount - (comparisonPairs.length - correctSubtractionCount) * 0.25, 0);\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      \r\n      case 'multiplication':\r\n        // For multiplication, we expect comma-separated answers\r\n        const multiplicationAnswers = userAnswer.replace(/\\s+/g, '').split(',');\r\n        const correctMultiplicationAnswers = comparisonPairs.map(([a, b]) => (a * b).toString());\r\n        actualAnswer = correctMultiplicationAnswers.join(',');\r\n        \r\n        // Check if all answers are correct\r\n        correct = multiplicationAnswers.length === correctMultiplicationAnswers.length &&\r\n                 multiplicationAnswers.every((ans, idx) => ans === correctMultiplicationAnswers[idx]);\r\n        \r\n        // // Calculate score based on correct answers\r\n        // const correctMultiplicationCount = multiplicationAnswers.filter((ans, idx) => \r\n        //   idx < correctMultiplicationAnswers.length && ans === correctMultiplicationAnswers[idx]\r\n        // ).length;\r\n        \r\n        // maxScore = comparisonPairs.length;\r\n        // score = Math.max(correctMultiplicationCount - (comparisonPairs.length - correctMultiplicationCount) * 0.25, 0);\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      \r\n      case 'division':\r\n        // For division, we expect comma-separated answers\r\n        const divisionAnswers = userAnswer.replace(/\\s+/g, '').split(',');\r\n        const correctDivisionAnswers = comparisonPairs.map(([a, b]) => (a / b).toString());\r\n        actualAnswer = correctDivisionAnswers.join(',');\r\n        \r\n        // Check if all answers are correct\r\n        correct = divisionAnswers.length === correctDivisionAnswers.length &&\r\n                 divisionAnswers.every((ans, idx) => ans === correctDivisionAnswers[idx]);\r\n        \r\n        // // Calculate score based on correct answers\r\n        // const correctDivisionCount = divisionAnswers.filter((ans, idx) => \r\n        //   idx < correctDivisionAnswers.length && ans === correctDivisionAnswers[idx]\r\n        // ).length;\r\n        \r\n        // maxScore = comparisonPairs.length;\r\n        // score = Math.max(correctDivisionCount - (comparisonPairs.length - correctDivisionCount) * 0.25, 0);\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      \r\n          // Add new total operation cases\r\n    case 'totalAddition':\r\n      const totalSum = numbers.reduce((sum, num) => sum + num, 0);\r\n      actualAnswer = totalSum.toString();\r\n      correct = userAnswer === actualAnswer;\r\n       score = correct ? 2 : -1;\r\n      break;\r\n      \r\n    // case 'totalSubtraction':\r\n    //   // Start with the first number, then subtract all others\r\n    //   const totalDifference = numbers.reduce((diff, num, idx) => \r\n    //     idx === 0 ? num : diff - num, 0);\r\n    //   actualAnswer = totalDifference.toString();\r\n    //   correct = userAnswer === actualAnswer;\r\n    //    score = correct ? 2 : -1;\r\n    //   break;\r\n\r\n    // 2. Fix the checkAnswer function for totalSubtraction (around line 695)\r\ncase 'totalSubtraction':\r\n  // Calculate total by starting with first number and subtracting the rest\r\n  const totalDifference = numbers.reduce((result, num, idx) => {\r\n    if (idx === 0) return num;\r\n    return result - num;\r\n  }, 0);\r\n  \r\n  actualAnswer = totalDifference.toString();\r\n  correct = userAnswer === actualAnswer;\r\n   score = correct ? 2 : -1;\r\n  break;\r\n\r\n    \r\n      \r\n    case 'totalMultiplication':\r\n      const totalProduct = numbers.reduce((product, num) => product * num, 1);\r\n      actualAnswer = totalProduct.toString();\r\n      correct = userAnswer === actualAnswer;\r\n       score = correct ? 2 : -1;\r\n      break;\r\n      \r\n    case 'totalDivision':\r\n      // Start with the first number, then divide by all others\r\n      const totalQuotient = numbers.reduce((quotient, num, idx) => \r\n        idx === 0 ? num : quotient / num, 0);\r\n      actualAnswer = totalQuotient.toString();\r\n      correct = userAnswer === actualAnswer;\r\n       score = correct ? 2 : -1;\r\n      break;\r\n        \r\n      case 'memory':\r\n        actualAnswer = numbers.join('');\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'addition':\r\n        actualAnswer = numbers.reduce((sum, num) => sum + num, 0).toString();\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'counting':\r\n        actualAnswer = numbers.filter(n => n === targetNumber).length.toString();\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'pattern':\r\n        const patternStep = numbers[1] - numbers[0];\r\n        actualAnswer = (numbers[numbers.length - 1] + patternStep).toString();\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'reverse':\r\n        actualAnswer = [...numbers].reverse().join('');\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'missing':\r\n        const missingNumbers = missingIndices.map(idx => idx + 1).sort((a, b) => a - b).join(',');\r\n        actualAnswer = missingNumbers;\r\n        correct = userAnswer.replace(/\\s+/g, '') === missingNumbers;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'oddeven':\r\n        const oddCount = numbers.filter(n => n % 2 !== 0).length;\r\n        const evenCount = numbers.filter(n => n % 2 === 0).length;\r\n        actualAnswer = `Odd: ${oddCount}, Even: ${evenCount}`;\r\n        const userCounts = userAnswer.toLowerCase().split(',');\r\n        const userOdd = parseInt(userCounts[0]?.replace(/\\D/g, '') || 0);\r\n        const userEven = parseInt(userCounts[1]?.replace(/\\D/g, '') || 0);\r\n        correct = userOdd === oddCount && userEven === evenCount;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'multiples':\r\n        actualAnswer = (targetNumber * (numbers.length + 1)).toString();\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'comparison':\r\n        const comparisons = userAnswer.replace(/\\s+/g, '').split(',');\r\n        const correctComparisons = comparisonPairs.map(([a, b]) => \r\n          a > b ? '>' : (a < b ? '<' : '=')\r\n        );\r\n        actualAnswer = correctComparisons.join(',');\r\n        correct = comparisons.join('') === correctComparisons.join('');\r\n        \r\n        const correctCount = comparisons.filter((c, i) => c === correctComparisons[i]).length;\r\n        maxScore = comparisonPairs.length;\r\n        score = Math.max(correctCount - (comparisonPairs.length - correctCount) * 0.25, 0);\r\n        break;\r\n      case 'speed':\r\n        const endNumber = numbers[numbers.length - 1];\r\n        actualAnswer = endNumber.toString();\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      case 'symbol':\r\n        const associations = userAnswer.replace(/\\s+/g, '').split(',');\r\n        const correctAssociations = numbers.map((n, i) => `${symbols[i]}=${n}`).join(',');\r\n        actualAnswer = correctAssociations;\r\n        correct = associations.join('') === numbers.map((n, i) => `${symbols[i]}${n}`).join('');\r\n         score = correct ? 2 : -1;\r\n        break;\r\n      default:\r\n        actualAnswer = numbers.join('');\r\n        correct = userAnswer === actualAnswer;\r\n         score = correct ? 2 : -1;\r\n    }\r\n    \r\n    setResult({ correct, actualAnswer, score, maxScore });\r\n    updatePerformanceData(correct, score, maxScore);\r\n    setAppState('result');\r\n  };\r\n  \r\n  // const updatePerformanceData = (correct, score, maxScore) => {\r\n  //   const today = getCurrentDateString();\r\n    \r\n  //   setPerformanceData(prevData => {\r\n  //     const newData = JSON.parse(JSON.stringify(prevData));\r\n      \r\n  //     newData.totalGames = (newData.totalGames || 0) + 1;\r\n  //     newData.totalCorrect = (newData.totalCorrect || 0) + (correct ? 1 : 0);\r\n  //     newData.totalScore = (newData.totalScore || 0) + score;\r\n      \r\n  //     if (!newData.gameTypes[gameType]) {\r\n  //       newData.gameTypes[gameType] = {\r\n  //         plays: 0,\r\n  //         correct: 0,\r\n  //         score: 0\r\n  //       };\r\n  //     }\r\n  //     newData.gameTypes[gameType].plays += 1;\r\n  //     newData.gameTypes[gameType].correct += correct ? 1 : 0;\r\n  //     newData.gameTypes[gameType].score += score;\r\n      \r\n  //     if (!newData.dailyStats[today]) {\r\n  //       newData.dailyStats[today] = {\r\n  //         plays: 0,\r\n  //         correct: 0,\r\n  //         score: 0,\r\n  //         gameTypes: {}\r\n  //       };\r\n  //     }\r\n  //     newData.dailyStats[today].plays += 1;\r\n  //     newData.dailyStats[today].correct += correct ? 1 : 0;\r\n  //     newData.dailyStats[today].score += score;\r\n      \r\n  //     if (!newData.dailyStats[today].gameTypes[gameType]) {\r\n  //       newData.dailyStats[today].gameTypes[gameType] = {\r\n  //         plays: 0,\r\n  //         correct: 0,\r\n  //         score: 0\r\n  //       };\r\n  //     }\r\n  //     newData.dailyStats[today].gameTypes[gameType].plays += 1;\r\n  //     newData.dailyStats[today].gameTypes[gameType].correct += correct ? 1 : 0;\r\n  //     newData.dailyStats[today].gameTypes[gameType].score += score;\r\n      \r\n  //     newData.history = newData.history || [];\r\n  //     newData.history.unshift({\r\n  //       date: today,\r\n  //       timestamp: new Date().toISOString(),\r\n  //       gameType,\r\n  //       // difficulty,\r\n  //       speed,\r\n  //       count,\r\n  //       correct,\r\n  //       score,\r\n  //       maxScore,\r\n  //       userId\r\n  //     });\r\n      \r\n  //     if (newData.history.length > 100) {\r\n  //       newData.history = newData.history.slice(0, 100);\r\n  //     }\r\n      \r\n  //     return newData;\r\n  //   });\r\n  // };\r\n  \r\n// const resetGame = () => {\r\n//   setAppState('setup');\r\n//   setUserAnswer('');\r\n//   setNumbers([]);\r\n//   setCurrentIndex(0);\r\n//   setShowingNumbers(false);\r\n//   setTargetNumber(null);\r\n//   setMissingIndices([]);\r\n//   setSymbols([]);\r\n//   setComparisonPairs([]);\r\n//   setResult({ correct: false, actualAnswer: '', score: 0 });\r\n  \r\n//   // Clear new question-based game states\r\n//   setCurrentQuestionIndex(0);\r\n//   setQuestionAnswers([]);\r\n//   setCurrentQuestionAnswer('');\r\n//   setTimeRemaining(0);\r\n  \r\n//   // Clear addition game states\r\n//   setAdditionNumbers([]);\r\n//   setAdditionTimeRemaining(0);\r\n//   setShowAdditionAnswer(false);\r\n  \r\n//   // Clear any running timers\r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n//   // if (additionTimer) {\r\n//   //   clearInterval(additionTimer);\r\n//   //   setAdditionTimer(null);\r\n//   // } \r\n\r\n\r\n// // Reset digit inputs to default\r\n// setFirstDigit(1);\r\n// setSecondDigit(1);\r\n\r\n//  if (beepInterval) {\r\n//     clearInterval(beepInterval);\r\n//     setBeepInterval(null);\r\n//   }\r\n// };\r\n\r\n// 6. UPDATE resetGame to clear global timer\r\n// const resetGame = () => {\r\n//   setAppState('setup');\r\n//   setUserAnswer('');\r\n//   setNumbers([]);\r\n//   setCurrentIndex(0);\r\n//   setShowingNumbers(false);\r\n//   setTargetNumber(null);\r\n//   setMissingIndices([]);\r\n//   setSymbols([]);\r\n//   setComparisonPairs([]);\r\n//   setResult({ correct: false, actualAnswer: '', score: 0 });\r\n  \r\n//   // Clear question-based game states\r\n//   setCurrentQuestionIndex(0);\r\n//   setQuestionAnswers([]);\r\n//   setCurrentQuestionAnswer('');\r\n//   setTimeRemaining(0);\r\n  \r\n//   // Clear addition game states\r\n//   setAdditionNumbers([]);\r\n//   setAdditionTimeRemaining(0);\r\n//   setShowAdditionAnswer(false);\r\n  \r\n//   // Clear ALL timers - including global timer\r\n//   if (questionTimer) {\r\n//     clearInterval(questionTimer);\r\n//     setQuestionTimer(null);\r\n//   }\r\n//   if (additionTimer) {\r\n//     clearInterval(additionTimer);\r\n//     setAdditionTimer(null);\r\n//   }\r\n//   if (totalGameTimer) {\r\n//     clearInterval(totalGameTimer);\r\n//     setTotalGameTimer(null);\r\n//   }\r\n//   if (beepInterval) {\r\n//     clearInterval(beepInterval);\r\n//     setBeepInterval(null);\r\n//   }\r\n  \r\n//   // Reset global game timer states\r\n//   setTotalGameTime(0);\r\n//   setGameStartTime(null);\r\n  \r\n//   setFirstDigit(1);\r\n//   setSecondDigit(1);\r\n// };\r\n// 18\r\n\r\n// const resetGame = () => {\r\n//   console.log('=== RESETTING GAME ===');\r\n  \r\n//   // Clear ALL timers first\r\n//   const timersToGlear = [\r\n//     questionTimer, additionTimer, totalGameTimer, \r\n//     beepInterval, autoSubmitTimer, gameIntervalTimer\r\n//   ];\r\n  \r\n//   timersToGlear.forEach(timer => {\r\n//     if (timer) {\r\n//       clearInterval(timer);\r\n//       clearTimeout(timer);\r\n//     }\r\n//   });\r\n  \r\n//   // Reset all timer states\r\n//   setQuestionTimer(null);\r\n//   setAdditionTimer(null);\r\n//   setTotalGameTimer(null);\r\n//   setBeepInterval(null);\r\n//   setAutoSubmitTimer(null);\r\n//   setGameIntervalTimer(null);\r\n  \r\n//   // Reset all game states\r\n//   setAppState('setup');\r\n//   setUserAnswer('');\r\n//   setNumbers([]);\r\n//   setCurrentIndex(0);\r\n//   setShowingNumbers(false);\r\n//   setTargetNumber(null);\r\n//   setMissingIndices([]);\r\n//   setSymbols([]);\r\n//   setComparisonPairs([]);\r\n  \r\n//   // Clear question-based game states\r\n//   setCurrentQuestionIndex(0);\r\n//   setQuestionAnswers([]);\r\n//   setCurrentQuestionAnswer('');\r\n//   setTimeRemaining(0);\r\n//   setGameElapsedTime(0);\r\n//   setAvailableQuestions(new Set([0]));\r\n  \r\n//   // Clear addition/subtraction game states\r\n//   setAdditionNumbers([]);\r\n//   setAdditionCurrentIndex(0);\r\n//   setAdditionShowingNumbers(true);\r\n//   setAdditionTimeRemaining(0);\r\n//   setShowAdditionAnswer(false);\r\n//   setAdditionCurrentTimer(0);\r\n  \r\n//   setSubtractionNumbers([]);\r\n//   setSubtractionCurrentIndex(0);\r\n//   setSubtractionShowingNumbers(true);\r\n//   setShowSubtractionAnswer(false);\r\n//   setSubtractionTimeRemaining(0);\r\n//   setSubtractionTimer(null);\r\n//   setSubtractionCurrentTimer(0);\r\n  \r\n//   setMixedMathTimer(0);\r\n  \r\n//   // Reset global game timer states\r\n//   setTotalGameTime(0);\r\n//   setGameStartTime(null);\r\n  \r\n//   // Reset difficulty settings to default\r\n//   setFirstDigit(1);\r\n//   setSecondDigit(1);\r\n  \r\n//   // Clear result - this is crucial\r\n//   setResult({ correct: false, actualAnswer: '', score: 0 });\r\n  \r\n//   console.log('Game reset completed');\r\n// };\r\n\r\n// const resetGame = () => {\r\n//   console.log('=== RESETTING GAME - ENHANCED VERSION ===');\r\n  \r\n//   // Clear ALL timers with enhanced cleanup\r\n//   const allTimers = [\r\n//     questionTimer, additionTimer, totalGameTimer, \r\n//     beepInterval, autoSubmitTimer, gameIntervalTimer,\r\n//     subtractionTimer\r\n//   ];\r\n  \r\n//   allTimers.forEach(timer => {\r\n//     if (timer) {\r\n//       try {\r\n//         clearInterval(timer);\r\n//         clearTimeout(timer);\r\n//       } catch (e) {\r\n//         console.log('Timer cleanup error (non-critical):', e.message);\r\n//       }\r\n//     }\r\n//   });\r\n  \r\n//   // Reset all timer states\r\n//   setQuestionTimer(null);\r\n//   setAdditionTimer(null);\r\n//   setTotalGameTimer(null);\r\n//   setBeepInterval(null);\r\n//   setAutoSubmitTimer(null);\r\n//   setGameIntervalTimer(null);\r\n//   setSubtractionTimer(null);\r\n  \r\n//   // Reset all game states\r\n//   setAppState('setup');\r\n//   setUserAnswer('');\r\n//   setNumbers([]);\r\n//   setCurrentIndex(0);\r\n//   setShowingNumbers(false);\r\n//   setTargetNumber(null);\r\n//   setMissingIndices([]);\r\n//   setSymbols([]);\r\n//   setComparisonPairs([]);\r\n  \r\n//   // Clear question-based game states\r\n//   setCurrentQuestionIndex(0);\r\n//   setQuestionAnswers([]);\r\n//   setCurrentQuestionAnswer('');\r\n//   setTimeRemaining(0);\r\n//   setGameElapsedTime(0);\r\n//   setAvailableQuestions(new Set([0]));\r\n  \r\n//   // Clear all math game states\r\n//   setAdditionNumbers([]);\r\n//   setAdditionCurrentIndex(0);\r\n//   setAdditionShowingNumbers(true);\r\n//   setAdditionTimeRemaining(0);\r\n//   setShowAdditionAnswer(false);\r\n//   setAdditionCurrentTimer(0);\r\n  \r\n//   setSubtractionNumbers([]);\r\n//   setSubtractionCurrentIndex(0);\r\n//   setSubtractionShowingNumbers(true);\r\n//   setShowSubtractionAnswer(false);\r\n//   setSubtractionTimeRemaining(0);\r\n//   setSubtractionCurrentTimer(0);\r\n  \r\n//   setMixedMathTimer(0);\r\n  \r\n//   // Reset global timer states\r\n//   setTotalGameTime(0);\r\n//   setGameStartTime(null);\r\n  \r\n//   // Reset difficulty settings\r\n//   setFirstDigit(1);\r\n//   setSecondDigit(1);\r\n  \r\n//   // CRITICAL: Clear result with null check\r\n//   setResult(null);\r\n  \r\n//   console.log('Game reset completed successfully');\r\n// };\r\n\r\nconst updatePerformanceData = (correct, score, maxScore, additionalData = {}) => {\r\n  const today = getCurrentDateString();\r\n  \r\n  setPerformanceData(prevData => {\r\n    const newData = JSON.parse(JSON.stringify(prevData));\r\n    \r\n    newData.totalGames = (newData.totalGames || 0) + 1;\r\n    newData.totalCorrect = (newData.totalCorrect || 0) + (correct ? 1 : 0);\r\n    newData.totalScore = (newData.totalScore || 0) + score;\r\n    \r\n    if (!newData.gameTypes[gameType]) {\r\n      newData.gameTypes[gameType] = {\r\n        plays: 0,\r\n        correct: 0,\r\n        score: 0,\r\n        totalQuestions: 0,\r\n        correctAnswers: 0\r\n      };\r\n    }\r\n    newData.gameTypes[gameType].plays += 1;\r\n    newData.gameTypes[gameType].correct += correct ? 1 : 0;\r\n    newData.gameTypes[gameType].score += score;\r\n    // Add detailed question tracking\r\n    newData.gameTypes[gameType].totalQuestions += (additionalData.totalQuestions || count || 1);\r\n    newData.gameTypes[gameType].correctAnswers += (additionalData.correctAnswers || (correct ? 1 : 0));\r\n    \r\n    if (!newData.dailyStats[today]) {\r\n      newData.dailyStats[today] = {\r\n        plays: 0,\r\n        correct: 0,\r\n        score: 0,\r\n        totalQuestions: 0,\r\n        correctAnswers: 0,\r\n        gameTypes: {}\r\n      };\r\n    }\r\n    newData.dailyStats[today].plays += 1;\r\n    newData.dailyStats[today].correct += correct ? 1 : 0;\r\n    newData.dailyStats[today].score += score;\r\n    newData.dailyStats[today].totalQuestions += (additionalData.totalQuestions || count || 1);\r\n    newData.dailyStats[today].correctAnswers += (additionalData.correctAnswers || (correct ? 1 : 0));\r\n    \r\n    if (!newData.dailyStats[today].gameTypes[gameType]) {\r\n      newData.dailyStats[today].gameTypes[gameType] = {\r\n        plays: 0,\r\n        correct: 0,\r\n        score: 0,\r\n        totalQuestions: 0,\r\n        correctAnswers: 0\r\n      };\r\n    }\r\n    newData.dailyStats[today].gameTypes[gameType].plays += 1;\r\n    newData.dailyStats[today].gameTypes[gameType].correct += correct ? 1 : 0;\r\n    newData.dailyStats[today].gameTypes[gameType].score += score;\r\n    newData.dailyStats[today].gameTypes[gameType].totalQuestions += (additionalData.totalQuestions || count || 1);\r\n    newData.dailyStats[today].gameTypes[gameType].correctAnswers += (additionalData.correctAnswers || (correct ? 1 : 0));\r\n    \r\n    newData.history = newData.history || [];\r\n    newData.history.unshift({\r\n      date: today,\r\n      timestamp: new Date().toISOString(),\r\n      gameType,\r\n      difficulty: `${firstDigit || 1}-${secondDigit || 1} digits`,\r\n      speed,\r\n      count,\r\n      correct,\r\n      score,\r\n      maxScore,\r\n      totalQuestions: additionalData.totalQuestions || count || 1,\r\n      correctAnswers: additionalData.correctAnswers || (correct ? 1 : 0),\r\n      accuracy: additionalData.accuracy || (correct ? '100%' : '0%'),\r\n      userId\r\n    });\r\n    \r\n    if (newData.history.length > 100) {\r\n      newData.history = newData.history.slice(0, 100);\r\n    }\r\n    \r\n    return newData;\r\n  });\r\n};\r\n\r\nconst resetGame = () => {\r\n  console.log('=== RESETTING GAME - KEEPING USER SETTINGS ===');\r\n  \r\n  // Clear all timers\r\n  const allTimers = [\r\n    questionTimer, additionTimer, totalGameTimer, \r\n    beepInterval, autoSubmitTimer, gameIntervalTimer,\r\n    subtractionTimer\r\n  ];\r\n  \r\n  allTimers.forEach(timer => {\r\n    if (timer) {\r\n      try {\r\n        clearInterval(timer);\r\n        clearTimeout(timer);\r\n      } catch (e) {\r\n        console.log('Timer cleanup error (non-critical):', e.message);\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Reset timer states\r\n  setTotalGameTimer(null);\r\n  setQuestionTimer(null);\r\n  setAdditionTimer(null);\r\n  setBeepInterval(null);\r\n  setAutoSubmitTimer(null);\r\n  setGameIntervalTimer(null);\r\n  setSubtractionTimer(null);\r\n  \r\n  // Reset game states\r\n  setAppState('setup');\r\n  setUserAnswer('');\r\n  setNumbers([]);\r\n  setCurrentIndex(0);\r\n  setShowingNumbers(false);\r\n  setTargetNumber(null);\r\n  setMissingIndices([]);\r\n  setSymbols([]);\r\n  setComparisonPairs([]);\r\n  \r\n  // Reset question states\r\n  setCurrentQuestionIndex(0);\r\n  setQuestionAnswers([]);\r\n  setCurrentQuestionAnswer('');\r\n  setTimeRemaining(0);\r\n  setGameElapsedTime(0);\r\n  setAvailableQuestions(new Set([0]));\r\n  \r\n  // Reset math game states\r\n  setAdditionNumbers([]);\r\n  setAdditionCurrentIndex(0);\r\n  setAdditionShowingNumbers(true);\r\n  setAdditionTimeRemaining(0);\r\n  setShowAdditionAnswer(false);\r\n  setAdditionCurrentTimer(0);\r\n  \r\n  setSubtractionNumbers([]);\r\n  setSubtractionCurrentIndex(0);\r\n  setSubtractionShowingNumbers(true);\r\n  setShowSubtractionAnswer(false);\r\n  setSubtractionTimeRemaining(0);\r\n  setSubtractionCurrentTimer(0);\r\n  \r\n  setMixedMathTimer(0);\r\n  \r\n  // Reset timer states\r\n  setTotalGameTime(0);\r\n  setGameStartTime(null);\r\n  \r\n  // ✅ DON'T RESET USER'S SETTINGS - Keep speed, count, firstDigit, secondDigit, difficulty as they are\r\n  // User wants to play again with the same settings!\r\n  \r\n  // Reset input disabled state\r\n  setIsInputDisabled(false);\r\n  \r\n  // Clear result\r\n  setResult(null);\r\n  \r\n  console.log('Game reset completed - user settings preserved');\r\n};\r\n  \r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', { \r\n      weekday: 'short', \r\n      month: 'short', \r\n      day: 'numeric' \r\n    });\r\n  };\r\n  {isInputDisabled && (\r\n  <div className=\"timer-expired-message\" style={{\r\n    backgroundColor: '#fff3cd',\r\n    color: '#856404',\r\n    padding: '10px',\r\n    borderRadius: '5px',\r\n    textAlign: 'center',\r\n    marginBottom: '10px',\r\n    fontWeight: 'bold'\r\n  }}>\r\n    ⏰ Time Expired! Review your answers and submit when ready.\r\n  </div>\r\n)}\r\n\r\n<div className=\"total-time-remaining\">\r\n  {timeRemaining > 0 \r\n    ? `Time remaining: ${Math.ceil(timeRemaining / 1000)}s`\r\n    : 'Time expired - Submit your answers'\r\n  }\r\n</div>\r\n  const clearPerformanceData = () => {\r\n    const emptyData = {\r\n      totalGames: 0,\r\n      totalCorrect: 0,\r\n      totalScore: 0,\r\n      gameTypes: {},\r\n      dailyStats: {},\r\n      history: []\r\n    };\r\n    \r\n    setPerformanceData(emptyData);\r\n    localStorage.setItem('avecusPerformance', JSON.stringify(emptyData));\r\n    \r\n    if (userId) {\r\n      axios.delete(`${API_URL}/performance/${userId}`, {\r\n        headers: { Authorization: `${localStorage.getItem('token')}` }\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error clearing server data:\", err);\r\n        setError(\"Failed to clear data from server.\");\r\n      });\r\n    }\r\n    \r\n    setShowConfirmDialog(false);\r\n  };\r\n  \r\n  const getDisplayText = () => {\r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\r\n          const [a, b] = comparisonPairs[currentIndex];\r\n          return `${a} - ${b} = ?`;\r\n        }\r\n        return '';\r\n      case 'multiplication':\r\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\r\n          const [a, b] = comparisonPairs[currentIndex];\r\n          return `${a} × ${b} = ?`;\r\n        }\r\n        return '';\r\n      case 'division':\r\n        if (currentIndex >= 0 && currentIndex < comparisonPairs.length) {\r\n          const [a, b] = comparisonPairs[currentIndex];\r\n          return `${a} ÷ ${b} = ?`;\r\n        }\r\n        return '';\r\n\r\n        // Add new total operation cases\r\n    case 'totalAddition':\r\n      if (currentIndex === 0) return `${numbers[currentIndex]}`;\r\n      return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' +' : ' = ?'}`;\r\n      \r\n    // case 'totalSubtraction':\r\n    //   if (currentIndex === 0) return `${numbers[currentIndex]}`;\r\n    //   return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' -' : ' = ?'}`;\r\n    \r\n      case 'totalSubtraction':\r\n    if (currentIndex === 0) {\r\n      return `${numbers[currentIndex]}`; // First number\r\n    } else {\r\n      // Show the operation as subtraction\r\n      return `- ${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? '' : ' = ?'}`;\r\n    }\r\n\r\n    case 'totalMultiplication':\r\n      if (currentIndex === 0) return `${numbers[currentIndex]}`;\r\n      return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' ×' : ' = ?'}`;\r\n      \r\n    case 'totalDivision':\r\n      if (currentIndex === 0) return `${numbers[currentIndex]}`;\r\n      return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' ÷' : ' = ?'}`;\r\n      \r\n      case 'memory':\r\n        return numbers[currentIndex];\r\n      case 'addition':\r\n        return `${numbers[currentIndex]}${currentIndex < numbers.length - 1 ? ' +' : ''}`;\r\n      case 'counting':\r\n        return `${numbers[currentIndex]} (Target: ${targetNumber})`;\r\n      case 'pattern':\r\n        return numbers[currentIndex];\r\n      case 'reverse':\r\n        return numbers[currentIndex];\r\n      case 'missing':\r\n        return missingIndices.includes(currentIndex) ? '?' : currentIndex + 1;\r\n      case 'oddeven':\r\n        return `${numbers[currentIndex]} (${numbers[currentIndex] % 2 === 0 ? 'Even' : 'Odd'})`;\r\n      case 'multiples':\r\n        return `${numbers[currentIndex]} (${targetNumber} × ${currentIndex + 1})`;\r\n      case 'comparison':\r\n        const [a, b] = comparisonPairs[currentIndex];\r\n        return `${a} ? ${b}`;\r\n      case 'speed':\r\n        return numbers[currentIndex];\r\n      case 'symbol':\r\n        return `${symbols[currentIndex]} = ${numbers[currentIndex]}`;\r\n      default:\r\n        return numbers[currentIndex];\r\n    }\r\n  };\r\n  \r\n  const getInstructionText = () => {\r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        return \"Solve each subtraction problem (comma-separated answers)\";\r\n      case 'multiplication':\r\n        return \"Solve each multiplication problem (comma-separated answers)\";\r\n      case 'division':\r\n        return \"Solve each division problem (comma-separated answers)\";\r\n      \r\n      case 'mixedMath':\r\n  return \"Enter answers separated by commas (e.g., 15,3,8)\";\r\n\r\n\r\n            // Add new total operation cases\r\n    case 'totalAddition':\r\n      return \"Add ALL numbers together\";\r\n    case 'totalSubtraction':\r\n      return \"Subtract all numbers from the first number\";\r\n    case 'totalMultiplication':\r\n      return \"Multiply ALL numbers together\";\r\n    case 'totalDivision':\r\n      return \"Divide the first number by all other numbers\";\r\n\r\n      case 'memory':\r\n        return \"Remember the sequence of numbers\";\r\n      case 'addition':\r\n        return \"Add all the numbers together\";\r\n      case 'counting':\r\n        return `Count how many times ${targetNumber} appears`;\r\n      case 'pattern':\r\n        return \"Identify the pattern and find the next number\";\r\n      case 'reverse':\r\n        return \"Remember the numbers in reverse order\";\r\n      case 'missing':\r\n        return \"Identify the missing numbers (comma separated)\";\r\n      case 'oddeven':\r\n        return \"Count how many odd and even numbers (format: odd:X, even:Y)\";\r\n      case 'multiples':\r\n        return `These are multiples of ${targetNumber}. What comes next?`;\r\n      case 'comparison':\r\n        return \"For each pair, enter >, <, or = (comma separated)\";\r\n      case 'speed':\r\n        return \"What's the last number in the sequence?\";\r\n      case 'symbol':\r\n        return \"Remember which symbol pairs with which number (format: symbol=number, ...)\";\r\n      default:\r\n        return \"Remember the numbers\";\r\n    }\r\n  };\r\n  \r\n  const getPlaceholderText = () => {\r\n    switch(gameType) {\r\n      case 'subtraction':\r\n        return \"Enter answers separated by commas (e.g., 3,7,2)\";\r\n      case 'multiplication':\r\n        return \"Enter answers separated by commas (e.g., 12,15,20)\";\r\n      case 'division':\r\n        return \"Enter answers separated by commas (e.g., 4,3,5)\";\r\n\r\n           // Add new total operation cases\r\n    case 'totalAddition':\r\n      return \"Enter the sum of all numbers\";\r\n    case 'totalSubtraction':\r\n      return \"Enter the result of subtracting all numbers from the first\";\r\n    case 'totalMultiplication':\r\n      return \"Enter the product of all numbers\";\r\n    case 'totalDivision':\r\n      return \"Enter the result of dividing the first number by all others\";\r\n\r\n      case 'memory':\r\n        return \"Enter the sequence (e.g., 38745)\";\r\n      case 'addition':\r\n        return \"Enter sum (e.g., 42)\";\r\n      case 'counting':\r\n        return `Enter count of ${targetNumber} (e.g., 3)`;\r\n      case 'pattern':\r\n        return \"Enter next number in pattern\";\r\n      case 'reverse':\r\n        return \"Enter reversed sequence\";\r\n      case 'missing':\r\n        return \"Enter missing numbers (e.g., 3,5,9)\";\r\n        case 'oddeven':\r\n        return \"Enter count (e.g., odd:4, even:6)\";\r\n      case 'multiples':\r\n        return `Enter next multiple of ${targetNumber}`;\r\n      case 'comparison':\r\n        return \"Enter >, <, or = for each pair (e.g., >,<,=,>,=)\";\r\n      case 'speed':\r\n        return \"Enter the last number in sequence\";\r\n      case 'symbol':\r\n        return \"Enter symbol=number pairs (e.g., ★=5,♦=3)\";\r\n      default:\r\n        return \"Enter your answer\";\r\n    }\r\n  };\r\n\r\n  // Navigate to stats page\r\n  const goToStats = () => {\r\n    navigate('/stats', { state: { performanceData } });\r\n  };\r\n\r\n  // Navigate to login page\r\n  const goToLogin = () => {\r\n    navigate('/login');\r\n  };\r\n\r\n  // Logout function\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setUserId(null);\r\n    setAppState('setup');\r\n    // No need to clear performance data as we want to keep local progress\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Simulate loading time and show Netflix-style loading animation\r\n    if (appState === 'setup') {\r\n      setLoading(true);\r\n      setShowImage(true);\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n      }, 2000);\r\n    }\r\n  }, [appState]);\r\n\r\n  // if (loading && showImage) {\r\n  //   return (\r\n  //     <div className=\"flex flex-col items-center justify-center h-screen bg-gray-900\">\r\n  //       <Netflix />\r\n  //       <div className=\"mt-8\">\r\n  //         <ThreeDot color=\"#E50914\" size=\"medium\" />\r\n  //       </div>\r\n  //     </div>\r\n  //   );\r\n  // }\r\n\r\n  const renderLoginState = () => {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    return (\r\n      <div className=\"avc-flex avc-items-center\">\r\n        {userId ? (\r\n          <div className=\"avc-text-sm avc-text-green-600 avc-mr-4\">\r\n            ✓ Data syncing to account\r\n          </div>\r\n        ) : (\r\n          <a href=\"/login\" className=\"avc-bg-green-500 avc-text-white avc-py-1 avc-px-3 avc-rounded avc-hover:bg-green-600 avc-text-sm avc-mr-2\">\r\n            Login to sync data\r\n          </a>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  \r\nconst renderSetup = () => (\r\n  <div className='avc-rendersetup'>\r\n    <div className=\"avc-page-background\">\r\n      <div className=\"avc-setup-container\">\r\n        {/* Logo Section */}\r\n        <div className=\"avc-logo-container\">\r\n          <img \r\n            src={bdaLogo} \r\n            alt=\"BDA Abacus Classes Logo\" \r\n            className=\"avc-logo\"\r\n          />\r\n        </div>\r\n        \r\n        <h1 className=\"avc-title\">\r\nPractice Anytime, Anywhere        </h1>\r\n\r\n        <div className=\"avc-login-section\">\r\n          {renderLoginState()}\r\n          <button \r\n            onClick={() => navigate('/')}\r\n            className=\"avc-dashboard-btn\"\r\n          >\r\n            View Dashboard\r\n          </button>\r\n        </div>\r\n\r\n\r\n        {error && (\r\n          <div className=\"avc-error-banner\">\r\n            <span>{error}</span>\r\n            <button \r\n              className=\"avc-error-close\"\r\n              onClick={() => setError(null)}\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"avc-space-y-4\">\r\n          <div className=\"avc-input-group\">\r\n            <label>Choose your Challenge:</label>\r\n            <select\r\n              value={gameType}\r\n              onChange={(e) => setGameType(e.target.value)}\r\n              className=\"avc-select\"\r\n            >\r\n              {gameModes.map(mode => (\r\n                <option key={mode.value} value={mode.value}>\r\n                  {mode.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* <div className=\"avc-input-group\">\r\n            <label>Difficulty:</label>\r\n            <select\r\n              value={difficulty}\r\n              onChange={(e) => setDifficulty(e.target.value)}\r\n              className=\"avc-select\"\r\n            >\r\n              <option value=\"single\">Single Digit (1-9)</option>\r\n              <option value=\"double\">Double Digit (10-99)</option>\r\n              <option value=\"triple\">Triple Digit (100-999)</option>\r\n            </select>\r\n          </div> */}\r\n\r\n          <div className=\"avc-input-group\">\r\n  {/* <label>Difficulty:</label> */}\r\n  {/* {['division', 'multiplication'].includes(gameType) ? (\r\n    <div className=\"avc-difficulty-grid\">\r\n      <select\r\n        value={difficulty}\r\n        onChange={(e) => setDifficulty(e.target.value)}\r\n        className=\"avc-select\"\r\n      >\r\n        <option value=\"single\">Single ÷ Single / Single × Single</option>\r\n        <option value=\"double\">Double ÷ Double / Double × Double</option>\r\n        <option value=\"triple\">Triple ÷ Triple / Triple × Triple</option>\r\n        <option value=\"singleToDouble\">Single → Double (Single ÷ Single = Double)</option>\r\n        <option value=\"doubleToSingle\">Double → Single (Double ÷ Single = Single)</option>\r\n      </select>\r\n    </div>\r\n  ) : (\r\n    <select\r\n      value={difficulty}\r\n      onChange={(e) => setDifficulty(e.target.value)}\r\n      className=\"avc-select\"\r\n    >\r\n      <option value=\"single\">Single Digit (1-9)</option>\r\n      <option value=\"double\">Double Digit (10-99)</option>\r\n      <option value=\"triple\">Triple Digit (100-999)</option>\r\n    </select>\r\n  )} */}\r\n\r\n  {['multiplication', 'division'].includes(gameType) && (\r\n  <div className=\"avc-input-group\">\r\n    <label>Number of Digits:</label>\r\n    <div className=\"avc-digit-inputs\">\r\n      <div className=\"avc-digit-input-group\">\r\n        <label>First Number:</label>\r\n        <input\r\n          type=\"number\"\r\n          value={firstDigit === 0 ? '' : firstDigit}\r\n          onChange={(e) => {\r\n            const val = e.target.value;\r\n            setFirstDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\r\n          }}\r\n          onFocus={(e) => e.target.select()}\r\n          min=\"1\"\r\n          max=\"6\"\r\n          className=\"avc-input avc-digit-input\"\r\n          placeholder=\"1-6\"\r\n        />\r\n      </div>\r\n      <div className=\"avc-digit-input-group\">\r\n        <label>Second Number:</label>\r\n        <input\r\n          type=\"number\"\r\n          value={secondDigit === 0 ? '' : secondDigit}\r\n          onChange={(e) => {\r\n            const val = e.target.value;\r\n            setSecondDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\r\n          }}\r\n          onFocus={(e) => e.target.select()}\r\n          min=\"1\"\r\n          max=\"6\"\r\n          className=\"avc-input avc-digit-input\"\r\n          placeholder=\"1-6\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n{/* {['subtraction'].includes(gameType) && (\r\n  <div className=\"avc-input-group\">\r\n    <label>Difficulty:</label>\r\n    <select\r\n      value={firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : 'triple'}\r\n      onChange={(e) => {\r\n        const val = e.target.value;\r\n        \r\n        setDifficulty(e.target.value)\r\n        if (val === 'single') { setFirstDigit(1); setSecondDigit(1); }\r\n        else if (val === 'double') { setFirstDigit(2); setSecondDigit(2); }\r\n        else { setFirstDigit(3); setSecondDigit(3); }\r\n          \r\n      }}\r\n      className=\"avc-select\"\r\n    >\r\n      <option value=\"double\">Double Digit (10-99)</option>\r\n      <option value=\"triple\">Triple Digit (100-999)</option>\r\n    </select>\r\n  </div>\r\n)} */}\r\n\r\n{['subtraction'].includes(gameType) && (\r\n  <div className=\"avc-input-group\">\r\n    <label>Difficulty:</label>\r\n    <select\r\n      value={firstDigit === 1 ? 'single' : \r\n             firstDigit === 2 ? 'double' : \r\n             firstDigit === 3 ? 'triple' :\r\n             firstDigit === 4 ? 'four' :\r\n             firstDigit === 5 ? 'five' : 'six'}\r\n      onChange={(e) => {\r\n        const val = e.target.value;\r\n        setDifficulty(val);\r\n        \r\n        if (val === 'single') { setFirstDigit(1); setSecondDigit(1); }\r\n        else if (val === 'double') { setFirstDigit(2); setSecondDigit(2); }\r\n        else if (val === 'triple') { setFirstDigit(3); setSecondDigit(3); }\r\n        else if (val === 'four') { setFirstDigit(4); setSecondDigit(4); }\r\n        else if (val === 'five') { setFirstDigit(5); setSecondDigit(5); }\r\n        else if (val === 'six') { setFirstDigit(6); setSecondDigit(6); }\r\n      }}\r\n      className=\"avc-select\"\r\n    >\r\n      <option value=\"double\">Double Digit (10-99)</option>\r\n      <option value=\"triple\">Triple Digit (100-999)</option>\r\n      <option value=\"four\">4 Digits (1,000-9,999)</option>\r\n      <option value=\"five\">5 Digits (10,000-99,999)</option>\r\n      <option value=\"six\">6 Digits (100,000-999,999)</option>\r\n    </select>\r\n  </div>\r\n)}\r\n\r\n\r\n{/* {!['multiplication', 'division','subtraction'].includes(gameType) && (\r\n  <div className=\"avc-input-group\">\r\n    <label>Difficulty:</label>\r\n    <select\r\n      value={firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : 'triple'}\r\n      onChange={(e) => {\r\n        const val = e.target.value;\r\n        setDifficulty(e.target.value)\r\n        if (val === 'single') { setFirstDigit(1); setSecondDigit(1); }\r\n        else if (val === 'double') { setFirstDigit(2); setSecondDigit(2); }\r\n        else { setFirstDigit(3); setSecondDigit(3); }\r\n          \r\n      }}\r\n      className=\"avc-select\"\r\n    >\r\n      <option value=\"single\">Single Digit (1-9)</option>\r\n      <option value=\"double\">Double Digit (10-99)</option>\r\n      <option value=\"triple\">Triple Digit (100-999)</option>\r\n    </select>\r\n  </div>\r\n)} */}\r\n\r\n{!['multiplication', 'division','subtraction'].includes(gameType) && (\r\n  <div className=\"avc-input-group\">\r\n    <label>Difficulty:</label>\r\n    <select\r\n      value={firstDigit === 1 ? 'single' : \r\n             firstDigit === 2 ? 'double' : \r\n             firstDigit === 3 ? 'triple' :\r\n             firstDigit === 4 ? 'four' :\r\n             firstDigit === 5 ? 'five' : 'six'}\r\n      onChange={(e) => {\r\n        const val = e.target.value;\r\n        setDifficulty(val);\r\n        \r\n        if (val === 'single') { setFirstDigit(1); setSecondDigit(1); }\r\n        else if (val === 'double') { setFirstDigit(2); setSecondDigit(2); }\r\n        else if (val === 'triple') { setFirstDigit(3); setSecondDigit(3); }\r\n        else if (val === 'four') { setFirstDigit(4); setSecondDigit(4); }\r\n        else if (val === 'five') { setFirstDigit(5); setSecondDigit(5); }\r\n        else if (val === 'six') { setFirstDigit(6); setSecondDigit(6); }\r\n      }}\r\n      className=\"avc-select\"\r\n    >\r\n      <option value=\"single\">Single Digit (1-9)</option>\r\n      <option value=\"double\">Double Digit (10-99)</option>\r\n      <option value=\"triple\">Triple Digit (100-999)</option>\r\n      <option value=\"four\">4 Digits (1,000-9,999)</option>\r\n      <option value=\"five\">5 Digits (10,000-99,999)</option>\r\n      <option value=\"six\">6 Digits (100,000-999,999)</option>\r\n    </select>\r\n  </div>\r\n)}\r\n</div>\r\n\r\n          {/* <div className=\"avc-input-group\">\r\n            <label>Speed (seconds):</label>\r\n            <input\r\n              type=\"number\"\r\n              value={speed}\r\n              onChange={(e) => setSpeed(Number(e.target.value))}\r\n              step=\"0.1\"\r\n              min=\"0.1\"\r\n              max=\"5\"\r\n              className=\"avc-input\"\r\n            />\r\n          </div> */}\r\n\r\n          <div className=\"avc-input-group\">\r\n            <label>Time (seconds)</label>\r\n  <input\r\n    type=\"number\"\r\n    value={speed === 0 ? '' : speed}\r\n    onChange={(e) => {\r\n      const val = e.target.value;\r\n      setSpeed(val === '' ? '' : Number(val));\r\n    }}\r\n    onFocus={(e) => e.target.select()}\r\n    step=\"0.1\"\r\n    min=\"0.1\"\r\n    max=\"5\"\r\n    className=\"avc-input\"\r\n    placeholder=\"Enter speed in seconds\"\r\n  />\r\n</div>\r\n\r\n          {/* <div className=\"avc-input-group\">\r\n            <label>Number Count:</label>\r\n            <input\r\n              type=\"number\"\r\n              value={count}\r\n              onChange={(e) => setCount(Number(e.target.value))}\r\n              min=\"3\"\r\n              max=\"20\"\r\n              className=\"avc-input\"\r\n            />\r\n          </div> */}\r\n\r\n          <div className=\"avc-input-group\">\r\n            <label>Number Of Rows</label>\r\n  <input\r\n    type=\"number\"\r\n    value={count === 0 ? '' : count}\r\n    onChange={(e) => {\r\n      const val = e.target.value;\r\n      setCount(val === '' ? '' : Number(val));\r\n    }}\r\n    onFocus={(e) => e.target.select()}\r\n    min=\"3\"\r\n    max=\"20\"\r\n    className=\"avc-input\"\r\n    placeholder=\"Enter number count\"\r\n  />\r\n</div>\r\n\r\n          <button \r\n            onClick={startGame}\r\n            className=\"avc-start-btn\"\r\n          >\r\n            Start\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n); \r\n// 18\r\n\r\n// REPLACE your entire renderGame function with this complete version:\r\n\r\n\r\n// const renderSetup = () => (\r\n//   <div className='avc-rendersetup'>\r\n//     <div className=\"avc-page-background\">\r\n//       <div className=\"avc-setup-container\">\r\n//         <h1 className=\"avc-title\">\r\n//           Avecus Learning App\r\n//         </h1>\r\n\r\n//         <div className=\"avc-login-section\">\r\n//           {renderLoginState()}\r\n//           <button \r\n//             onClick={() => navigate('/')}\r\n//             className=\"avc-dashboard-btn\"\r\n//           >\r\n//             View Dashboard\r\n//           </button>\r\n//         </div>\r\n\r\n//         {error && (\r\n//           <div className=\"avc-error-banner\">\r\n//             <span>{error}</span>\r\n//             <button \r\n//               className=\"avc-error-close\"\r\n//               onClick={() => setError(null)}\r\n//             >\r\n//               ×\r\n//             </button>\r\n//           </div>\r\n//         )}\r\n\r\n//         <div className=\"avc-space-y-4\">\r\n//           <div className=\"avc-input-group\">\r\n//             <label>Challenge Type:</label>\r\n//             <select\r\n//               value={gameType}\r\n//               onChange={(e) => {\r\n//                 const newGameType = e.target.value;\r\n//                 setGameType(newGameType);\r\n                \r\n//                 // Set appropriate defaults for new game type\r\n//                 if (newGameType === 'subtraction') {\r\n//                   setFirstDigit(2); // Default to double digits for subtraction\r\n//                   setSecondDigit(2);\r\n//                   setDifficulty('double');\r\n//                 } else if (!['multiplication', 'division'].includes(newGameType)) {\r\n//                   setFirstDigit(1); // Default to single digits for other games\r\n//                   setSecondDigit(1);\r\n//                   setDifficulty('single');\r\n//                 }\r\n//               }}\r\n//               className=\"avc-select\"\r\n//             >\r\n//               {gameModes.map(mode => (\r\n//                 <option key={mode.value} value={mode.value}>\r\n//                   {mode.label}\r\n//                 </option>\r\n//               ))}\r\n//             </select>\r\n//           </div>\r\n\r\n//           {/* UPDATED DIFFICULTY SELECTION */}\r\n//           <div className=\"avc-input-group\">\r\n//             {['multiplication', 'division'].includes(gameType) ? (\r\n//               <div>\r\n//                 <label>Number of Digits:</label>\r\n//                 <div className=\"avc-digit-inputs\">\r\n//                   <div className=\"avc-digit-input-group\">\r\n//                     <label>First Number Digits:</label>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       value={firstDigit === 0 ? '' : firstDigit}\r\n//                       onChange={(e) => {\r\n//                         const val = e.target.value;\r\n//                         setFirstDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\r\n//                       }}\r\n//                       onFocus={(e) => e.target.select()}\r\n//                       min=\"1\"\r\n//                       max=\"6\"\r\n//                       className=\"avc-input avc-digit-input\"\r\n//                       placeholder=\"1-6\"\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"avc-digit-input-group\">\r\n//                     <label>Second Number Digits:</label>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       value={secondDigit === 0 ? '' : secondDigit}\r\n//                       onChange={(e) => {\r\n//                         const val = e.target.value;\r\n//                         setSecondDigit(val === '' ? '' : Math.max(1, Math.min(6, Number(val))));\r\n//                       }}\r\n//                       onFocus={(e) => e.target.select()}\r\n//                       min=\"1\"\r\n//                       max=\"6\"\r\n//                       className=\"avc-input avc-digit-input\"\r\n//                       placeholder=\"1-6\"\r\n//                     />\r\n//                   </div>\r\n//                 </div>\r\n//               </div>\r\n//             ) : gameType === 'subtraction' ? (\r\n//               <div>\r\n\r\n//                 <label>Difficulty:</label>\r\n//                                 <div className=\"avc-digit-inputs\">\r\n//                   <div className=\"avc-digit-input-group\">\r\n//                 <select\r\n//                   value={firstDigit === 2 ? 'double' : firstDigit === 3 ? 'triple' : 'double'}\r\n//                   onChange={(e) => {\r\n//                     const val = e.target.value;\r\n//                     setDifficulty(val);\r\n//                     if (val === 'double') { \r\n//                       setFirstDigit(2); \r\n//                       setSecondDigit(2); \r\n//                     } else if (val === 'triple') { \r\n//                       setFirstDigit(3); \r\n//                       setSecondDigit(3); \r\n//                     }\r\n//                   }}\r\n//                   className=\"avc-input avc-digit-input\"\r\n//                 >\r\n//                   <option value=\"double\">Double Digit (10-99)</option>\r\n//                   <option value=\"triple\">Triple Digit (100-999)</option>\r\n//                 </select>\r\n//                 </div>\r\n//                 </div>\r\n//               </div>\r\n//             ) : (\r\n//               <div>\r\n//                 <label>Difficulty:</label>\r\n//                                 <div className=\"avc-digit-inputs\">\r\n//                   <div className=\"avc-digit-input-group\">\r\n//                 <select\r\n//                   value={firstDigit === 1 ? 'single' : firstDigit === 2 ? 'double' : 'triple'}\r\n//                   onChange={(e) => {\r\n//                     const val = e.target.value;\r\n//                     setDifficulty(val);\r\n//                     if (val === 'single') { \r\n//                       setFirstDigit(1); \r\n//                       setSecondDigit(1); \r\n//                     } else if (val === 'double') { \r\n//                       setFirstDigit(2); \r\n//                       setSecondDigit(2); \r\n//                     } else { \r\n//                       setFirstDigit(3); \r\n//                       setSecondDigit(3); \r\n//                     }\r\n//                   }}\r\n//                   className=\"avc-input avc-digit-input\"\r\n//                 >\r\n//                   <option value=\"single\">Single Digit (1-9)</option>\r\n//                   <option value=\"double\">Double Digit (10-99)</option>\r\n//                   <option value=\"triple\">Triple Digit (100-999)</option>\r\n//                 </select>\r\n//               </div>\r\n//                 </div>                \r\n//               </div>\r\n//             )}\r\n//           </div>\r\n\r\n//           <div className=\"avc-input-group\">\r\n//             <label>Time Interval (seconds)</label>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={speed === 0 ? '' : speed}\r\n//               onChange={(e) => {\r\n//                 const val = e.target.value;\r\n//                 setSpeed(val === '' ? '' : Number(val));\r\n//               }}\r\n//               onFocus={(e) => e.target.select()}\r\n//               step=\"0.1\"\r\n//               min=\"0.1\"\r\n//               max=\"5\"\r\n//               className=\"avc-input\"\r\n//               placeholder=\"Enter speed in seconds\"\r\n//             />\r\n//           </div>\r\n\r\n//           <div className=\"avc-input-group\">\r\n//             <label>Number Of Questions</label>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={count === 0 ? '' : count}\r\n//               onChange={(e) => {\r\n//                 const val = e.target.value;\r\n//                 setCount(val === '' ? '' : Number(val));\r\n//               }}\r\n//               onFocus={(e) => e.target.select()}\r\n//               min=\"3\"\r\n//               max=\"20\"\r\n//               className=\"avc-input\"\r\n//               placeholder=\"Enter number count\"\r\n//             />\r\n//           </div>\r\n\r\n//           <button \r\n//             onClick={startGame}\r\n//             className=\"avc-start-btn\"\r\n//           >\r\n//             Start Challenge\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   </div>\r\n// );\r\nconst renderGame = () => {\r\n\r\n  // For addition game - show numbers one by one, then input\r\nif (gameType === 'addition') {\r\n  if (additionShowingNumbers) {\r\n    return (\r\n      <div className='ask-q'>\r\n        <div className=\"avc-game-container\">\r\n          <div className=\"addition-instruction\">\r\n            <h2>Remember these numbers to add them:</h2>\r\n          </div>\r\n          \r\n          <div className=\"single-number-display\">\r\n            <div className=\"current-number\">\r\n              {additionNumbers[additionCurrentIndex]}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"addition-progress\">\r\n            Number {additionCurrentIndex + 1} of {additionNumbers.length}\r\n          </div>\r\n          \r\n          <div className=\"time-indicator\">\r\n            Next number in: {additionCurrentTimer} seconds\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className='ask-q'>\r\n        <div className=\"avc-game-container\">\r\n          <div className=\"addition-input-section\">\r\n            <h2 className=\"addition-instruction\">Type Your Answer</h2>\r\n            <input\r\n              type=\"number\"\r\n              value={userAnswer}\r\n              onChange={(e) => setUserAnswer(e.target.value)}\r\n              className=\"addition-answer-input\"\r\n              placeholder=\"Enter the sum\"\r\n              autoFocus\r\n            />\r\n            <div className=\"addition-buttons\">\r\n              <button onClick={checkAdditionAnswer} className=\"addition-check-btn\">\r\n                Check Answer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// 9. UPDATE subtraction rendering (replace subtraction section in renderGame)\r\nif (gameType === 'subtraction') {\r\n    if (subtractionShowingNumbers) {\r\n      return (\r\n        <div className='ask-q'>\r\n          <div className=\"avc-game-container\">\r\n            <div className=\"addition-instruction\">\r\n              <h2>Remember these numbers for subtraction:</h2>\r\n            </div>\r\n            \r\n            <div className=\"single-number-display\">\r\n              <div className=\"current-number\">\r\n                {/* FIXED: Only show minus for numbers after the first one */}\r\n                {subtractionCurrentIndex === 0 ? \r\n                  subtractionNumbers[subtractionCurrentIndex] : \r\n                  `-${subtractionNumbers[subtractionCurrentIndex]}`\r\n                }\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"addition-progress\">\r\n              Number {subtractionCurrentIndex + 1} of {subtractionNumbers.length}\r\n            </div>\r\n            \r\n            <div className=\"time-indicator\">\r\n              Next number in: {subtractionCurrentTimer} seconds\r\n            </div>\r\n            \r\n            {/* Show instruction based on which number we're displaying */}\r\n            {subtractionCurrentIndex === 0 ? (\r\n              <div className=\"instruction-note\" style={{\r\n                backgroundColor: '#d4edda',\r\n                color: '#155724',\r\n                padding: '10px',\r\n                borderRadius: '5px',\r\n                textAlign: 'center',\r\n                marginTop: '10px'\r\n              }}>\r\n                This is your starting number\r\n              </div>\r\n            ) : (\r\n              <div className=\"instruction-note\" style={{\r\n                backgroundColor: '#f8d7da',\r\n                color: '#721c24',\r\n                padding: '10px',\r\n                borderRadius: '5px',\r\n                textAlign: 'center',\r\n                marginTop: '10px'\r\n              }}>\r\n                Subtract this from your total\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='ask-q'>\r\n          <div className=\"avc-game-container\">\r\n            <div className=\"addition-input-section\">\r\n              <h2 className=\"addition-instruction\">Subtract all numbers from the first number:</h2>\r\n              {/* <div className=\"operation-hint\" style={{\r\n                fontSize: '18px',\r\n                textAlign: 'center',\r\n                margin: '15px 0',\r\n                padding: '10px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '5px',\r\n                color: '#333'\r\n              }}>\r\n                {subtractionNumbers[0]} - {subtractionNumbers.slice(1).join(' - ')} = ?\r\n              </div> */}\r\n              <input\r\n                type=\"number\"\r\n                value={userAnswer}\r\n                onChange={(e) => setUserAnswer(e.target.value)}\r\n                className=\"addition-answer-input\"\r\n                placeholder=\"Enter the result\"\r\n                autoFocus\r\n              />\r\n              <div className=\"addition-buttons\">\r\n                <button onClick={checkSubtractionAnswer} className=\"addition-check-btn\">\r\n                  Check Answer\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n// 10. UPDATE mixedMath rendering (replace mixedMath section in renderGame)\r\nif (gameType === 'mixedMath') {\r\n  if (additionShowingNumbers) {\r\n    const currentNum = additionNumbers[additionCurrentIndex];\r\n    return (\r\n      <div className='ask-q'>\r\n        <div className=\"avc-game-container\">\r\n          <div className=\"addition-instruction\">\r\n            <h2>Let's add and subtract like a pro✨</h2>\r\n          </div>\r\n          \r\n          <div className=\"single-number-display\">\r\n            <div className={`current-number ${currentNum.operation === 'add' ? 'addition-phase' : 'subtraction-phase'}`}>\r\n              {currentNum.operation === 'add' ? '+' : '-'} {currentNum.value}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"addition-progress\">\r\n            Number {additionCurrentIndex + 1} of {additionNumbers.length}\r\n          </div>\r\n          \r\n          <div className=\"time-indicator\">\r\n            Next number in: {mixedMathTimer} seconds\r\n          </div>\r\n          \r\n          <div className=\"operation-indicator\">\r\n            {currentNum.operation === 'add' ? 'ADD this number' : 'SUBTRACT this number'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className='ask-q'>\r\n        <div className=\"avc-game-container\">\r\n          <div className=\"addition-input-section\">\r\n            <h2 className=\"addition-instruction\">Calculate the final result:</h2>\r\n            {/* <div className=\"operation-hint\">\r\n              {additionNumbers.map((num, index) => \r\n                `${index === 0 ? '' : ' '}${num.operation === 'add' ? '+' : '-'} ${num.value}`\r\n              ).join('')} = ?\r\n            </div> */}\r\n            <input\r\n              type=\"number\"\r\n              value={userAnswer}\r\n              onChange={(e) => setUserAnswer(e.target.value)}\r\n              className=\"addition-answer-input\"\r\n              placeholder=\"Enter the final result\"\r\n              autoFocus\r\n            />\r\n            <div className=\"addition-buttons\">\r\n              <button onClick={checkMixedMathAnswer} className=\"addition-check-btn\">\r\n                Check Answer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n// For math operation games - replace the math operations section:\r\nif (['multiplication', 'division'].includes(gameType)) {\r\n  const currentPair = comparisonPairs[currentQuestionIndex];\r\n  if (!currentPair) return null;\r\n  \r\n  const [a, b] = currentPair;\r\n  let operatorSymbol = '';\r\n  \r\n  switch(gameType) {\r\n    case 'subtraction': operatorSymbol = ' - '; break;\r\n    case 'multiplication': operatorSymbol = ' × '; break;\r\n    case 'division': operatorSymbol = ' ÷ '; break;\r\n    case 'mixedMath':\r\n      const operation = currentPair[2];\r\n      operatorSymbol = operation === 'addition' ? ' + ' : ' - ';\r\n      break;\r\n  }\r\n  \r\n  const intervalMs = speed * 1000;\r\n  const currentInterval = Math.floor(gameElapsedTime / intervalMs);\r\n  const timeInCurrentInterval = gameElapsedTime % intervalMs;\r\n  const timeLeftInInterval = intervalMs - timeInCurrentInterval;\r\n  \r\n  return (\r\n    <div className='ask-q'>\r\n      <div className=\"avc-game-container\">\r\n        <div className=\"question-timer-bar\">\r\n          <div \r\n            className=\"timer-progress\" \r\n            style={{ width: `${(timeRemaining / (speed * count * 1000)) * 100}%` }}\r\n          ></div>\r\n        </div>\r\n        \r\n        <div className=\"question-navigation\">\r\n          <div className=\"question-nav-buttons\">\r\n            {comparisonPairs.map((_, index) => (\r\n              <button\r\n                key={index}\r\n                className={`nav-btn ${\r\n                  index === currentQuestionIndex ? 'active' : ''\r\n                } ${\r\n                  availableQuestions.has(index) ? 'available' : 'locked'\r\n                } ${\r\n                  questionAnswers[index]?.trim() ? 'answered' : ''\r\n                }`}\r\n                onClick={() => navigateToQuestion(index)}\r\n                disabled={!availableQuestions.has(index)}\r\n              >\r\n                Q{index + 1}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"question-counter\">\r\n          Question {currentQuestionIndex + 1} of {comparisonPairs.length}\r\n          {!availableQuestions.has(currentQuestionIndex + 1) && currentQuestionIndex < comparisonPairs.length - 1 && (\r\n            <div className=\"next-unlock\">\r\n              Next question unlocks in: {Math.ceil(timeLeftInInterval / 1000)}s\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"math-question-display\">\r\n          <div className=\"math-problem\">\r\n            {a} {operatorSymbol} {b} = ?\r\n          </div>\r\n          \r\n          <div className=\"answer-input-section\">\r\n<input\r\n  type=\"text\"\r\n  value={currentQuestionAnswer}\r\n  className=\"question-answer-input\"\r\n  placeholder=\"Your answer\"\r\n  onChange={handleKeyboardInput}\r\n  onKeyDown={(e) => { if (e.key === 'Enter') submitCurrentQuestion(); }}\r\n  autoFocus\r\n  // ADD THESE ATTRIBUTES TO DISABLE MOBILE KEYBOARD:\r\n  inputMode=\"none\"\r\n  onFocus={(e) => e.target.blur()} // Immediately blur to prevent keyboard\r\n  readOnly={true} // Make it read-only to prevent typing\r\n  onTouchStart={(e) => e.preventDefault()} // Prevent touch events that might trigger keyboard\r\n  style={{ caretColor: 'transparent' }} // Hide cursor\r\n/>\r\n          </div>\r\n          \r\n          <NumberPad />\r\n          \r\n          <div className=\"total-time-remaining\">\r\n            Total time remaining: {Math.ceil(timeRemaining / 1000)}s\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\n// REPLACE your renderResult function with this enhanced version:\r\n// const renderResult = () => {\r\n//   if (!result) return null;\r\n\r\n//   return (\r\n//     <div className=\"avc-result-screen-container\">\r\n//       <div className=\"avc-result-card\">\r\n//         <div className=\"avc-result-header\">\r\n//           <h2>Game Result</h2>\r\n//           <div className={`avc-result-message ${result.correct ? 'avc-correct' : 'avc-incorrect'}`}>\r\n//             <span className=\"avc-emoji\">\r\n//               {result.correct ? \"Correct! 🎉\" : \"Not quite right 😕\"}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"avc-result-details\">\r\n//           {/* Show detailed results for math operations */}\r\n//           {['subtraction', 'multiplication', 'division'].includes(gameType) && result.userAnswers && result.correctAnswers ? (\r\n//             <div className=\"avc-detailed-results\">\r\n//               <div className=\"avc-result-summary\">\r\n//                 <span className=\"avc-detail-label\">Overall Result:</span>\r\n//                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\r\n//                 {result.accuracy && (\r\n//                   <span className=\"avc-detail-value\">Accuracy: {result.accuracy}</span>\r\n//                 )}\r\n//               </div>\r\n              \r\n//               {/* <div className=\"avc-question-breakdown\">\r\n//                 <h3>Question Breakdown:</h3>\r\n//                 {comparisonPairs.map((pair, index) => {\r\n//                   const [a, b] = pair;\r\n//                   const userAns = result.userAnswers[index] || 'No answer';\r\n//                   const correctAns = result.correctAnswers[index];\r\n//                   const isCorrect = userAns === correctAns;\r\n                  \r\n//                   let operation = '';\r\n//                   switch(gameType) {\r\n//                     case 'subtraction': operation = ' - '; break;\r\n//                     case 'multiplication': operation = ' × '; break;\r\n//                     case 'division': operation = ' ÷ '; break;\r\n//                   }\r\n                  \r\n//                   return (\r\n//                     <div key={index} className={`avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`}>\r\n//                       <span className=\"question\">{a}{operation}{b} = </span>\r\n//                       <span className=\"user-answer\">Your: {userAns}</span>\r\n//                       <span className=\"correct-answer\">Correct: {correctAns}</span>\r\n//                       <span className=\"status\">{isCorrect ? '✓' : '✗'}</span>\r\n//                     </div>\r\n//                   );\r\n//                 })}\r\n//               </div> */}\r\n\r\n//               <div className=\"avc-question-breakdown\">\r\n//             <h3>Question Breakdown:</h3>\r\n//             {comparisonPairs.map((pair, index) => {\r\n//                 const [a, b] = pair;\r\n//                 const userAns = result.userAnswers[index] || 'No answer';\r\n//                 const correctAns = result.correctAnswers[index];\r\n//                 const isCorrect = userAns === correctAns;\r\n                \r\n//                 let operation = '';\r\n//                 let calculatedResult = '';\r\n                \r\n//                 switch(gameType) {\r\n//                 case 'subtraction': \r\n//                     operation = ' - '; \r\n//                     calculatedResult = a - b;\r\n//                     break;\r\n//                 case 'multiplication': \r\n//                     operation = ' × '; \r\n//                     calculatedResult = a * b;\r\n//                     break;\r\n//                 case 'division': \r\n//                     operation = ' ÷ '; \r\n//                     calculatedResult = Math.round(a / b);\r\n//                     break;\r\n//                 case 'mixedMath':\r\n//                     const op = pair[2];\r\n//                     operation = op === 'addition' ? ' + ' : ' - ';\r\n//                     calculatedResult = op === 'addition' ? a + b : a - b;\r\n//                     break;\r\n//                 }\r\n                \r\n//                 return (\r\n//                 <div key={index} className={`avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`}>\r\n//                     <span className=\"question\">{a}{operation}{b} = {calculatedResult} </span>\r\n//                     <span className=\"user-answer\">Your: {userAns}</span>\r\n//                     <span className=\"correct-answer\">Correct: {correctAns}</span>\r\n//                     <span className=\"status\">{isCorrect ? '✓' : '✗'}</span>\r\n//                 </div>\r\n//                 );\r\n//             })}\r\n//             </div>\r\n//             </div>\r\n//           ) : (\r\n//             // Standard result display for other game types\r\n//             <>\r\n//               <div className=\"avc-result-detail\">\r\n//                 <span className=\"avc-detail-label\">Your Answer: </span>\r\n//                 <span className=\"avc-detail-value\">{userAnswer} </span>\r\n//               </div>\r\n//               <div className=\"avc-result-detail\">\r\n//                 <span className=\"avc-detail-label\">Correct Answer:</span>\r\n//                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\r\n//               </div>\r\n//             </>\r\n//           )}\r\n          \r\n//           <div className=\"avc-result-detail\">\r\n//             <span className=\"avc-detail-label\">Score:</span>\r\n//             <span className={`avc-detail-value ${result.score > 0 ? 'avc-positive-score' : 'avc-negative-score'}`}>\r\n//               {result.score > 0 ? \"+\" : \"\"}{result.score.toFixed(2)}\r\n//               {result.maxScore > 1 && ` of ${result.maxScore}`}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"avc-result-actions\">\r\n//           <button \r\n//             onClick={() => {\r\n//               resetGame();\r\n//               startGame();\r\n//             }}\r\n//             className=\"avc-btn avc-btn-retry\"\r\n//           >\r\n//             <span className=\"avc-emoji\">🔄</span>\r\n//             <span>Try Again</span>\r\n//           </button>\r\n\r\n//           <button \r\n//             // onClick={() => navigate('/play')}\r\n//                       onClick={() => {\r\n// resetGame();\r\n//             }}\r\n//             className=\"avc-btn avc-btn-dashboard\"\r\n//           >\r\n//             <span className=\"avc-emoji\">🏠</span>\r\n//             <span>Dashboard</span>\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n// 18\r\n\r\nconst renderResult = () => {\r\n  console.log('=== RENDERING RESULT ===');\r\n  console.log('Current result:', result);\r\n  \r\n  if (!result) {\r\n    console.log('No result data available');\r\n    return (\r\n      <div className=\"avc-result-screen-container\" style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        zIndex: 10000,\r\n        backgroundColor: 'rgba(0,0,0,0.8)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <div className=\"avc-result-card\" style={{\r\n          backgroundColor: 'white',\r\n          padding: '20px',\r\n          borderRadius: '10px',\r\n          minWidth: '300px',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2>Loading Results...</h2>\r\n          <p>Please wait while we process your answers.</p>\r\n          <button \r\n            onClick={() => setAppState('setup')}\r\n            style={{\r\n              backgroundColor: '#6c5ce7',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '10px 20px',\r\n              borderRadius: '5px',\r\n              cursor: 'pointer',\r\n              marginTop: '10px'\r\n            }}\r\n          >\r\n            Back to Setup\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Determine if this is a detailed result (multiplication/division) or simple result (addition/subtraction)\r\n  const isDetailedResult = result.userAnswers && result.correctAnswers && \r\n                           Array.isArray(result.userAnswers) && Array.isArray(result.correctAnswers);\r\n  \r\n  return (\r\n    <div className=\"avc-result-screen-container\" style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      zIndex: 10000,\r\n      backgroundColor: 'rgba(0,0,0,0.85)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: '20px',\r\n      boxSizing: 'border-box'\r\n    }}>\r\n      <div className=\"avc-result-card\" style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '12px',\r\n        maxWidth: '90vw',\r\n        maxHeight: '90vh',\r\n        overflow: 'auto',\r\n        minWidth: '320px',\r\n        boxShadow: '0 10px 30px rgba(0,0,0,0.3)',\r\n        padding: '0'\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: '20px 20px 10px 20px',\r\n          borderBottom: '1px solid #eee'\r\n        }}>\r\n          <h2 style={{\r\n            margin: '0 0 15px 0',\r\n            textAlign: 'center',\r\n            fontSize: '24px',\r\n            color: '#333'\r\n          }}>\r\n             Result\r\n          </h2>\r\n          \r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            backgroundColor: result.correct ? '#d4edda' : '#f8d7da',\r\n            border: `1px solid ${result.correct ? '#c3e6cb' : '#f5c6cb'}`,\r\n            color: result.correct ? '#155724' : '#721c24',\r\n            fontSize: '18px',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            {result.correct ? \"Excellent Work! 🎉\" : \"Keep Practicing! 😊\"}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div style={{ padding: '20px' }}>\r\n          {/* Summary */}\r\n          <div style={{\r\n            backgroundColor: '#f8f9fa',\r\n            padding: '15px',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '8px' }}>\r\n              {result.actualAnswer}\r\n            </div>\r\n            {result.accuracy && (\r\n              <div style={{ fontSize: '16px', color: '#666' }}>\r\n                Accuracy: {result.accuracy}\r\n              </div>\r\n            )}\r\n            \r\n            {/* Show user's answer for simple games */}\r\n            {!isDetailedResult && result.userAnswer !== undefined && (\r\n              <div style={{ fontSize: '16px', color: '#666', marginTop: '8px' }}>\r\n                Your Answer: {result.userAnswer || 'No answer provided'}\r\n              </div>\r\n            )}\r\n            \r\n            <div style={{ \r\n              fontSize: '18px', \r\n              fontWeight: 'bold',\r\n              color: result.score > 0 ? '#28a745' : '#dc3545',\r\n              marginTop: '8px'\r\n            }}>\r\n              Score: {result.score > 0 ? '+' : ''}{result.score}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Question Breakdown for detailed results only */}\r\n          {/* {isDetailedResult && comparisonPairs && comparisonPairs.length > 0 && (\r\n            <div>\r\n              <h3 style={{ marginBottom: '15px', color: '#333' }}>Question Breakdown:</h3>\r\n              <div style={{ \r\n                maxHeight: '300px', \r\n                overflow: 'auto',\r\n                border: '1px solid #ddd',\r\n                borderRadius: '8px'\r\n              }}>\r\n                {comparisonPairs.map((pair, index) => {\r\n                  const [a, b] = pair;\r\n                  const userAnswer = result.userAnswers[index] || 'No answer';\r\n                  const correctAnswer = result.correctAnswers[index];\r\n                  \r\n                  // Clean comparison\r\n                  const cleanUserAns = String(userAnswer).replace(/\\s+/g, '').toLowerCase();\r\n                  const cleanCorrectAns = String(correctAnswer).replace(/\\s+/g, '').toLowerCase();\r\n                  \r\n                  let isCorrect = false;\r\n                  if (cleanUserAns !== '' && cleanCorrectAns !== '') {\r\n                    isCorrect = cleanUserAns === cleanCorrectAns;\r\n                    \r\n                    // Try numeric comparison if string comparison fails\r\n                    if (!isCorrect) {\r\n                      const userNum = parseFloat(cleanUserAns);\r\n                      const correctNum = parseFloat(cleanCorrectAns);\r\n                      if (!isNaN(userNum) && !isNaN(correctNum)) {\r\n                        isCorrect = Math.abs(userNum - correctNum) < 0.001;\r\n                      }\r\n                    }\r\n                  }\r\n                  \r\n                  let operation = '';\r\n                  let calculatedResult = '';\r\n                  \r\n                  switch(result.gameType || gameType) {\r\n                    case 'subtraction': \r\n                      operation = ' - '; \r\n                      calculatedResult = a - b;\r\n                      break;\r\n                    case 'multiplication': \r\n                      operation = ' × '; \r\n                      calculatedResult = a * b;\r\n                      break;\r\n                    case 'division': \r\n                      operation = ' ÷ '; \r\n                      calculatedResult = Math.round(a / b);\r\n                      break;\r\n                    case 'mixedMath':\r\n                      const op = pair[2];\r\n                      operation = op === 'addition' ? ' + ' : ' - ';\r\n                      calculatedResult = op === 'addition' ? a + b : a - b;\r\n                      break;\r\n                    default:\r\n                      operation = ' ? ';\r\n                      calculatedResult = correctAnswer;\r\n                  }\r\n                  \r\n                  return (\r\n                    <div \r\n                      key={index} \r\n                      style={{\r\n                        padding: '12px 16px',\r\n                        borderBottom: index < comparisonPairs.length - 1 ? '1px solid #eee' : 'none',\r\n                        backgroundColor: isCorrect ? '#f8fff9' : '#fff8f8'\r\n                      }}\r\n                    >\r\n                      <div style={{ \r\n                        fontWeight: 'bold', \r\n                        marginBottom: '4px',\r\n                        color: '#333'\r\n                      }}>\r\n                        Q{index + 1}: {a}{operation}{b} = {calculatedResult}\r\n                      </div>\r\n                      <div style={{ \r\n                        fontSize: '14px',\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center'\r\n                      }}>\r\n                   <span>Your Answer: <strong>{userAnswer}</strong></span>\r\n                        <span>Correct Answer: <strong>{correctAnswer}</strong></span>\r\n                        <span style={{ \r\n                          fontSize: '16px',\r\n                          color: isCorrect ? '#28a745' : '#dc3545',\r\n                          fontWeight: 'bold'\r\n                        }}>\r\n                          {isCorrect ? '✓' : '✗'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )} */}\r\n          {/* Question Breakdown for detailed results only */}\r\n{isDetailedResult && comparisonPairs && comparisonPairs.length > 0 && (\r\n  <div>\r\n    <h3 style={{ marginBottom: '15px', color: '#333' }}>Question Breakdown:</h3>\r\n    <div style={{ \r\n      maxHeight: '300px', \r\n      overflow: 'auto',\r\n      border: '1px solid #ddd',\r\n      borderRadius: '8px'\r\n    }}>\r\n      {comparisonPairs.map((pair, index) => {\r\n        const [a, b] = pair;\r\n        const userAnswer = result.userAnswers[index] || 'No answer';\r\n        const correctAnswer = result.correctAnswers[index];\r\n        \r\n        // Clean comparison\r\n        const cleanUserAns = String(userAnswer).replace(/\\s+/g, '').toLowerCase();\r\n        const cleanCorrectAns = String(correctAnswer).replace(/\\s+/g, '').toLowerCase();\r\n        \r\n        let isCorrect = false;\r\n        if (cleanUserAns !== '' && cleanCorrectAns !== '') {\r\n          isCorrect = cleanUserAns === cleanCorrectAns;\r\n          \r\n          if (!isCorrect) {\r\n            const userNum = parseFloat(cleanUserAns);\r\n            const correctNum = parseFloat(cleanCorrectAns);\r\n            if (!isNaN(userNum) && !isNaN(correctNum)) {\r\n              isCorrect = Math.abs(userNum - correctNum) < 0.001;\r\n            }\r\n          }\r\n        }\r\n        \r\n        let operation = '';\r\n        let calculatedResult = '';\r\n        \r\n        switch(result.gameType || gameType) {\r\n          case 'subtraction': \r\n            operation = ' - '; \r\n            calculatedResult = a - b;\r\n            break;\r\n          case 'multiplication': \r\n            operation = ' × '; \r\n            calculatedResult = a * b;\r\n            break;\r\n          case 'division': \r\n            operation = ' ÷ '; \r\n            calculatedResult = Math.round(a / b);\r\n            break;\r\n          case 'mixedMath':\r\n            const op = pair[2];\r\n            operation = op === 'addition' ? ' + ' : ' - ';\r\n            calculatedResult = op === 'addition' ? a + b : a - b;\r\n            break;\r\n          default:\r\n            operation = ' ? ';\r\n            calculatedResult = correctAnswer;\r\n        }\r\n        \r\n        return (\r\n          <div \r\n            key={index} \r\n            className={`avc-question-result ${isCorrect ? 'correct' : 'incorrect'}`}\r\n            style={{\r\n              padding: '12px 16px',\r\n              borderBottom: index < comparisonPairs.length - 1 ? '1px solid #eee' : 'none',\r\n              backgroundColor: isCorrect ? '#f8fff9' : '#fff8f8'\r\n            }}\r\n          >\r\n            <div style={{ \r\n              fontWeight: 'bold', \r\n              marginBottom: '8px',\r\n              color: '#333',\r\n              fontSize: '16px'\r\n            }}>\r\n              Q{index + 1}: {a}{operation}{b} = {calculatedResult}\r\n            </div>\r\n            <div style={{ \r\n              fontSize: '14px',\r\n              display: 'grid',\r\n              gridTemplateColumns: '1fr 1fr auto',\r\n              gap: '12px',\r\n              alignItems: 'center'\r\n            }}>\r\n              <span style={{ textAlign: 'left' }}>\r\n                Your: <strong>{userAnswer}</strong>\r\n              </span>\r\n              <span style={{ textAlign: 'left' }}>\r\n                Correct: <strong>{correctAnswer}</strong>\r\n              </span>\r\n              <span style={{ \r\n                fontSize: '18px',\r\n                color: isCorrect ? '#28a745' : '#dc3545',\r\n                fontWeight: 'bold',\r\n                textAlign: 'center',\r\n                minWidth: '30px'\r\n              }}>\r\n                {isCorrect ? '✓' : '✗'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  </div>\r\n)}\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div style={{\r\n          padding: '20px',\r\n          borderTop: '1px solid #eee',\r\n          display: 'flex',\r\n          gap: '12px',\r\n          justifyContent: 'center',\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <button \r\n            onClick={() => {\r\n              console.log('Try Again clicked - resetting game');\r\n              setResult(null);\r\n              resetGame();\r\n              setTimeout(() => {\r\n                startGame();\r\n              }, 100);\r\n            }}\r\n            style={{\r\n              backgroundColor: '#ff8c00',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '12px 24px',\r\n              borderRadius: '6px',\r\n              fontSize: '16px',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              fontWeight: 'bold',\r\n              minWidth: '120px',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            <span>🔄</span>\r\n            <span>Try Again</span>\r\n          </button>\r\n\r\n          <button \r\n            onClick={() => {\r\n              console.log('Dashboard clicked - returning to setup');\r\n              setResult(null);\r\n              resetGame();\r\n            }}\r\n            style={{\r\n              backgroundColor: '#6c5ce7',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '12px 24px',\r\n              borderRadius: '6px',\r\n              fontSize: '16px',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              fontWeight: 'bold',\r\n              minWidth: '120px',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            <span>🏠</span>\r\n            <span>Dashboard</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// const renderResult = () => {\r\n//   console.log('=== RENDERING RESULT ===');\r\n//   console.log('Current result:', result);\r\n//   console.log('Current appState:', appState);\r\n  \r\n//   if (!result) {\r\n//     console.log('No result data available');\r\n//     return (\r\n//       <div className=\"avc-result-screen-container\">\r\n//         <div className=\"avc-result-card\">\r\n//           <div className=\"avc-result-header\">\r\n//             <h2>Loading Results...</h2>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   const isDetailedResult = result.userAnswers && result.correctAnswers && comparisonPairs.length > 0;\r\n  \r\n//   return (\r\n//     <div className=\"avc-result-screen-container\" style={{ \r\n//       position: 'fixed', \r\n//       top: 0, \r\n//       left: 0, \r\n//       right: 0, \r\n//       bottom: 0, \r\n//       zIndex: 9999,\r\n//       backgroundColor: 'rgba(0,0,0,0.8)',\r\n//       display: 'flex',\r\n//       alignItems: 'center',\r\n//       justifyContent: 'center'\r\n//     }}>\r\n//       <div className=\"avc-result-card\" style={{\r\n//         backgroundColor: 'white',\r\n//         padding: '20px',\r\n//         borderRadius: '10px',\r\n//         maxWidth: '90vw',\r\n//         maxHeight: '90vh',\r\n//         overflow: 'auto',\r\n//         minWidth: '300px'\r\n//       }}>\r\n//         <div className=\"avc-result-header\">\r\n//           <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>Game Result</h2>\r\n//           <div className={`avc-result-message ${result.correct ? 'avc-correct' : 'avc-incorrect'}`}\r\n//                style={{\r\n//                  textAlign: 'center',\r\n//                  padding: '10px',\r\n//                  borderRadius: '5px',\r\n//                  backgroundColor: result.correct ? '#d4edda' : '#f8d7da',\r\n//                  color: result.correct ? '#155724' : '#721c24',\r\n//                  marginBottom: '20px'\r\n//                }}>\r\n//             <span className=\"avc-emoji\">\r\n//               {result.correct ? \"Correct! 🎉\" : \"Not quite right 😕\"}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"avc-result-details\">\r\n//           {/* Show detailed results for math operations */}\r\n//           {isDetailedResult ? (\r\n//             <div className=\"avc-detailed-results\">\r\n//               <div className=\"avc-result-summary\" style={{ marginBottom: '20px' }}>\r\n//                 <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '10px' }}>\r\n//                   <span className=\"avc-detail-label\">Overall Result: </span>\r\n//                   <span className=\"avc-detail-value\">{result.actualAnswer}</span>\r\n//                 </div>\r\n//                 {result.accuracy && (\r\n//                   <div style={{ fontSize: '16px', marginBottom: '10px' }}>\r\n//                     <span className=\"avc-detail-label\">Accuracy: </span>\r\n//                     <span className=\"avc-detail-value\">{result.accuracy}</span>\r\n//                   </div>\r\n//                 )}\r\n//               </div>\r\n              \r\n//               <div className=\"avc-question-breakdown\" style={{ marginBottom: '20px' }}>\r\n//                 <h3 style={{ marginBottom: '15px' }}>Question Breakdown:</h3>\r\n//                 <div style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n//                   {comparisonPairs.map((pair, index) => {\r\n//                     const [a, b] = pair;\r\n//                     const userAns = result.userAnswers[index] || 'No answer';\r\n//                     const correctAns = result.correctAnswers[index];\r\n//                     const isCorrect = userAns.toString().trim() === correctAns.toString().trim();\r\n                    \r\n//                     let operation = '';\r\n//                     let calculatedResult = '';\r\n                    \r\n//                     switch(gameType) {\r\n//                       case 'subtraction': \r\n//                         operation = ' - '; \r\n//                         calculatedResult = a - b;\r\n//                         break;\r\n//                       case 'multiplication': \r\n//                         operation = ' × '; \r\n//                         calculatedResult = a * b;\r\n//                         break;\r\n//                       case 'division': \r\n//                         operation = ' ÷ '; \r\n//                         calculatedResult = Math.round(a / b);\r\n//                         break;\r\n//                       case 'mixedMath':\r\n//                         const op = pair[2];\r\n//                         operation = op === 'addition' ? ' + ' : ' - ';\r\n//                         calculatedResult = op === 'addition' ? a + b : a - b;\r\n//                         break;\r\n//                       default:\r\n//                         operation = ' ? ';\r\n//                         calculatedResult = correctAns;\r\n//                     }\r\n                    \r\n//                     return (\r\n//                       <div key={index} \r\n//                            style={{\r\n//                              padding: '8px 12px',\r\n//                              margin: '5px 0',\r\n//                              borderRadius: '5px',\r\n//                              backgroundColor: isCorrect ? '#d4edda' : '#f8d7da',\r\n//                              border: `1px solid ${isCorrect ? '#c3e6cb' : '#f5c6cb'}`\r\n//                            }}>\r\n//                         <div style={{ fontWeight: 'bold' }}>\r\n//                           Q{index + 1}: {a}{operation}{b} = {calculatedResult}\r\n//                         </div>\r\n//                         <div style={{ fontSize: '14px', marginTop: '4px' }}>\r\n//                           <span>Your answer: {userAns} | </span>\r\n//                           <span>Correct: {correctAns} | </span>\r\n//                           <span style={{ fontWeight: 'bold', color: isCorrect ? '#155724' : '#721c24' }}>\r\n//                             {isCorrect ? '✓' : '✗'}\r\n//                           </span>\r\n//                         </div>\r\n//                       </div>\r\n//                     );\r\n//                   })}\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           ) : (\r\n//             // Standard result display for other game types\r\n//             <div style={{ marginBottom: '20px' }}>\r\n//               <div style={{ marginBottom: '10px' }}>\r\n//                 <span className=\"avc-detail-label\">Your Answer: </span>\r\n//                 <span className=\"avc-detail-value\">{userAnswer || 'No answer provided'}</span>\r\n//               </div>\r\n//               <div style={{ marginBottom: '10px' }}>\r\n//                 <span className=\"avc-detail-label\">Correct Answer: </span>\r\n//                 <span className=\"avc-detail-value\">{result.actualAnswer}</span>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n          \r\n//           <div style={{ \r\n//             padding: '10px',\r\n//             borderRadius: '5px',\r\n//             backgroundColor: '#f8f9fa',\r\n//             textAlign: 'center',\r\n//             marginBottom: '20px'\r\n//           }}>\r\n//             <span className=\"avc-detail-label\">Score: </span>\r\n//             <span style={{\r\n//               fontSize: '18px',\r\n//               fontWeight: 'bold',\r\n//               color: result.score > 0 ? '#28a745' : '#dc3545'\r\n//             }}>\r\n//               {result.score > 0 ? \"+\" : \"\"}{result.score}\r\n//               {result.maxScore > 1 && ` of ${result.maxScore}`}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"avc-result-actions\" style={{ \r\n//           display: 'flex', \r\n//           gap: '10px', \r\n//           justifyContent: 'center',\r\n//           flexWrap: 'wrap'\r\n//         }}>\r\n//           <button \r\n//             onClick={() => {\r\n//               console.log('Try Again clicked');\r\n//               resetGame();\r\n//               setTimeout(() => {\r\n//                 startGame();\r\n//               }, 100);\r\n//             }}\r\n//             style={{\r\n//               backgroundColor: '#ff8c00',\r\n//               color: 'white',\r\n//               border: 'none',\r\n//               padding: '12px 24px',\r\n//               borderRadius: '5px',\r\n//               fontSize: '16px',\r\n//               cursor: 'pointer',\r\n//               display: 'flex',\r\n//               alignItems: 'center',\r\n//               gap: '8px'\r\n//             }}\r\n//           >\r\n//             <span>🔄</span>\r\n//             <span>Try Again</span>\r\n//           </button>\r\n\r\n//           <button \r\n//             onClick={() => {\r\n//               console.log('Dashboard clicked');\r\n//               resetGame();\r\n//             }}\r\n//             style={{\r\n//               backgroundColor: '#6c5ce7',\r\n//               color: 'white',\r\n//               border: 'none',\r\n//               padding: '12px 24px',\r\n//               borderRadius: '5px',\r\n//               fontSize: '16px',\r\n//               cursor: 'pointer',\r\n//               display: 'flex',\r\n//               alignItems: 'center',\r\n//               gap: '8px'\r\n//             }}\r\n//           >\r\n//             <span>🏠</span>\r\n//             <span>Dashboard</span>\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n  \r\n  return (\r\n    <div className=\"app-container\">\r\n      {appState === 'setup' && renderSetup()}\r\n      {appState === 'game' && renderGame()}\r\n      {appState === 'result' && renderResult()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AvecusApp;\r\n\r\n\r\n\r\n\r\n// dfjdfjzjhdifzsidh tfideifhysidjv hkjz ddhvxhcpioofuhydfhgsdffvioodznfv;oidfgvnse\r\n\r\n// mgvicnbnnd gdfngdnfkjgn kjdfgjkdkjfgjhykhjkhjkkoudhfoigh idf hgidfogdf bjdbfjbbudfbvuijsdnfjbdjkfbndnfbjncivbn\r\n\r\n// 4fhg48h694fg6h4f4gh4f46ghghgh198"],"mappings":"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AEiB,CAAC;EAExB,CAAC;EAED,MAAMsB,aAAa,GAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGF,aAAa,GAAGC,mBAAmB;EAEvD,MAAME,0BAA0B,GAAGA,CAAA,KAAM;IACvC,MAAMC,IAAI,GAAG,EAAE;IACf,MAAMC,MAAM,GAAG/J,UAAU,IAAI,CAAC;;IAE9B;IACA,IAAIgK,QAAQ;IACZ,IAAID,MAAM,KAAK,CAAC,EAAEC,QAAQ,GAAG7C,IAAI,CAAC8C,KAAK,CAAC9C,IAAI,CAAC+C,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAAA,KAC3D,IAAIH,MAAM,KAAK,CAAC,EAAEC,QAAQ,GAAG7C,IAAI,CAAC8C,KAAK,CAAC9C,IAAI,CAAC+C,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;IAAA,KAClE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EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAIA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA,MAAMG,oBAAoB,GAAGA,CAAA,KAAM;IACjC,MAAMC,SAAS,GAAGrS,KAAK,GAAGE,KAAK,GAAG,IAAI;IACtCwH,OAAO,CAACU,GAAG,CAAC,mBAAmBiK,SAAS,4BAA4B,CAAC;IAErE/P,kBAAkB,CAAC,CAAC,CAAC;IACrBF,gBAAgB,CAACiQ,SAAS,CAAC;IAC3B7P,qBAAqB,CAAC,IAAIC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnCgE,kBAAkB,CAAC,KAAK,CAAC;IAEzB,IAAI6L,kBAAkB,GAAG,KAAK,CAAC,CAAC;;IAEhC,MAAMC,SAAS,GAAGzD,WAAW,CAAC,MAAM;MAClCxM,kBAAkB,CAACyM,IAAI,IAAI;QACzB,MAAMyD,UAAU,GAAGzD,IAAI,GAAG,GAAG;QAC7B,MAAM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CA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;E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KAAK;MAAEkX;IAAS,CAAC,CAAC;IACrDlN,qBAAqB,CAAClK,OAAO,EAAEE,KAAK,EAAEkX,QAAQ,CAAC;IAC/C3Y,WAAW,CAAC,QAAQ,CAAC;EACvB,CAAC;;EAED;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EAC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QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EACD;;EAEA;;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAMsU,UAAU,GAAGA,CAAA,KAAM;IAEvB;IACF,IAAI9c,QAAQ,KAAK,UAAU,EAAE;MAC3B,IAAI8D,sBAAsB,EAAE;QAC1B,oBACEpE,OAAA;UAAKyI,SAAS,EAAC,OAAO;UAAA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H,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAEV;EACA,CAAC;;EAED;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMsV,YAAY,GAAGA,CAAA,KAAM;IACzB5V,OAAO,CAACU,GAAG,CAAC,0BAA0B,CAAC;IACvCV,OAAO,CAACU,GAAG,CAAC,iBAAiB,EAAExH,MAAM,CAAC;IAEtC,IAAI,CAACA,MAAM,EAAE;MACX8G,OAAO,CAACU,GAAG,CAAC,0BAA0B,CAAC;MACvC,oBACElJ,OAAA;QAAKyI,SAAS,EAAC,6BAA6B;QAACY,KAAK,EAAE;UAClD2O,QAAQ,EAAE,OAAO;UACjBqG,GAAG,EAAE,CAAC;UACNC,IAAI,EAAE,CAAC;UACPC,KAAK,EAAE,CAAC;UACRC,MAAM,EAAE,CAAC;UACTvG,MAAM,EAAE,KAAK;UACbzO,eAAe,EAAE,iBAAiB;UAClCiV,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBC,cAAc,EAAE;QAClB,CAAE;QAAAjW,QAAA,eACA1I,OAAA;UAAKyI,SAAS,EAAC,iBAAiB;UAACY,KAAK,EAAE;YACtCG,eAAe,EAAE,OAAO;YACxBD,OAAO,EAAE,MAAM;YACfG,YAAY,EAAE,MAAM;YACpBkV,QAAQ,EAAE,OAAO;YACjBtV,SAAS,EAAE;UACb,CAAE;UAAAZ,QAAA,gBACA1I,OAAA;YAAA0I,QAAA,EAAI;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3B9I,OAAA;YAAA0I,QAAA,EAAG;UAA0C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACjD9I,OAAA;YACE+I,OAAO,EAAEA,CAAA,KAAM1I,WAAW,CAAC,OAAO,CAAE;YACpCgJ,KAAK,EAAE;cACLG,eAAe,EAAE,SAAS;cAC1BC,KAAK,EAAE,OAAO;cACdM,MAAM,EAAE,MAAM;cACdR,OAAO,EAAE,WAAW;cACpBG,YAAY,EAAE,KAAK;cACnBM,MAAM,EAAE,SAAS;cACjBC,SAAS,EAAE;YACb,CAAE;YAAAvB,QAAA,EACH;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAEV;;IAEA;IACA,MAAM+V,gBAAgB,GAAGnd,MAAM,CAACiM,WAAW,IAAIjM,MAAM,CAACqK,cAAc,IAC3C6G,KAAK,CAACkM,OAAO,CAACpd,MAAM,CAACiM,WAAW,CAAC,IAAIiF,KAAK,CAACkM,OAAO,CAACpd,MAAM,CAACqK,cAAc,CAAC;IAElG,oBACE/L,OAAA;MAAKyI,SAAS,EAAC,6BAA6B;MAACY,KAAK,EAAE;QAClD2O,QAAQ,EAAE,OAAO;QACjBqG,GAAG,EAAE,CAAC;QACNC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE,CAAC;QACTvG,MAAM,EAAE,KAAK;QACbzO,eAAe,EAAE,kBAAkB;QACnCiV,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,cAAc,EAAE,QAAQ;QACxBpV,OAAO,EAAE,MAAM;QACfwV,SAAS,EAAE;MACb,CAAE;MAAArW,QAAA,eACA1I,OAAA;QAAKyI,SAAS,EAAC,iBAAiB;QAACY,KAAK,EAAE;UACtCG,eAAe,EAAE,OAAO;UACxBE,YAAY,EAAE,MAAM;UACpBsV,QAAQ,EAAE,MAAM;UAChBC,SAAS,EAAE,MAAM;UACjBC,QAAQ,EAAE,MAAM;UAChBN,QAAQ,EAAE,OAAO;UACjBO,SAAS,EAAE,6BAA6B;UACxC5V,OAAO,EAAE;QACX,CAAE;QAAAb,QAAA,gBAEA1I,OAAA;UAAKqJ,KAAK,EAAE;YACVE,OAAO,EAAE,qBAAqB;YAC9B6V,YAAY,EAAE;UAChB,CAAE;UAAA1W,QAAA,gBACA1I,OAAA;YAAIqJ,KAAK,EAAE;cACTM,MAAM,EAAE,YAAY;cACpBL,SAAS,EAAE,QAAQ;cACnB8O,QAAQ,EAAE,MAAM;cAChB3O,KAAK,EAAE;YACT,CAAE;YAAAf,QAAA,EAAC;UAEH;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAEL9I,OAAA;YAAKqJ,KAAK,EAAE;cACVC,SAAS,EAAE,QAAQ;cACnBC,OAAO,EAAE,MAAM;cACfG,YAAY,EAAE,KAAK;cACnBF,eAAe,EAAE9H,MAAM,CAACE,OAAO,GAAG,SAAS,GAAG,SAAS;cACvDmI,MAAM,EAAE,aAAarI,MAAM,CAACE,OAAO,GAAG,SAAS,GAAG,SAAS,EAAE;cAC7D6H,KAAK,EAAE/H,MAAM,CAACE,OAAO,GAAG,SAAS,GAAG,SAAS;cAC7CwW,QAAQ,EAAE,MAAM;cAChBD,UAAU,EAAE;YACd,CAAE;YAAAzP,QAAA,EACChH,MAAM,CAACE,OAAO,GAAG,oBAAoB,GAAG;UAAqB;YAAA+G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGN9I,OAAA;UAAKqJ,KAAK,EAAE;YAAEE,OAAO,EAAE;UAAO,CAAE;UAAAb,QAAA,gBAE9B1I,OAAA;YAAKqJ,KAAK,EAAE;cACVG,eAAe,EAAE,SAAS;cAC1BD,OAAO,EAAE,MAAM;cACfG,YAAY,EAAE,KAAK;cACnBwO,YAAY,EAAE,MAAM;cACpB5O,SAAS,EAAE;YACb,CAAE;YAAAZ,QAAA,gBACA1I,OAAA;cAAKqJ,KAAK,EAAE;gBAAE+O,QAAQ,EAAE,MAAM;gBAAED,UAAU,EAAE,MAAM;gBAAED,YAAY,EAAE;cAAM,CAAE;cAAAxP,QAAA,EACvEhH,MAAM,CAACG;YAAY;cAAA8G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC,EACLpH,MAAM,CAACmK,QAAQ,iBACd7L,OAAA;cAAKqJ,KAAK,EAAE;gBAAE+O,QAAQ,EAAE,MAAM;gBAAE3O,KAAK,EAAE;cAAO,CAAE;cAAAf,QAAA,GAAC,YACrC,EAAChH,MAAM,CAACmK,QAAQ;YAAA;cAAAlD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CACN,EAGA,CAAC+V,gBAAgB,IAAInd,MAAM,CAACN,UAAU,KAAKie,SAAS,iBACnDrf,OAAA;cAAKqJ,KAAK,EAAE;gBAAE+O,QAAQ,EAAE,MAAM;gBAAE3O,KAAK,EAAE,MAAM;gBAAEQ,SAAS,EAAE;cAAM,CAAE;cAAAvB,QAAA,GAAC,eACpD,EAAChH,MAAM,CAACN,UAAU,IAAI,oBAAoB;YAAA;cAAAuH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpD,CACN,eAED9I,OAAA;cAAKqJ,KAAK,EAAE;gBACV+O,QAAQ,EAAE,MAAM;gBAChBD,UAAU,EAAE,MAAM;gBAClB1O,KAAK,EAAE/H,MAAM,CAACI,KAAK,GAAG,CAAC,GAAG,SAAS,GAAG,SAAS;gBAC/CmI,SAAS,EAAE;cACb,CAAE;cAAAvB,QAAA,GAAC,SACM,EAAChH,MAAM,CAACI,KAAK,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAEJ,MAAM,CAACI,KAAK;YAAA;cAAA6G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9C,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAoGf+V,gBAAgB,IAAIxc,eAAe,IAAIA,eAAe,CAACkG,MAAM,GAAG,CAAC,iBAChEvI,OAAA;YAAA0I,QAAA,gBACE1I,OAAA;cAAIqJ,KAAK,EAAE;gBAAE6O,YAAY,EAAE,MAAM;gBAAEzO,KAAK,EAAE;cAAO,CAAE;cAAAf,QAAA,EAAC;YAAmB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC5E9I,OAAA;cAAKqJ,KAAK,EAAE;gBACV4V,SAAS,EAAE,OAAO;gBAClBC,QAAQ,EAAE,MAAM;gBAChBnV,MAAM,EAAE,gBAAgB;gBACxBL,YAAY,EAAE;cAChB,CAAE;cAAAhB,QAAA,EACCrG,eAAe,CAACiK,GAAG,CAAC,CAACgT,IAAI,EAAE/T,KAAK,KAAK;gBACpC,MAAM,CAACgB,CAAC,EAAEC,CAAC,CAAC,GAAG8S,IAAI;gBACnB,MAAMle,UAAU,GAAGM,MAAM,CAACiM,WAAW,CAACpC,KAAK,CAAC,IAAI,WAAW;gBAC3D,MAAMgU,aAAa,GAAG7d,MAAM,CAACqK,cAAc,CAACR,KAAK,CAAC;;gBAElD;gBACA,MAAMuB,YAAY,GAAGC,MAAM,CAAC3L,UAAU,CAAC,CAAC4L,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC;gBACzE,MAAMC,eAAe,GAAGH,MAAM,CAACwS,aAAa,CAAC,CAACvS,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC;gBAE/E,IAAIQ,SAAS,GAAG,KAAK;gBACrB,IAAIX,YAAY,KAAK,EAAE,IAAII,eAAe,KAAK,EAAE,EAAE;kBACjDO,SAAS,GAAGX,YAAY,KAAKI,eAAe;kBAE5C,IAAI,CAACO,SAAS,EAAE;oBACd,MAAML,OAAO,GAAGC,UAAU,CAACP,YAAY,CAAC;oBACxC,MAAMQ,UAAU,GAAGD,UAAU,CAACH,eAAe,CAAC;oBAC9C,IAAI,CAACK,KAAK,CAACH,OAAO,CAAC,IAAI,CAACG,KAAK,CAACD,UAAU,CAAC,EAAE;sBACzCG,SAAS,GAAG5F,IAAI,CAAC2F,GAAG,CAACJ,OAAO,GAAGE,UAAU,CAAC,GAAG,KAAK;oBACpD;kBACF;gBACF;gBAEA,IAAIb,SAAS,GAAG,EAAE;gBAClB,IAAI+S,gBAAgB,GAAG,EAAE;gBAEzB,QAAO9d,MAAM,CAACpB,QAAQ,IAAIA,QAAQ;kBAChC,KAAK,aAAa;oBAChBmM,SAAS,GAAG,KAAK;oBACjB+S,gBAAgB,GAAGjT,CAAC,GAAGC,CAAC;oBACxB;kBACF,KAAK,gBAAgB;oBACnBC,SAAS,GAAG,KAAK;oBACjB+S,gBAAgB,GAAGjT,CAAC,GAAGC,CAAC;oBACxB;kBACF,KAAK,UAAU;oBACbC,SAAS,GAAG,KAAK;oBACjB+S,gBAAgB,GAAG3X,IAAI,CAACE,KAAK,CAACwE,CAAC,GAAGC,CAAC,CAAC;oBACpC;kBACF,KAAK,WAAW;oBACd,MAAMiT,EAAE,GAAGH,IAAI,CAAC,CAAC,CAAC;oBAClB7S,SAAS,GAAGgT,EAAE,KAAK,UAAU,GAAG,KAAK,GAAG,KAAK;oBAC7CD,gBAAgB,GAAGC,EAAE,KAAK,UAAU,GAAGlT,CAAC,GAAGC,CAAC,GAAGD,CAAC,GAAGC,CAAC;oBACpD;kBACF;oBACEC,SAAS,GAAG,KAAK;oBACjB+S,gBAAgB,GAAGD,aAAa;gBACpC;gBAEA,oBACEvf,OAAA;kBAEEyI,SAAS,EAAE,uBAAuBgF,SAAS,GAAG,SAAS,GAAG,WAAW,EAAG;kBACxEpE,KAAK,EAAE;oBACLE,OAAO,EAAE,WAAW;oBACpB6V,YAAY,EAAE7T,KAAK,GAAGlJ,eAAe,CAACkG,MAAM,GAAG,CAAC,GAAG,gBAAgB,GAAG,MAAM;oBAC5EiB,eAAe,EAAEiE,SAAS,GAAG,SAAS,GAAG;kBAC3C,CAAE;kBAAA/E,QAAA,gBAEF1I,OAAA;oBAAKqJ,KAAK,EAAE;sBACV8O,UAAU,EAAE,MAAM;sBAClBD,YAAY,EAAE,KAAK;sBACnBzO,KAAK,EAAE,MAAM;sBACb2O,QAAQ,EAAE;oBACZ,CAAE;oBAAA1P,QAAA,GAAC,GACA,EAAC6C,KAAK,GAAG,CAAC,EAAC,IAAE,EAACgB,CAAC,EAAEE,SAAS,EAAED,CAAC,EAAC,KAAG,EAACgT,gBAAgB;kBAAA;oBAAA7W,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CAAC,eACN9I,OAAA;oBAAKqJ,KAAK,EAAE;sBACV+O,QAAQ,EAAE,MAAM;sBAChBqG,OAAO,EAAE,MAAM;sBACfiB,mBAAmB,EAAE,cAAc;sBACnCC,GAAG,EAAE,MAAM;sBACXjB,UAAU,EAAE;oBACd,CAAE;oBAAAhW,QAAA,gBACA1I,OAAA;sBAAMqJ,KAAK,EAAE;wBAAEC,SAAS,EAAE;sBAAO,CAAE;sBAAAZ,QAAA,GAAC,QAC5B,eAAA1I,OAAA;wBAAA0I,QAAA,EAAStH;sBAAU;wBAAAuH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAS,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC/B,CAAC,eACP9I,OAAA;sBAAMqJ,KAAK,EAAE;wBAAEC,SAAS,EAAE;sBAAO,CAAE;sBAAAZ,QAAA,GAAC,WACzB,eAAA1I,OAAA;wBAAA0I,QAAA,EAAS6W;sBAAa;wBAAA5W,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAS,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACrC,CAAC,eACP9I,OAAA;sBAAMqJ,KAAK,EAAE;wBACX+O,QAAQ,EAAE,MAAM;wBAChB3O,KAAK,EAAEgE,SAAS,GAAG,SAAS,GAAG,SAAS;wBACxC0K,UAAU,EAAE,MAAM;wBAClB7O,SAAS,EAAE,QAAQ;wBACnBsV,QAAQ,EAAE;sBACZ,CAAE;sBAAAlW,QAAA,EACC+E,SAAS,GAAG,GAAG,GAAG;oBAAG;sBAAA9E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAClB,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC;gBAAA,GAtCDyC,KAAK;kBAAA5C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAuCP,CAAC;cAEV,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACY,CAAC,eAGN9I,OAAA;UAAKqJ,KAAK,EAAE;YACVE,OAAO,EAAE,MAAM;YACfqW,SAAS,EAAE,gBAAgB;YAC3BnB,OAAO,EAAE,MAAM;YACfkB,GAAG,EAAE,MAAM;YACXhB,cAAc,EAAE,QAAQ;YACxBkB,QAAQ,EAAE;UACZ,CAAE;UAAAnX,QAAA,gBACA1I,OAAA;YACE+I,OAAO,EAAEA,CAAA,KAAM;cACbP,OAAO,CAACU,GAAG,CAAC,oCAAoC,CAAC;cACjDvH,SAAS,CAAC,IAAI,CAAC;cACf8Z,SAAS,CAAC,CAAC;cACX1N,UAAU,CAAC,MAAM;gBACfgH,SAAS,CAAC,CAAC;cACb,CAAC,EAAE,GAAG,CAAC;YACT,CAAE;YACF1L,KAAK,EAAE;cACLG,eAAe,EAAE,SAAS;cAC1BC,KAAK,EAAE,OAAO;cACdM,MAAM,EAAE,MAAM;cACdR,OAAO,EAAE,WAAW;cACpBG,YAAY,EAAE,KAAK;cACnB0O,QAAQ,EAAE,MAAM;cAChBpO,MAAM,EAAE,SAAS;cACjByU,OAAO,EAAE,MAAM;cACfC,UAAU,EAAE,QAAQ;cACpBiB,GAAG,EAAE,KAAK;cACVxH,UAAU,EAAE,MAAM;cAClByG,QAAQ,EAAE,OAAO;cACjBD,cAAc,EAAE;YAClB,CAAE;YAAAjW,QAAA,gBAEF1I,OAAA;cAAA0I,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACf9I,OAAA;cAAA0I,QAAA,EAAM;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CAAC,eAET9I,OAAA;YACE+I,OAAO,EAAEA,CAAA,KAAM;cACbP,OAAO,CAACU,GAAG,CAAC,wCAAwC,CAAC;cACrDvH,SAAS,CAAC,IAAI,CAAC;cACf8Z,SAAS,CAAC,CAAC;YACb,CAAE;YACFpS,KAAK,EAAE;cACLG,eAAe,EAAE,SAAS;cAC1BC,KAAK,EAAE,OAAO;cACdM,MAAM,EAAE,MAAM;cACdR,OAAO,EAAE,WAAW;cACpBG,YAAY,EAAE,KAAK;cACnB0O,QAAQ,EAAE,MAAM;cAChBpO,MAAM,EAAE,SAAS;cACjByU,OAAO,EAAE,MAAM;cACfC,UAAU,EAAE,QAAQ;cACpBiB,GAAG,EAAE,KAAK;cACVxH,UAAU,EAAE,MAAM;cAClByG,QAAQ,EAAE,OAAO;cACjBD,cAAc,EAAE;YAClB,CAAE;YAAAjW,QAAA,gBAEF1I,OAAA;cAAA0I,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACf9I,OAAA;cAAA0I,QAAA,EAAM;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;;EAED;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEE,oBACE9I,OAAA;IAAKyI,SAAS,EAAC,eAAe;IAAAC,QAAA,GAC3BtI,QAAQ,KAAK,OAAO,IAAIuc,WAAW,CAAC,CAAC,EACrCvc,QAAQ,KAAK,MAAM,IAAIgd,UAAU,CAAC,CAAC,EACnChd,QAAQ,KAAK,QAAQ,IAAIge,YAAY,CAAC,CAAC;EAAA;IAAAzV,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrC,CAAC;AAEV,CAAC;AAAC5I,EAAA,CA1uMID,SAAS;EAAA,QACIN,WAAW;AAAA;AAAAmgB,EAAA,GADxB7f,SAAS;AA4uMf,eAAeA,SAAS;;AAKxB;;AAEA;;AAEA;AAAA,IAAA6f,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}